(()=>{var __webpack_modules__={391:(module,__unused_webpack_exports,__webpack_require__)=>{eval('parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u=undefined;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if( true&&"string"==typeof t)return __webpack_require__(784)(t);var c=new Error("Cannot find module \'"+t+"\'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]); true?module.exports=l:0}if(parcelRequire=f,i)throw i;return f}({"EgBh":[function(require,module,exports) {\nvar e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),module.exports.binaryFeatures=e;var r=module.exports.BlobBuilder;function t(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(r=module.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),t.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},t.prototype.flush=function(){if(this._pieces.length>0){var r=new Uint8Array(this._pieces);e.useArrayBufferView||(r=r.buffer),this._parts.push(r),this._pieces=[]}},t.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var t=new r,i=0,u=this._parts.length;i<u;i++)t.append(this._parts[i]);return t.getBlob()}return new Blob(this._parts)},module.exports.BufferBuilder=t;\n},{}],"kdPp":[function(require,module,exports) {\nvar t=require("./bufferbuilder").BufferBuilder,e=require("./bufferbuilder").binaryFeatures,i={unpack:function(t){return new r(t).unpack()},pack:function(t){var e=new n;return e.pack(t),e.getBuffer()}};function r(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function n(){this.bufferBuilder=new t}function u(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function a(t){return t.length>600?new Blob([t]).size:t.replace(/[^\\u0000-\\u007F]/g,u).length}module.exports=i,r.prototype.unpack=function(){var t,e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}},r.prototype.unpack_uint8=function(){var t=255&this.dataView[this.index];return this.index++,t},r.prototype.unpack_uint16=function(){var t=this.read(2),e=256*(255&t[0])+(255&t[1]);return this.index+=2,e},r.prototype.unpack_uint32=function(){var t=this.read(4),e=256*(256*(256*t[0]+t[1])+t[2])+t[3];return this.index+=4,e},r.prototype.unpack_uint64=function(){var t=this.read(8),e=256*(256*(256*(256*(256*(256*(256*t[0]+t[1])+t[2])+t[3])+t[4])+t[5])+t[6])+t[7];return this.index+=8,e},r.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-256},r.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-65536},r.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)},r.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)},r.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e},r.prototype.unpack_string=function(t){for(var e,i,r=this.read(t),n=0,u="";n<t;)(e=r[n])<128?(u+=String.fromCharCode(e),n++):(192^e)<32?(i=(192^e)<<6|63&r[n+1],u+=String.fromCharCode(i),n+=2):(i=(15&e)<<12|(63&r[n+1])<<6|63&r[n+2],u+=String.fromCharCode(i),n+=3);return this.index+=t,u},r.prototype.unpack_array=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=this.unpack();return e},r.prototype.unpack_map=function(t){for(var e={},i=0;i<t;i++){var r=this.unpack(),n=this.unpack();e[r]=n}return e},r.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=(t>>23&255)-127;return(0===t>>31?1:-1)*(8388607&t|8388608)*Math.pow(2,e-23)},r.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),i=(t>>20&2047)-1023;return(0===t>>31?1:-1)*((1048575&t|1048576)*Math.pow(2,i-20)+e*Math.pow(2,i-52))},r.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")},n.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},n.prototype.pack=function(t){var i=typeof t;if("string"===i)this.pack_string(t);else if("number"===i)Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if("boolean"===i)!0===t?this.bufferBuilder.append(195):!1===t&&this.bufferBuilder.append(194);else if("undefined"===i)this.bufferBuilder.append(192);else{if("object"!==i)throw new Error(\'Type "\'+i+\'" not yet supported\');if(null===t)this.bufferBuilder.append(192);else{var r=t.constructor;if(r==Array)this.pack_array(t);else if(r==Blob||r==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(r==ArrayBuffer)e.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)e.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(r==Object||r.toString().startsWith("class"))this.pack_object(t);else if(r==Date)this.pack_string(t.toString());else{if("function"!=typeof t.toBinaryPack)throw new Error(\'Type "\'+r.toString()+\'" not yet supported\');this.bufferBuilder.append(t.toBinaryPack())}}}this.bufferBuilder.flush()},n.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_string=function(t){var e=a(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(e)}for(var i=0;i<e;i++)this.pack(t[i])},n.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(255&t);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-0x8000000000000000&&t<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(t);else{if(!(t>=0&&t<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(t)}},n.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var i=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,i)-1,n=Math.floor(r*Math.pow(2,52)),u=Math.pow(2,32),a=e<<31|i+1023<<20|n/u&1048575,p=n%u;this.bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(p)},n.prototype.pack_object=function(t){var e=Object.keys(t).length;if(e<=15)this.pack_uint8(128+e);else if(e<=65535)this.bufferBuilder.append(222),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(e)}for(var i in t)t.hasOwnProperty(i)&&(this.pack(i),this.pack(t[i]))},n.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)},n.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_uint32=function(t){var e=4294967295&t;this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},n.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)},n.prototype.pack_int8=function(t){this.bufferBuilder.append(255&t)},n.prototype.pack_int16=function(t){this.bufferBuilder.append((65280&t)>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)};\n},{"./bufferbuilder":"EgBh"}],"iSxC":[function(require,module,exports) {\n"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractVersion=o,exports.wrapPeerConnectionEvent=i,exports.disableLog=s,exports.disableWarnings=a,exports.log=u,exports.deprecated=c,exports.detectBrowser=p,exports.compactObject=d,exports.walkStats=l,exports.filterStats=b;var n=!0,r=!0;function o(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function i(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);var i=function(e){var t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=i,o.apply(this,[e,i])};var i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return i.apply(this,arguments);var r=this._eventMap[n];return delete this._eventMap[n],i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function s(e){return"boolean"!=typeof e?new Error("Argument type: "+t(e)+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function a(e){return"boolean"!=typeof e?new Error("Argument type: "+t(e)+". Please use a boolean."):(r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function u(){if("object"===("undefined"==typeof window?"undefined":t(window))){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function c(e,t){r&&console.warn(e+" is deprecated, please use "+t+" instead.")}function p(e){var{navigator:t}=e,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=o(t.userAgent,/Firefox\\/(\\d+)\\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=o(t.userAgent,/Chrom(e|ium)\\/(\\d+)\\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\\/(\\d+).(\\d+)$/))n.browser="edge",n.version=o(t.userAgent,/Edge\\/(\\d+).(\\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\\/(\\d+)\\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=o(t.userAgent,/AppleWebKit\\/(\\d+)\\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n}function f(e){return"[object Object]"===Object.prototype.toString.call(e)}function d(t){return f(t)?Object.keys(t).reduce(function(n,r){var o=f(t[r]),i=o?d(t[r]):t[r],s=o&&!Object.keys(i).length;return void 0===i||s?n:Object.assign(n,e({},r,i))},{}):t}function l(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(function(r){r.endsWith("Id")?l(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(function(t){l(e,e.get(t),n)})}))}function b(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var i=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)}),i.forEach(function(t){e.forEach(function(n){n.type===r&&n.trackId===t.id&&l(e,n,o)})}),o}\n},{}],"s6SN":[function(require,module,exports) {\n"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=i;var e=t(require("../utils.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=e.log;function i(r){var t=r&&r.navigator;if(t.mediaDevices){var i=e.detectBrowser(r),a=function(e){if("object"!==o(e)||e.mandatory||e.optional)return e;var r={};return Object.keys(e).forEach(function(t){if("require"!==t&&"advanced"!==t&&"mediaSource"!==t){var n="object"===o(e[t])?e[t]:{ideal:e[t]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,r){return e?e+r.charAt(0).toUpperCase()+r.slice(1):"deviceId"===r?"sourceId":r};if(void 0!==n.ideal){r.optional=r.optional||[];var a={};"number"==typeof n.ideal?(a[i("min",t)]=n.ideal,r.optional.push(a),(a={})[i("max",t)]=n.ideal,r.optional.push(a)):(a[i("",t)]=n.ideal,r.optional.push(a))}void 0!==n.exact&&"number"!=typeof n.exact?(r.mandatory=r.mandatory||{},r.mandatory[i("",t)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(r.mandatory=r.mandatory||{},r.mandatory[i(e,t)]=n[e])})}}),e.advanced&&(r.optional=(r.optional||[]).concat(e.advanced)),r},c=function(e,r){if(i.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===o(e.audio)){var c=function(e,r,t){r in e&&!(t in e)&&(e[t]=e[r],delete e[r])};c((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),c(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=a(e.audio)}if(e&&"object"===o(e.video)){var d=e.video.facingMode;d=d&&("object"===o(d)?d:{ideal:d});var u,s=i.version<66;if(d&&("user"===d.exact||"environment"===d.exact||"user"===d.ideal||"environment"===d.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||s))if(delete e.video.facingMode,"environment"===d.exact||"environment"===d.ideal?u=["back","rear"]:"user"!==d.exact&&"user"!==d.ideal||(u=["front"]),u)return t.mediaDevices.enumerateDevices().then(function(t){var o=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return u.some(function(r){return e.label.toLowerCase().includes(r)})});return!o&&t.length&&u.includes("back")&&(o=t[t.length-1]),o&&(e.video.deviceId=d.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=a(e.video),n("chrome: "+JSON.stringify(e)),r(e)});e.video=a(e.video)}return n("chrome: "+JSON.stringify(e)),r(e)},d=function(e){return i.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,r,o){c(e,function(e){t.webkitGetUserMedia(e,r,function(e){o&&o(d(e))})})}.bind(t),t.mediaDevices.getUserMedia){var u=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return c(e,function(e){return u(e).then(function(r){if(e.audio&&!r.getAudioTracks().length||e.video&&!r.getVideoTracks().length)throw r.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return r},function(e){return Promise.reject(d(e))})})}}}}\n},{"../utils.js":"iSxC"}],"VHa8":[function(require,module,exports) {\n"use strict";function e(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof i?e.navigator.mediaDevices.getDisplayMedia=function(a){return i(a).then(function(i){var t=a.video&&a.video.width,o=a.video&&a.video.height,d=a.video&&a.video.frameRate;return a.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:d||3}},t&&(a.video.mandatory.maxWidth=t),o&&(a.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(a)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;\n},{}],"uI5X":[function(require,module,exports) {\n"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimMediaStream=a,exports.shimOnTrack=c,exports.shimGetSendersWithDtmf=p,exports.shimGetStats=d,exports.shimSenderReceiverGetStats=h,exports.shimAddTrackRemoveTrackWithNative=f,exports.shimAddTrackRemoveTrack=m,exports.shimPeerConnection=u,exports.fixNegotiationNeeded=l,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return t.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}});var e=i(require("../utils.js")),t=require("./getusermedia"),r=require("./getdisplaymedia");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function c(t){if("object"!==s(t)||!t.RTCPeerConnection||"ontrack"in t.RTCPeerConnection.prototype)e.wrapPeerConnectionEvent(t,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._ontrackpoly||(this._ontrackpoly=function(r){r.stream.addEventListener("addtrack",function(n){var i;i=t.RTCPeerConnection.prototype.getReceivers?e.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],e.dispatchEvent(o)}),r.stream.getTracks().forEach(function(n){var i;i=t.RTCPeerConnection.prototype.getReceivers?e.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],e.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}}function p(e){if("object"===s(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});r&&t._senders.splice(t._senders.indexOf(r),1)})}}else if("object"===s(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function d(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,[r,n,i]=arguments;if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return t.apply(this,[function(e){n(s(o(e)))},r])}return new Promise(function(r,n){t.apply(e,[function(e){r(s(o(e)))},n])}).then(n,i)}}}function h(t){if("object"===s(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver){if(!("getStats"in t.RTCRtpSender.prototype)){var r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=r.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t});var n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),t.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(r){return e.filterStats(r,t.track,!0)})}}if(!("getStats"in t.RTCRtpReceiver.prototype)){var i=t.RTCPeerConnection.prototype.getReceivers;i&&(t.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),e.wrapPeerConnectionEvent(t,"track",function(e){return e.receiver._pc=e.srcElement,e}),t.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(r){return e.filterStats(r,t.track,!1)})}}if("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype){var o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){var e,r,n,i=arguments[0];return this.getSenders().forEach(function(t){t.track===i&&(e?n=!0:e=t)}),this.getReceivers().forEach(function(e){return e.track===i&&(r?n=!0:r=e),e.track===i}),n||e&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function f(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var n=this.getSenders();r.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===n.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]}),i.apply(this,arguments)}}function m(t){if(t.RTCPeerConnection){var r=e.detectBrowser(t);if(t.RTCPeerConnection.prototype.addTrack&&r.version>=65)return f(t);var n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(e){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},e.getTracks().forEach(function(e){if(r.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[e.id]){var n=new t.MediaStream(e.getTracks());this._streams[e.id]=n,this._reverseStreams[n.id]=e,e=n}i.apply(this,[e])};var s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},t.RTCPeerConnection.prototype.addTrack=function(e,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection\'s signalingState is \'closed\'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(t){return t===e}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[r.id];if(o)o.addTrack(e),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var s=new t.MediaStream([e]);this._streams[r.id]=s,this._reverseStreams[s.id]=r,this.addStream(s)}return this.getSenders().find(function(t){return t.track===e})},["createOffer","createAnswer"].forEach(function(e){var r=t.RTCPeerConnection.prototype[e],n=o({},e,function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(r){var n=p(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then(function(t){return p(e,t)})});t.RTCPeerConnection.prototype[e]=n[e]});var a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,t=arguments[0],r=t.sdp,Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})),a.apply(this,arguments)):a.apply(this,arguments);var e,t,r};var c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=c.get.apply(this);return""===e.type?e:p(this,e)}}),t.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection\'s signalingState is \'closed\'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(n){r._streams[n].getTracks().find(function(t){return e.track===t})&&(t=r._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function p(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}}function u(t){var r=e.detectBrowser(t);if(!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection){r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var r=t.RTCPeerConnection.prototype[e],n=o({},e,function(){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)});t.RTCPeerConnection.prototype[e]=n[e]});var n=t.RTCPeerConnection.prototype.addIceCandidate;t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?r.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function l(t){e.wrapPeerConnectionEvent(t,"negotiationneeded",function(e){if("stable"===e.target.signalingState)return e})}\n},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],"NZ1C":[function(require,module,exports) {\n"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterIceServers=n;var r=t(require("../utils"));function e(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return e=function(){return r},r}function t(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=e();if(t&&t.has(r))return t.get(r);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var f=u?Object.getOwnPropertyDescriptor(r,i):null;f&&(f.get||f.set)?Object.defineProperty(n,i,f):n[i]=r[i]}return n.default=r,t&&t.set(r,n),n}function n(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var u="string"==typeof t;return u&&(t=[t]),t=t.filter(function(r){if(0===r.indexOf("stun:"))return!1;var e=r.startsWith("turn")&&!r.startsWith("turn:[")&&r.includes("transport=udp");return e&&!n?(n=!0,!0):e&&!n}),delete e.url,e.urls=u?t[0]:t,!!t.length}})}\n},{"../utils":"iSxC"}],"YHvh":[function(require,module,exports) {\n"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(r){return r.trim().split("\\n").map(function(r){return r.trim()})},r.splitSections=function(r){return r.split("\\nm=").map(function(r,e){return(e>0?"m="+r:r).trim()+"\\r\\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(r){return 0===r.indexOf(t)})},r.parseCandidate=function(r){for(var e,t={foundation:(e=0===r.indexOf("a=candidate:")?r.substring(12).split(" "):r.substring(10).split(" "))[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]},n=8;n<e.length;n+=2)switch(e[n]){case"raddr":t.relatedAddress=e[n+1];break;case"rport":t.relatedPort=parseInt(e[n+1],10);break;case"tcptype":t.tcpType=e[n+1];break;case"ufrag":t.ufrag=e[n+1],t.usernameFragment=e[n+1];break;default:t[e[n]]=e[n+1]}return t},r.writeCandidate=function(r){var e=[];e.push(r.foundation),e.push(r.component),e.push(r.protocol.toUpperCase()),e.push(r.priority),e.push(r.address||r.ip),e.push(r.port);var t=r.type;return e.push("typ"),e.push(t),"host"!==t&&r.relatedAddress&&r.relatedPort&&(e.push("raddr"),e.push(r.relatedAddress),e.push("rport"),e.push(r.relatedPort)),r.tcpType&&"tcp"===r.protocol.toLowerCase()&&(e.push("tcptype"),e.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(e.push("ufrag"),e.push(r.usernameFragment||r.ufrag)),"candidate:"+e.join(" ")},r.parseIceOptions=function(r){return r.substr(14).split(" ")},r.parseRtpMap=function(r){var e=r.substr(9).split(" "),t={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),t.name=e[0],t.clockRate=parseInt(e[1],10),t.channels=3===e.length?parseInt(e[2],10):1,t.numChannels=t.channels,t},r.writeRtpMap=function(r){var e=r.payloadType;void 0!==r.preferredPayloadType&&(e=r.preferredPayloadType);var t=r.channels||r.numChannels||1;return"a=rtpmap:"+e+" "+r.name+"/"+r.clockRate+(1!==t?"/"+t:"")+"\\r\\n"},r.parseExtmap=function(r){var e=r.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},r.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&"sendrecv"!==r.direction?"/"+r.direction:"")+" "+r.uri+"\\r\\n"},r.parseFmtp=function(r){for(var e,t={},n=r.substr(r.indexOf(" ")+1).split(";"),a=0;a<n.length;a++)t[(e=n[a].trim().split("="))[0].trim()]=e[1];return t},r.writeFmtp=function(r){var e="",t=r.payloadType;if(void 0!==r.preferredPayloadType&&(t=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var n=[];Object.keys(r.parameters).forEach(function(e){r.parameters[e]?n.push(e+"="+r.parameters[e]):n.push(e)}),e+="a=fmtp:"+t+" "+n.join(";")+"\\r\\n"}return e},r.parseRtcpFb=function(r){var e=r.substr(r.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},r.writeRtcpFb=function(r){var e="",t=r.payloadType;return void 0!==r.preferredPayloadType&&(t=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(r){e+="a=rtcp-fb:"+t+" "+r.type+(r.parameter&&r.parameter.length?" "+r.parameter:"")+"\\r\\n"}),e},r.parseSsrcMedia=function(r){var e=r.indexOf(" "),t={ssrc:parseInt(r.substr(7,e-7),10)},n=r.indexOf(":",e);return n>-1?(t.attribute=r.substr(e+1,n-e-1),t.value=r.substr(n+1)):t.attribute=r.substr(e+1),t},r.parseSsrcGroup=function(r){var e=r.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(function(r){return parseInt(r,10)})}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(r){var e=r.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(r,e){var t="a=setup:"+e+"\\r\\n";return r.fingerprints.forEach(function(r){t+="a=fingerprint:"+r.algorithm+" "+r.value+"\\r\\n"}),t},r.getIceParameters=function(e,t){var n=r.splitLines(e);return{usernameFragment:(n=n.concat(r.splitLines(t))).filter(function(r){return 0===r.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(r){return 0===r.indexOf("a=ice-pwd:")})[0].substr(10)}},r.writeIceParameters=function(r){return"a=ice-ufrag:"+r.usernameFragment+"\\r\\na=ice-pwd:"+r.password+"\\r\\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),a=3;a<n.length;a++){var s=n[a],i=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(i){var p=r.parseRtpMap(i),c=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(p.parameters=c.length?r.parseFmtp(c[0]):{},p.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(p.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(r){return void 0!==r.preferredPayloadType?r.preferredPayloadType:r.payloadType}).join(" ")+"\\r\\n",n+="c=IN IP4 0.0.0.0\\r\\n",n+="a=rtcp:9 IN IP4 0.0.0.0\\r\\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)});var a=0;return t.codecs.forEach(function(r){r.maxptime>a&&(a=r.maxptime)}),a>0&&(n+="a=maxptime:"+a+"\\r\\n"),n+="a=rtcp-mux\\r\\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=r.writeExtmap(e)}),n},r.parseRtpEncodingParameters=function(e){var t,n=[],a=r.parseRtpParameters(e),s=-1!==a.fecMechanisms.indexOf("RED"),i=-1!==a.fecMechanisms.indexOf("ULPFEC"),p=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"cname"===r.attribute}),c=p.length>0&&p[0].ssrc,o=r.matchPrefix(e,"a=ssrc-group:FID").map(function(r){return r.substr(17).split(" ").map(function(r){return parseInt(r,10)})});o.length>0&&o[0].length>1&&o[0][0]===c&&(t=o[0][1]),a.codecs.forEach(function(r){if("RTX"===r.name.toUpperCase()&&r.parameters.apt){var e={ssrc:c,codecPayloadType:parseInt(r.parameters.apt,10)};c&&t&&(e.rtx={ssrc:t}),n.push(e),s&&((e=JSON.parse(JSON.stringify(e))).fec={ssrc:c,mechanism:i?"red+ulpfec":"red"},n.push(e))}}),0===n.length&&c&&n.push({ssrc:c});var u=r.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(r){r.maxBitrate=u})),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"cname"===r.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var a=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=a.length>0,t.compound=0===a.length;var s=r.matchPrefix(e,"a=rtcp-mux");return t.mux=s.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var a=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"msid"===r.attribute});return a.length>0?{stream:(t=a[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),a=r.matchPrefix(e,"a=max-message-size:");a.length>0&&(t=parseInt(a[0].substr(19),10)),isNaN(t)&&(t=65536);var s=r.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var i=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(i[0],10),protocol:i[1],maxMessageSize:t}}},r.writeSctpDescription=function(r,e){var t=[];return t="DTLS/SCTP"!==r.protocol?["m="+r.kind+" 9 "+r.protocol+" "+e.protocol+"\\r\\n","c=IN IP4 0.0.0.0\\r\\n","a=sctp-port:"+e.port+"\\r\\n"]:["m="+r.kind+" 9 "+r.protocol+" "+e.port+"\\r\\n","c=IN IP4 0.0.0.0\\r\\n","a=sctpmap:"+e.port+" "+e.protocol+" 65535\\r\\n"],void 0!==e.maxMessageSize&&t.push("a=max-message-size:"+e.maxMessageSize+"\\r\\n"),t.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var a=void 0!==t?t:2;return"v=0\\r\\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+a+" IN IP4 127.0.0.1\\r\\ns=-\\r\\nt=0 0\\r\\n"},r.writeMediaSection=function(e,t,n,a){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),s+="a=mid:"+e.mid+"\\r\\n",e.direction?s+="a="+e.direction+"\\r\\n":e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\\r\\n":e.rtpSender?s+="a=sendonly\\r\\n":e.rtpReceiver?s+="a=recvonly\\r\\n":s+="a=inactive\\r\\n",e.rtpSender){var i="msid:"+a.id+" "+e.rtpSender.track.id+"\\r\\n";s+="a="+i,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+i,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+i,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\\r\\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\\r\\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\\r\\n"),s},r.getDirection=function(e,t){for(var n=r.splitLines(e),a=0;a<n.length;a++)switch(n[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[a].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(r){return"0"===r.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"==typeof module&&(module.exports=r);\n},{}],"NJ2u":[function(require,module,exports) {\n"use strict";var e=require("sdp");function t(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function r(t,r,n,a,i){var s=e.writeRtpDescription(t.kind,r);if(s+=e.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=e.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),s+="a=mid:"+t.mid+"\\r\\n",t.rtpSender&&t.rtpReceiver?s+="a=sendrecv\\r\\n":t.rtpSender?s+="a=sendonly\\r\\n":t.rtpReceiver?s+="a=recvonly\\r\\n":s+="a=inactive\\r\\n",t.rtpSender){var o=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=o;var c="msid:"+(a?a.id:"-")+" "+o+"\\r\\n";s+="a="+c,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+c,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\\r\\n")}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+"\\r\\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+"\\r\\n"),s}function n(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a="string"==typeof n;return a&&(n=[n]),n=n.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r?(r=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")}),delete e.url,e.urls=a?n[0]:n,!!n.length}})}function a(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},a=function(e,t,r,a){var i=n(e.parameters.apt,r),s=n(t.parameters.apt,a);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach(function(n){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!a(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var a=t.headerExtensions[n];if(e.uri===a.uri){r.headerExtensions.push(a);break}}}),r}function i(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function s(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return r||e.addRemoteCandidate(t),!r}function o(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}module.exports=function(c,d){function p(e,t){t.addTrack(e),t.dispatchEvent(new c.MediaStreamTrackEvent("addtrack",{track:e}))}function l(e,t,r,n){var a=new Event("track");a.track=t,a.receiver=r,a.transceiver={receiver:r},a.streams=n,c.setTimeout(function(){e._dispatchEvent("track",a)})}var f=function(t){var r=this,a=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){r[e]=a[e].bind(a)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",t=JSON.parse(JSON.stringify(t||{})),this.usingBundle="max-bundle"===t.bundlePolicy,"negotiate"===t.rtcpMuxPolicy)throw o("NotSupportedError","rtcpMuxPolicy \'negotiate\' is not supported");switch(t.rtcpMuxPolicy||(t.rtcpMuxPolicy="require"),t.iceTransportPolicy){case"all":case"relay":break;default:t.iceTransportPolicy="all"}switch(t.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:t.bundlePolicy="balanced"}if(t.iceServers=n(t.iceServers||[],d),this._iceGatherers=[],t.iceCandidatePoolSize)for(var i=t.iceCandidatePoolSize;i>0;i--)this._iceGatherers.push(new c.RTCIceGatherer({iceServers:t.iceServers,gatherPolicy:t.iceTransportPolicy}));else t.iceCandidatePoolSize=0;this._config=t,this.transceivers=[],this._sdpSessionId=e.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(f.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(f.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),f.prototype.onicecandidate=null,f.prototype.onaddstream=null,f.prototype.ontrack=null,f.prototype.onremovestream=null,f.prototype.onsignalingstatechange=null,f.prototype.oniceconnectionstatechange=null,f.prototype.onconnectionstatechange=null,f.prototype.onicegatheringstatechange=null,f.prototype.onnegotiationneeded=null,f.prototype.ondatachannel=null,f.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},f.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},f.prototype.getConfiguration=function(){return this._config},f.prototype.getLocalStreams=function(){return this.localStreams},f.prototype.getRemoteStreams=function(){return this.remoteStreams},f.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var a=this._createIceAndDtlsTransports();n.iceTransport=a.iceTransport,n.dtlsTransport=a.dtlsTransport}return t||this.transceivers.push(n),n},f.prototype.addTrack=function(e,t){if(this._isClosed)throw o("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(t){return t.track===e}))throw o("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==e.kind||(r=this.transceivers[n]);return r||(r=this._createTransceiver(e.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(t)&&this.localStreams.push(t),r.track=e,r.stream=t,r.rtpSender=new c.RTCRtpSender(e,r.dtlsTransport),r.rtpSender},f.prototype.addStream=function(e){var t=this;if(d>=15025)e.getTracks().forEach(function(r){t.addTrack(r,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){t.addTrack(e,r)})}},f.prototype.removeTrack=function(e){if(this._isClosed)throw o("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(e instanceof c.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var t=this.transceivers.find(function(t){return t.rtpSender===e});if(!t)throw o("InvalidAccessError","Sender was not created by this connection.");var r=t.stream;t.rtpSender.stop(),t.rtpSender=null,t.track=null,t.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},f.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});r&&t.removeTrack(r)})},f.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},f.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},f.prototype._createIceGatherer=function(e,t){var r=this;if(t&&e>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new c.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[e].bufferedCandidateEvents=[],this.transceivers[e].bufferCandidates=function(t){var a=!t.candidate||0===Object.keys(t.candidate).length;n.state=a?"completed":"gathering",null!==r.transceivers[e].bufferedCandidateEvents&&r.transceivers[e].bufferedCandidateEvents.push(t)},n.addEventListener("localcandidate",this.transceivers[e].bufferCandidates),n},f.prototype._gather=function(t,r){var n=this,a=this.transceivers[r].iceGatherer;if(!a.onlocalcandidate){var i=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,a.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),a.onlocalcandidate=function(i){if(!(n.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var o=i.candidate,c=!o||0===Object.keys(o).length;if(c)"new"!==a.state&&"gathering"!==a.state||(a.state="completed");else{"new"===a.state&&(a.state="gathering"),o.component=1,o.ufrag=a.getLocalParameters().usernameFragment;var d=e.writeCandidate(o);s.candidate=Object.assign(s.candidate,e.parseCandidate(d)),s.candidate.candidate=d,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var p=e.getMediaSections(n._localDescription.sdp);p[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\\r\\n":"a="+s.candidate.candidate+"\\r\\n",n._localDescription.sdp=e.getDescription(n._localDescription.sdp)+p.join("");var l=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),c||n._dispatchEvent("icecandidate",s),l&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},c.setTimeout(function(){i.forEach(function(e){a.onlocalcandidate(e)})},0)}},f.prototype._createIceAndDtlsTransports=function(){var e=this,t=new c.RTCIceTransport(null);t.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()};var r=new c.RTCDtlsTransport(t);return r.ondtlsstatechange=function(){e._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:t,dtlsTransport:r}},f.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},f.prototype._transceive=function(t,r,n){var i=a(t.localCapabilities,t.remoteCapabilities);r&&t.rtpSender&&(i.encodings=t.sendEncodingParameters,i.rtcp={cname:e.localCName,compound:t.rtcpParameters.compound},t.recvEncodingParameters.length&&(i.rtcp.ssrc=t.recvEncodingParameters[0].ssrc),t.rtpSender.send(i)),n&&t.rtpReceiver&&i.codecs.length>0&&("video"===t.kind&&t.recvEncodingParameters&&d<15019&&t.recvEncodingParameters.forEach(function(e){delete e.rtx}),t.recvEncodingParameters.length?i.encodings=t.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:t.rtcpParameters.compound},t.rtcpParameters.cname&&(i.rtcp.cname=t.rtcpParameters.cname),t.sendEncodingParameters.length&&(i.rtcp.ssrc=t.sendEncodingParameters[0].ssrc),t.rtpReceiver.receive(i))},f.prototype.setLocalDescription=function(t){var r,n,s=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(o("TypeError",\'Unsupported type "\'+t.type+\'"\'));if(!i("setLocalDescription",t.type,s.signalingState)||s._isClosed)return Promise.reject(o("InvalidStateError","Can not set local "+t.type+" in state "+s.signalingState));if("offer"===t.type)r=e.splitSections(t.sdp),n=r.shift(),r.forEach(function(t,r){var n=e.parseRtpParameters(t);s.transceivers[r].localCapabilities=n}),s.transceivers.forEach(function(e,t){s._gather(e.mid,t)});else if("answer"===t.type){r=e.splitSections(s._remoteDescription.sdp),n=r.shift();var c=e.matchPrefix(n,"a=ice-lite").length>0;r.forEach(function(t,r){var i=s.transceivers[r],o=i.iceGatherer,d=i.iceTransport,p=i.dtlsTransport,l=i.localCapabilities,f=i.remoteCapabilities;if(!(e.isRejected(t)&&0===e.matchPrefix(t,"a=bundle-only").length)&&!i.rejected){var u=e.getIceParameters(t,n),v=e.getDtlsParameters(t,n);c&&(v.role="server"),s.usingBundle&&0!==r||(s._gather(i.mid,r),"new"===d.state&&d.start(o,u,c?"controlling":"controlled"),"new"===p.state&&p.start(v));var h=a(l,f);s._transceive(i,h.codecs.length>0,!1)}})}return s._localDescription={type:t.type,sdp:t.sdp},"offer"===t.type?s._updateSignalingState("have-local-offer"):s._updateSignalingState("stable"),Promise.resolve()},f.prototype.setRemoteDescription=function(t){var r=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(o("TypeError",\'Unsupported type "\'+t.type+\'"\'));if(!i("setRemoteDescription",t.type,r.signalingState)||r._isClosed)return Promise.reject(o("InvalidStateError","Can not set remote "+t.type+" in state "+r.signalingState));var n={};r.remoteStreams.forEach(function(e){n[e.id]=e});var f=[],u=e.splitSections(t.sdp),v=u.shift(),h=e.matchPrefix(v,"a=ice-lite").length>0,m=e.matchPrefix(v,"a=group:BUNDLE ").length>0;r.usingBundle=m;var g=e.matchPrefix(v,"a=ice-options:")[0];return r.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,u.forEach(function(i,o){var l=e.splitLines(i),u=e.getKind(i),g=e.isRejected(i)&&0===e.matchPrefix(i,"a=bundle-only").length,y=l[0].substr(2).split(" ")[2],S=e.getDirection(i,v),T=e.parseMsid(i),E=e.getMid(i)||e.generateIdentifier();if(g||"application"===u&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))r.transceivers[o]={mid:E,kind:u,protocol:y,rejected:!0};else{var C,P,w,R,_,k,b,x,D;!g&&r.transceivers[o]&&r.transceivers[o].rejected&&(r.transceivers[o]=r._createTransceiver(u,!0));var I,L,M=e.parseRtpParameters(i);g||(I=e.getIceParameters(i,v),(L=e.getDtlsParameters(i,v)).role="client"),b=e.parseRtpEncodingParameters(i);var O=e.parseRtcpParameters(i),G=e.matchPrefix(i,"a=end-of-candidates",v).length>0,j=e.matchPrefix(i,"a=candidate:").map(function(t){return e.parseCandidate(t)}).filter(function(e){return 1===e.component});if(("offer"===t.type||"answer"===t.type)&&!g&&m&&o>0&&r.transceivers[o]&&(r._disposeIceAndDtlsTransports(o),r.transceivers[o].iceGatherer=r.transceivers[0].iceGatherer,r.transceivers[o].iceTransport=r.transceivers[0].iceTransport,r.transceivers[o].dtlsTransport=r.transceivers[0].dtlsTransport,r.transceivers[o].rtpSender&&r.transceivers[o].rtpSender.setTransport(r.transceivers[0].dtlsTransport),r.transceivers[o].rtpReceiver&&r.transceivers[o].rtpReceiver.setTransport(r.transceivers[0].dtlsTransport)),"offer"!==t.type||g){if("answer"===t.type&&!g){P=(C=r.transceivers[o]).iceGatherer,w=C.iceTransport,R=C.dtlsTransport,_=C.rtpReceiver,k=C.sendEncodingParameters,x=C.localCapabilities,r.transceivers[o].recvEncodingParameters=b,r.transceivers[o].remoteCapabilities=M,r.transceivers[o].rtcpParameters=O,j.length&&"new"===w.state&&(!h&&!G||m&&0!==o?j.forEach(function(e){s(C.iceTransport,e)}):w.setRemoteCandidates(j)),m&&0!==o||("new"===w.state&&w.start(P,I,"controlling"),"new"===R.state&&R.start(L)),!a(C.localCapabilities,C.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,r._transceive(C,"sendrecv"===S||"recvonly"===S,"sendrecv"===S||"sendonly"===S),!_||"sendrecv"!==S&&"sendonly"!==S?delete C.rtpReceiver:(D=_.track,T?(n[T.stream]||(n[T.stream]=new c.MediaStream),p(D,n[T.stream]),f.push([D,_,n[T.stream]])):(n.default||(n.default=new c.MediaStream),p(D,n.default),f.push([D,_,n.default])))}}else{(C=r.transceivers[o]||r._createTransceiver(u)).mid=E,C.iceGatherer||(C.iceGatherer=r._createIceGatherer(o,m)),j.length&&"new"===C.iceTransport.state&&(!G||m&&0!==o?j.forEach(function(e){s(C.iceTransport,e)}):C.iceTransport.setRemoteCandidates(j)),x=c.RTCRtpReceiver.getCapabilities(u),d<15019&&(x.codecs=x.codecs.filter(function(e){return"rtx"!==e.name})),k=C.sendEncodingParameters||[{ssrc:1001*(2*o+2)}];var N,A=!1;if("sendrecv"===S||"sendonly"===S){if(A=!C.rtpReceiver,_=C.rtpReceiver||new c.RTCRtpReceiver(C.dtlsTransport,u),A)D=_.track,T&&"-"===T.stream||(T?(n[T.stream]||(n[T.stream]=new c.MediaStream,Object.defineProperty(n[T.stream],"id",{get:function(){return T.stream}})),Object.defineProperty(D,"id",{get:function(){return T.track}}),N=n[T.stream]):(n.default||(n.default=new c.MediaStream),N=n.default)),N&&(p(D,N),C.associatedRemoteMediaStreams.push(N)),f.push([D,_,N])}else C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach(function(e){var t,r,n=e.getTracks().find(function(e){return e.id===C.rtpReceiver.track.id});n&&(t=n,(r=e).removeTrack(t),r.dispatchEvent(new c.MediaStreamTrackEvent("removetrack",{track:t})))}),C.associatedRemoteMediaStreams=[]);C.localCapabilities=x,C.remoteCapabilities=M,C.rtpReceiver=_,C.rtcpParameters=O,C.sendEncodingParameters=k,C.recvEncodingParameters=b,r._transceive(r.transceivers[o],!1,A)}}}),void 0===r._dtlsRole&&(r._dtlsRole="offer"===t.type?"active":"passive"),r._remoteDescription={type:t.type,sdp:t.sdp},"offer"===t.type?r._updateSignalingState("have-remote-offer"):r._updateSignalingState("stable"),Object.keys(n).forEach(function(e){var t=n[e];if(t.getTracks().length){if(-1===r.remoteStreams.indexOf(t)){r.remoteStreams.push(t);var a=new Event("addstream");a.stream=t,c.setTimeout(function(){r._dispatchEvent("addstream",a)})}f.forEach(function(e){var n=e[0],a=e[1];t.id===e[2].id&&l(r,n,a,[t])})}}),f.forEach(function(e){e[2]||l(r,e[0],e[1],[])}),c.setTimeout(function(){r&&r.transceivers&&r.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},f.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},f.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},f.prototype._maybeFireNegotiationNeeded=function(){var e=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,c.setTimeout(function(){if(e.needNegotiation){e.needNegotiation=!1;var t=new Event("negotiationneeded");e._dispatchEvent("negotiationneeded",t)}},0))},f.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},f.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},f.prototype.createOffer=function(){var t=this;if(t._isClosed)return Promise.reject(o("InvalidStateError","Can not call createOffer after close"));var n=t.transceivers.filter(function(e){return"audio"===e.kind}).length,a=t.transceivers.filter(function(e){return"video"===e.kind}).length,i=arguments[0];if(i){if(i.mandatory||i.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==i.offerToReceiveAudio&&(n=!0===i.offerToReceiveAudio?1:!1===i.offerToReceiveAudio?0:i.offerToReceiveAudio),void 0!==i.offerToReceiveVideo&&(a=!0===i.offerToReceiveVideo?1:!1===i.offerToReceiveVideo?0:i.offerToReceiveVideo)}for(t.transceivers.forEach(function(e){"audio"===e.kind?--n<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)});n>0||a>0;)n>0&&(t._createTransceiver("audio"),n--),a>0&&(t._createTransceiver("video"),a--);var s=e.writeSessionBoilerplate(t._sdpSessionId,t._sdpSessionVersion++);t.transceivers.forEach(function(r,n){var a=r.track,i=r.kind,s=r.mid||e.generateIdentifier();r.mid=s,r.iceGatherer||(r.iceGatherer=t._createIceGatherer(n,t.usingBundle));var o=c.RTCRtpSender.getCapabilities(i);d<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),o.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),o.headerExtensions.forEach(function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var p=r.sendEncodingParameters||[{ssrc:1001*(2*n+1)}];a&&d>=15019&&"video"===i&&!p[0].rtx&&(p[0].rtx={ssrc:p[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new c.RTCRtpReceiver(r.dtlsTransport,i)),r.localCapabilities=o,r.sendEncodingParameters=p}),"max-compat"!==t._config.bundlePolicy&&(s+="a=group:BUNDLE "+t.transceivers.map(function(e){return e.mid}).join(" ")+"\\r\\n"),s+="a=ice-options:trickle\\r\\n",t.transceivers.forEach(function(n,a){s+=r(n,n.localCapabilities,"offer",n.stream,t._dtlsRole),s+="a=rtcp-rsize\\r\\n",!n.iceGatherer||"new"===t.iceGatheringState||0!==a&&t.usingBundle||(n.iceGatherer.getLocalCandidates().forEach(function(t){t.component=1,s+="a="+e.writeCandidate(t)+"\\r\\n"}),"completed"===n.iceGatherer.state&&(s+="a=end-of-candidates\\r\\n"))});var p=new c.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(p)},f.prototype.createAnswer=function(){var t=this;if(t._isClosed)return Promise.reject(o("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==t.signalingState&&"have-local-pranswer"!==t.signalingState)return Promise.reject(o("InvalidStateError","Can not call createAnswer in signalingState "+t.signalingState));var n=e.writeSessionBoilerplate(t._sdpSessionId,t._sdpSessionVersion++);t.usingBundle&&(n+="a=group:BUNDLE "+t.transceivers.map(function(e){return e.mid}).join(" ")+"\\r\\n"),n+="a=ice-options:trickle\\r\\n";var i=e.getMediaSections(t._remoteDescription.sdp).length;t.transceivers.forEach(function(e,s){if(!(s+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?n+="m=application 0 DTLS/SCTP 5000\\r\\n":n+="m=application 0 "+e.protocol+" webrtc-datachannel\\r\\n":"audio"===e.kind?n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\na=rtpmap:0 PCMU/8000\\r\\n":"video"===e.kind&&(n+="m=video 0 UDP/TLS/RTP/SAVPF 120\\r\\na=rtpmap:120 VP8/90000\\r\\n"),void(n+="c=IN IP4 0.0.0.0\\r\\na=inactive\\r\\na=mid:"+e.mid+"\\r\\n");var o;if(e.stream)"audio"===e.kind?o=e.stream.getAudioTracks()[0]:"video"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&d>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var c=a(e.localCapabilities,e.remoteCapabilities);!c.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=r(e,c,"answer",e.stream,t._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\\r\\n")}});var s=new c.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(s)},f.prototype.addIceCandidate=function(t){var r,n=this;return t&&void 0===t.sdpMLineIndex&&!t.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(a,i){if(!n._remoteDescription)return i(o("InvalidStateError","Can not add ICE candidate without a remote description"));if(t&&""!==t.candidate){var c=t.sdpMLineIndex;if(t.sdpMid)for(var d=0;d<n.transceivers.length;d++)if(n.transceivers[d].mid===t.sdpMid){c=d;break}var p=n.transceivers[c];if(!p)return i(o("OperationError","Can not add ICE candidate"));if(p.rejected)return a();var l=Object.keys(t.candidate).length>0?e.parseCandidate(t.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return a();if(l.component&&1!==l.component)return a();if((0===c||c>0&&p.iceTransport!==n.transceivers[0].iceTransport)&&!s(p.iceTransport,l))return i(o("OperationError","Can not add ICE candidate"));var f=t.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(r=e.getMediaSections(n._remoteDescription.sdp))[c]+="a="+(l.type?f:"end-of-candidates")+"\\r\\n",n._remoteDescription.sdp=e.getDescription(n._remoteDescription.sdp)+r.join("")}else for(var u=0;u<n.transceivers.length&&(n.transceivers[u].rejected||(n.transceivers[u].iceTransport.addRemoteCandidate({}),(r=e.getMediaSections(n._remoteDescription.sdp))[u]+="a=end-of-candidates\\r\\n",n._remoteDescription.sdp=e.getDescription(n._remoteDescription.sdp)+r.join(""),!n.usingBundle));u++);a()})},f.prototype.getStats=function(e){if(e&&e instanceof c.MediaStreamTrack){var t=null;if(this.transceivers.forEach(function(r){r.rtpSender&&r.rtpSender.track===e?t=r.rtpSender:r.rtpReceiver&&r.rtpReceiver.track===e&&(t=r.rtpReceiver)}),!t)throw o("InvalidAccessError","Invalid selector.");return t.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var r=c[e];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then(function(e){var r=new Map;return Object.keys(e).forEach(function(n){e[n].type=t(e[n]),r.set(n,e[n])}),r})}}});var u=["createOffer","createAnswer"];return u.forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(u=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),f};\n},{"sdp":"YHvh"}],"YdKx":[function(require,module,exports) {\n"use strict";function e(e){var r=e&&e.navigator,t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return t(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=e;\n},{}],"P3bV":[function(require,module,exports) {\n"use strict";function e(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;\n},{}],"XRic":[function(require,module,exports) {\n"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimPeerConnection=a,exports.shimReplaceTrack=p,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}});var e=s(require("../utils")),t=require("./filtericeservers"),r=o(require("rtcpeerconnection-shim")),n=require("./getusermedia"),i=require("./getdisplaymedia");function o(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function a(n){var i=e.detectBrowser(n);if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(e){return e}),n.RTCSessionDescription||(n.RTCSessionDescription=function(e){return e}),i.version<15025)){var o=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set:function(e){o.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!n.RTCRtpSender||"dtmf"in n.RTCRtpSender.prototype||Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new n.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);var c=(0,r.default)(n,i.version);n.RTCPeerConnection=function(r){return r&&r.iceServers&&(r.iceServers=(0,t.filterIceServers)(r.iceServers,i.version),e.log("ICE servers after filtering:",r.iceServers)),new c(r)},n.RTCPeerConnection.prototype=c.prototype}function p(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}\n},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],"GzSv":[function(require,module,exports) {\n"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=n;var e=o(require("../utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=t();if(o&&o.has(e))return o.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,o&&o.set(e,r),r}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){var o=e.detectBrowser(t),n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(t,o,r){e.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(t).then(o,r)},!(o.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,o){t in e&&!(o in e)&&(e[o]=e[t],delete e[t])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===r(e)&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},i&&i.prototype.getSettings){var p=i.prototype.getSettings;i.prototype.getSettings=function(){var e=p.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===r(e)&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}}\n},{"../utils":"iSxC"}],"UuGU":[function(require,module,exports) {\n"use strict";function e(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(a){if(!a||!a.video){var t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,Promise.reject(t)}return!0===a.video?a.video={mediaSource:i}:a.video.mediaSource=i,e.navigator.mediaDevices.getUserMedia(a)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;\n},{}],"Fzdr":[function(require,module,exports) {\n"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimOnTrack=c,exports.shimPeerConnection=s,exports.shimSenderGetStats=p,exports.shimReceiverGetStats=u,exports.shimRemoveStream=f,exports.shimRTCDataChannel=C,exports.shimAddTransceiver=d,exports.shimCreateOffer=y,exports.shimCreateAnswer=l,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return t.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}});var e=o(require("../utils")),t=require("./getusermedia"),r=require("./getdisplaymedia");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){"object"===a(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function s(t){var r=e.detectBrowser(t);if("object"===a(t)&&(t.RTCPeerConnection||t.mozRTCPeerConnection)){if(!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var r=t.RTCPeerConnection.prototype[e],n=i({},e,function(){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)});t.RTCPeerConnection.prototype[e]=n[e]}),r.version<68){var n=t.RTCPeerConnection.prototype.addIceCandidate;t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){var[e,t,n]=arguments;return c.apply(this,[e||null]).then(function(e){if(r.version<53&&!t)try{e.forEach(function(e){e.type=o[e.type]||e.type})}catch(n){if("TypeError"!==n.name)throw n;e.forEach(function(t,r){e.set(r,Object.assign({},t,{type:o[t.type]||t.type}))})}return e}).then(t,n)}}}function p(e){if("object"===a(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e}),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function u(t){if("object"===a(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&!(t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)){var r=t.RTCPeerConnection.prototype.getReceivers;r&&(t.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),e.wrapPeerConnectionEvent(t,"track",function(e){return e.receiver._pc=e.srcElement,e}),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function f(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var r=this;e.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(e){e.track&&t.getTracks().includes(e.track)&&r.removeTrack(e)})})}function C(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function d(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],r=e&&"sendEncodings"in e;r&&e.sendEncodings.forEach(function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var n=t.apply(this,arguments);if(r){var{sender:o}=n,i=o.getParameters();"encodings"in i||(i.encodings=e.sendEncodings,this.setParametersPromises.push(o.setParameters(i).catch(function(){})))}return n})}}function y(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,r=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(r,e)}).finally(function(){r.setParametersPromises=[]}):t.apply(this,arguments)}}}function l(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,r=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(r,e)}).finally(function(){r.setParametersPromises=[]}):t.apply(this,arguments)}}}\n},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],"t1lL":[function(require,module,exports) {\n"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimLocalStreamsAPI=n,exports.shimRemoteStreamsAPI=i,exports.shimCallbacksAPI=a,exports.shimGetUserMedia=s,exports.shimConstraints=c,exports.shimRTCIceServerUrls=d,exports.shimTrackEventTransceiver=f,exports.shimCreateOfferLegacy=p;var e=r(require("../utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){if("object"===o(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(function(o){return t.call(r,o,e)}),e.getVideoTracks().forEach(function(o){return t.call(r,o,e)})},e.RTCPeerConnection.prototype.addTrack=function(e){var r=arguments[1];return r&&(this._localStreams?this._localStreams.includes(r)||this._localStreams.push(r):this._localStreams=[r]),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var o=e.getTracks();this.getSenders().forEach(function(e){o.includes(e.track)&&t.removeTrack(e)})}})}}function i(e){if("object"===o(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}})}),t.apply(e,arguments)}}}function a(e){if("object"===o(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var o=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[o]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o};var c=function(e,t,r){var o=i.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o};t.setLocalDescription=c,c=function(e,t,r){var o=a.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.setRemoteDescription=c,c=function(e,t,r){var o=s.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.addIceCandidate=c}}function s(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,o=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return o(c(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,o){t.mediaDevices.getUserMedia(e).then(r,o)}.bind(t))}function c(t){return t&&void 0!==t.video?Object.assign({},t,{video:e.compactObject(t.video)}):t}function d(t){var r=t.RTCPeerConnection;t.RTCPeerConnection=function(t,o){if(t&&t.iceServers){for(var n=[],i=0;i<t.iceServers.length;i++){var a=t.iceServers[i];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(e.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,n.push(a)):n.push(t.iceServers[i])}t.iceServers=n}return new r(t,o)},t.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in t.RTCPeerConnection&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}function f(e){"object"===o(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function p(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var o=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&o?"sendrecv"===o.direction?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":"recvonly"===o.direction&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):!0!==e.offerToReceiveVideo||o||this.addTransceiver("video")}return t.apply(this,arguments)}}\n},{"../utils":"iSxC"}],"GOQK":[function(require,module,exports) {\n"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimRTCIceCandidate=a,exports.shimMaxMessageSize=c,exports.shimSendThrowTypeError=s,exports.shimConnectionState=p,exports.removeAllowExtmapMixed=u;var e=r(require("sdp")),t=o(require("./utils"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(n){if(n.RTCIceCandidate&&!(n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)){var o=n.RTCIceCandidate;n.RTCIceCandidate=function(t){if("object"===i(t)&&t.candidate&&0===t.candidate.indexOf("a=")&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){var n=new o(t),r=e.default.parseCandidate(t.candidate),a=Object.assign(n,r);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new o(t)},n.RTCIceCandidate.prototype=o.prototype,t.wrapPeerConnectionEvent(n,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new n.RTCIceCandidate(e.candidate),writable:"false"}),e})}}function c(n){if(n.RTCPeerConnection){var o=t.detectBrowser(n);"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===o.browser&&o.version>=76){var{sdpSemantics:t}=this.getConfiguration();"plan-b"===t&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(t){if(!t||!t.sdp)return!1;var n=e.default.splitSections(t.sdp);return n.shift(),n.some(function(t){var n=e.default.parseMLine(t);return n&&"application"===n.kind&&-1!==n.protocol.indexOf("SCTP")})}(arguments[0])){var n,i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),a=(p=i,u=65536,"firefox"===o.browser&&(u=o.version<57?-1===p?16384:2147483637:o.version<60?57===o.version?65535:65536:2147483637),u),c=function(t,n){var r=65536;"firefox"===o.browser&&57===o.version&&(r=65535);var i=e.default.matchPrefix(t.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===o.browser&&-1!==n&&(r=2147483637),r}(arguments[0],i);n=0===a&&0===c?Number.POSITIVE_INFINITY:0===a||0===c?Math.max(a,c):Math.min(a,c);var s={};Object.defineProperty(s,"maxMessageSize",{get:function(){return n}}),this._sctp=s}var p,u;return r.apply(this,arguments)}}}function s(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=n.apply(this,arguments);return o(e,this),e},t.wrapPeerConnectionEvent(e,"datachannel",function(e){return o(e.channel,e.target),e})}function o(e,t){var n=e.send;e.send=function(){var o=arguments[0],r=o.length||o.size||o.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function p(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}}function u(e){if(e.RTCPeerConnection){var n=t.detectBrowser(e);if(!("chrome"===n.browser&&n.version>=71)){var o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\\n")),o.apply(this,arguments)}}}}\n},{"sdp":"YHvh","./utils":"iSxC"}],"KtlG":[function(require,module,exports) {\n"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.adapterFactory=m;var e=o(require("./utils")),r=o(require("./chrome/chrome_shim")),i=o(require("./edge/edge_shim")),s=o(require("./firefox/firefox_shim")),t=o(require("./safari/safari_shim")),a=o(require("./common_shim"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=s?Object.getOwnPropertyDescriptor(e,t):null;a&&(a.get||a.set)?Object.defineProperty(i,t,a):i[t]=e[t]}return i.default=e,r&&r.set(e,i),i}function m(){var{window:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},m=e.log,h=e.detectBrowser(n),d={browserDetails:h,commonShim:a,extractVersion:e.extractVersion,disableLog:e.disableLog,disableWarnings:e.disableWarnings};switch(h.browser){case"chrome":if(!r||!r.shimPeerConnection||!o.shimChrome)return m("Chrome shim is not included in this adapter release."),d;m("adapter.js shimming chrome."),d.browserShim=r,r.shimGetUserMedia(n),r.shimMediaStream(n),r.shimPeerConnection(n),r.shimOnTrack(n),r.shimAddTrackRemoveTrack(n),r.shimGetSendersWithDtmf(n),r.shimGetStats(n),r.shimSenderReceiverGetStats(n),r.fixNegotiationNeeded(n),a.shimRTCIceCandidate(n),a.shimConnectionState(n),a.shimMaxMessageSize(n),a.shimSendThrowTypeError(n),a.removeAllowExtmapMixed(n);break;case"firefox":if(!s||!s.shimPeerConnection||!o.shimFirefox)return m("Firefox shim is not included in this adapter release."),d;m("adapter.js shimming firefox."),d.browserShim=s,s.shimGetUserMedia(n),s.shimPeerConnection(n),s.shimOnTrack(n),s.shimRemoveStream(n),s.shimSenderGetStats(n),s.shimReceiverGetStats(n),s.shimRTCDataChannel(n),s.shimAddTransceiver(n),s.shimCreateOffer(n),s.shimCreateAnswer(n),a.shimRTCIceCandidate(n),a.shimConnectionState(n),a.shimMaxMessageSize(n),a.shimSendThrowTypeError(n);break;case"edge":if(!i||!i.shimPeerConnection||!o.shimEdge)return m("MS edge shim is not included in this adapter release."),d;m("adapter.js shimming edge."),d.browserShim=i,i.shimGetUserMedia(n),i.shimGetDisplayMedia(n),i.shimPeerConnection(n),i.shimReplaceTrack(n),a.shimMaxMessageSize(n),a.shimSendThrowTypeError(n);break;case"safari":if(!t||!o.shimSafari)return m("Safari shim is not included in this adapter release."),d;m("adapter.js shimming safari."),d.browserShim=t,t.shimRTCIceServerUrls(n),t.shimCreateOfferLegacy(n),t.shimCallbacksAPI(n),t.shimLocalStreamsAPI(n),t.shimRemoteStreamsAPI(n),t.shimTrackEventTransceiver(n),t.shimGetUserMedia(n),a.shimRTCIceCandidate(n),a.shimMaxMessageSize(n),a.shimSendThrowTypeError(n),a.removeAllowExtmapMixed(n);break;default:m("Unsupported browser!")}return d}\n},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],"tI1X":[function(require,module,exports) {\n"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./adapter_factory.js"),r=(0,e.adapterFactory)({window:window}),t=r;exports.default=t;\n},{"./adapter_factory.js":"KtlG"}],"sXtV":[function(require,module,exports) {\n"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("webrtc-adapter"));exports.webRTCAdapter=t.default;\n},{"webrtc-adapter":"tI1X"}],"I31f":[function(require,module,exports) {\n"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./adapter");exports.Supports=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},e.prototype.isBrowserSupported=function(){var r=this.getBrowser(),e=this.getVersion();return!!this.supportedBrowsers.includes(r)&&("chrome"===r?e>=this.minChromeVersion:"firefox"===r?e>=this.minFirefoxVersion:"safari"===r&&(!this.isIOS&&e>=this.minSafariVersion))},e.prototype.getBrowser=function(){return r.webRTCAdapter.browserDetails.browser},e.prototype.getVersion=function(){return r.webRTCAdapter.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var e,i=this.getBrowser(),t=r.webRTCAdapter.browserDetails.version||0;if("chrome"===i&&t<72)return!1;if("firefox"===i&&t>=59)return!0;if(!(window.RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype))return!1;var o=!1;try{(e=new RTCPeerConnection).addTransceiver("audio"),o=!0}catch(n){}finally{e&&e.close()}return o},e.prototype.toString=function(){return"Supports: \\n    browser:"+this.getBrowser()+" \\n    version:"+this.getVersion()+" \\n    isIOS:"+this.isIOS+" \\n    isWebRTCSupported:"+this.isWebRTCSupported()+" \\n    isBrowserSupported:"+this.isBrowserSupported()+" \\n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},e}());\n},{"./adapter":"sXtV"}],"BHXf":[function(require,module,exports) {\n"use strict";var r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)Object.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t.default=r,t};Object.defineProperty(exports,"__esModule",{value:!0});var t=r(require("peerjs-js-binarypack")),e=require("./supports"),o={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};exports.util=new(function(){function r(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=o,this.browser=e.Supports.getBrowser(),this.browserVersion=e.Supports.getVersion(),this.supports=function(){var r,t={browser:e.Supports.isBrowserSupported(),webRTC:e.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{r=new RTCPeerConnection(o),t.audioVideo=!0;var n=void 0;try{n=r.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!n.ordered;try{n.binaryType="blob",t.binaryBlob=!e.Supports.isIOS}catch(a){}}catch(a){}finally{n&&n.close()}}catch(a){}finally{r&&r.close()}return t}(),this.pack=t.pack,this.unpack=t.unpack,this._dataCount=1}return r.prototype.noop=function(){},r.prototype.validateId=function(r){return!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r)},r.prototype.chunk=function(r){for(var t=[],e=r.size,o=Math.ceil(e/exports.util.chunkedMTU),n=0,a=0;a<e;){var i=Math.min(e,a+exports.util.chunkedMTU),s=r.slice(a,i),u={__peerData:this._dataCount,n:n,data:s,total:o};t.push(u),a=i,n++}return this._dataCount++,t},r.prototype.blobToArrayBuffer=function(r,t){var e=new FileReader;return e.onload=function(r){r.target&&t(r.target.result)},e.readAsArrayBuffer(r),e},r.prototype.binaryStringToArrayBuffer=function(r){for(var t=new Uint8Array(r.length),e=0;e<r.length;e++)t[e]=255&r.charCodeAt(e);return t.buffer},r.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},r.prototype.isSecure=function(){return"https:"===location.protocol},r}());\n},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],"JJlS":[function(require,module,exports) {\n"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,n,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||e,i),f=t?t+n:n;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],c]:e._events[f].push(c):(e._events[f]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),i.prototype.eventNames=function(){var n,r,o=[];if(0===this._eventsCount)return o;for(r in n=this._events)e.call(n,r)&&o.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},i.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,n,r,o,s,i){var c=t?t+e:e;if(!this._events[c])return!1;var f,u,a=this._events[c],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,o),!0;case 5:return a.fn.call(a.context,n,r,o,s),!0;case 6:return a.fn.call(a.context,n,r,o,s,i),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];a.fn.apply(a.context,f)}else{var v,h=a.length;for(u=0;u<h;u++)switch(a[u].once&&this.removeListener(e,a[u].fn,void 0,!0),l){case 1:a[u].fn.call(a[u].context);break;case 2:a[u].fn.call(a[u].context,n);break;case 3:a[u].fn.call(a[u].context,n,r);break;case 4:a[u].fn.call(a[u].context,n,r,o);break;default:if(!f)for(v=1,f=new Array(l-1);v<l;v++)f[v-1]=arguments[v];a[u].fn.apply(a[u].context,f)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,n,r,o){var i=t?t+e:e;if(!this._events[i])return this;if(!n)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==n||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,u=[],a=c.length;f<a;f++)(c[f].fn!==n||o&&!c[f].once||r&&c[f].context!==r)&&u.push(c[f]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var r;return e?(r=t?t+e:e,this._events[r]&&s(this,r)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);\n},{}],"WOs9":[function(require,module,exports) {\n"use strict";var r=this&&this.__read||function(r,e){var o="function"==typeof Symbol&&r[Symbol.iterator];if(!o)return r;var t,n,l=o.call(r),i=[];try{for(;(void 0===e||e-- >0)&&!(t=l.next()).done;)i.push(t.value)}catch(s){n={error:s}}finally{try{t&&!t.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return i},e=this&&this.__spread||function(){for(var e=[],o=0;o<arguments.length;o++)e=e.concat(r(arguments[o]));return e};Object.defineProperty(exports,"__esModule",{value:!0});var o,t="PeerJS: ";!function(r){r[r.Disabled=0]="Disabled",r[r.Errors=1]="Errors",r[r.Warnings=2]="Warnings",r[r.All=3]="All"}(o=exports.LogLevel||(exports.LogLevel={}));var n=function(){function r(){this._logLevel=o.Disabled}return Object.defineProperty(r.prototype,"logLevel",{get:function(){return this._logLevel},set:function(r){this._logLevel=r},enumerable:!0,configurable:!0}),r.prototype.log=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this._logLevel>=o.All&&this._print.apply(this,e([o.All],r))},r.prototype.warn=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this._logLevel>=o.Warnings&&this._print.apply(this,e([o.Warnings],r))},r.prototype.error=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this._logLevel>=o.Errors&&this._print.apply(this,e([o.Errors],r))},r.prototype.setLogFunction=function(r){this._print=r},r.prototype._print=function(r){for(var n=[],l=1;l<arguments.length;l++)n[l-1]=arguments[l];var i=e([t],n);for(var s in i)i[s]instanceof Error&&(i[s]="("+i[s].name+") "+i[s].message);r>=o.All?console.log.apply(console,e(i)):r>=o.Warnings?console.warn.apply(console,e(["WARNING"],i)):r>=o.Errors&&console.error.apply(console,e(["ERROR"],i))},r}();exports.default=new n;\n},{}],"ZRYf":[function(require,module,exports) {\n"use strict";var e,r,n,o,t,a,i;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e.Open="open",e.Stream="stream",e.Data="data",e.Close="close",e.Error="error",e.IceStateChanged="iceStateChanged"}(e=exports.ConnectionEventType||(exports.ConnectionEventType={})),function(e){e.Data="data",e.Media="media"}(r=exports.ConnectionType||(exports.ConnectionType={})),function(e){e.Open="open",e.Close="close",e.Connection="connection",e.Call="call",e.Disconnected="disconnected",e.Error="error"}(n=exports.PeerEventType||(exports.PeerEventType={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(o=exports.PeerErrorType||(exports.PeerErrorType={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"}(t=exports.SerializationType||(exports.SerializationType={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(a=exports.SocketEventType||(exports.SocketEventType={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"}(i=exports.ServerMessageType||(exports.ServerMessageType={}));\n},{}],"wJlv":[function(require,module,exports) {\n"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),t=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var s,o,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(c){o={error:c}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},n=this&&this.__spread||function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(t(arguments[n]));return e},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("eventemitter3"),i=o(require("./logger")),c=require("./enums"),a=function(t){function o(e,n,s,o,r,i){void 0===i&&(i=5e3);var c=t.call(this)||this;c.pingInterval=i,c._disconnected=!0,c._messagesQueue=[];var a=e?"wss://":"ws://";return c._baseUrl=a+n+":"+s+o+"peerjs?key="+r,c}return e(o,t),o.prototype.start=function(e,t){var n=this;this._id=e;var s=this._baseUrl+"&id="+e+"&token="+t;!this._socket&&this._disconnected&&(this._socket=new WebSocket(s),this._disconnected=!1,this._socket.onmessage=function(e){var t;try{t=JSON.parse(e.data),i.default.log("Server message received:",t)}catch(s){return void i.default.log("Invalid server message",e.data)}n.emit(c.SocketEventType.Message,t)},this._socket.onclose=function(e){n._disconnected||(i.default.log("Socket closed.",e),n._cleanup(),n._disconnected=!0,n.emit(c.SocketEventType.Disconnected))},this._socket.onopen=function(){n._disconnected||(n._sendQueuedMessages(),i.default.log("Socket open"),n._scheduleHeartbeat())})},o.prototype._scheduleHeartbeat=function(){var e=this;this._wsPingTimer=setTimeout(function(){e._sendHeartbeat()},this.pingInterval)},o.prototype._sendHeartbeat=function(){if(this._wsOpen()){var e=JSON.stringify({type:c.ServerMessageType.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}else i.default.log("Cannot send heartbeat, because socket closed")},o.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},o.prototype._sendQueuedMessages=function(){var e,t,o=n(this._messagesQueue);this._messagesQueue=[];try{for(var r=s(o),i=r.next();!i.done;i=r.next()){var c=i.value;this.send(c)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},o.prototype.send=function(e){if(!this._disconnected)if(this._id)if(e.type){if(this._wsOpen()){var t=JSON.stringify(e);this._socket.send(t)}}else this.emit(c.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(e)},o.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},o.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},o}(r.EventEmitter);exports.Socket=a;\n},{"eventemitter3":"JJlS","./logger":"WOs9","./enums":"ZRYf"}],"HCdX":[function(require,module,exports) {\n"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(i,r){function c(e){try{s(o.next(e))}catch(n){r(n)}}function a(e){try{s(o.throw(e))}catch(n){r(n)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(c,a)}s((o=o.apply(e,n||[])).next())})},t=this&&this.__generator||function(e,n){var t,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=n.call(e,c)}catch(a){r=[6,a],o=0}finally{t=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./util"),r=o(require("./logger")),c=require("./enums"),a=function(){function o(e){this.connection=e}return o.prototype.startConnection=function(e){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===c.ConnectionType.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){if(this.connection.type===c.ConnectionType.Data){var t=this.connection,o={ordered:!!e.reliable},i=n.createDataChannel(t.label,o);t.initialize(i)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},o.prototype._startPeerConnection=function(){r.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},o.prototype._setupListeners=function(e){var n=this,t=this.connection.peer,o=this.connection.connectionId,a=this.connection.type,s=this.connection.provider;r.default.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&e.candidate.candidate&&(r.default.log("Received ICE candidates for "+t+":",e.candidate),s.socket.send({type:c.ServerMessageType.Candidate,payload:{candidate:e.candidate,type:a,connectionId:o},dst:t}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":r.default.log("iceConnectionState is failed, closing connections to "+t),n.connection.emit(c.ConnectionEventType.Error,new Error("Negotiation of connection to "+t+" failed.")),n.connection.close();break;case"closed":r.default.log("iceConnectionState is closed, closing connections to "+t),n.connection.emit(c.ConnectionEventType.Error,new Error("Connection to "+t+" closed.")),n.connection.close();break;case"disconnected":r.default.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=i.util.noop}n.connection.emit(c.ConnectionEventType.IceStateChanged,e.iceConnectionState)},r.default.log("Listening for data channel"),e.ondatachannel=function(e){r.default.log("Received data channel");var n=e.channel;s.getConnection(t,o).initialize(n)},r.default.log("Listening for remote stream"),e.ontrack=function(e){r.default.log("Received remote stream");var i=e.streams[0],a=s.getConnection(t,o);if(a.type===c.ConnectionType.Media){var d=a;n._addStreamToMediaConnection(i,d)}}},o.prototype.cleanup=function(){r.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var n="closed"!==e.signalingState,t=!1;if(this.connection.type===c.ConnectionType.Data){var o=this.connection.dataChannel;o&&(t=!!o.readyState&&"closed"!==o.readyState)}(n||t)&&e.close()}},o.prototype._makeOffer=function(){return n(this,void 0,Promise,function(){var n,o,a,s,d,l,u;return t(this,function(t){switch(t.label){case 0:n=this.connection.peerConnection,o=this.connection.provider,t.label=1;case 1:return t.trys.push([1,7,,8]),[4,n.createOffer(this.connection.options.constraints)];case 2:a=t.sent(),r.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(a.sdp=this.connection.options.sdpTransform(a.sdp)||a.sdp),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,n.setLocalDescription(a)];case 4:return t.sent(),r.default.log("Set localDescription:",a,"for:"+this.connection.peer),s={sdp:a,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:i.util.browser},this.connection.type===c.ConnectionType.Data&&(d=this.connection,s=e(e({},s),{label:d.label,reliable:d.reliable,serialization:d.serialization})),o.socket.send({type:c.ServerMessageType.Offer,payload:s,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(l=t.sent())&&(o.emitError(c.PeerErrorType.WebRTC,l),r.default.log("Failed to setLocalDescription, ",l)),[3,6];case 6:return[3,8];case 7:return u=t.sent(),o.emitError(c.PeerErrorType.WebRTC,u),r.default.log("Failed to createOffer, ",u),[3,8];case 8:return[2]}})})},o.prototype._makeAnswer=function(){return n(this,void 0,Promise,function(){var e,n,o,a,s;return t(this,function(t){switch(t.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,t.label=1;case 1:return t.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:o=t.sent(),r.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(o.sdp=this.connection.options.sdpTransform(o.sdp)||o.sdp),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,e.setLocalDescription(o)];case 4:return t.sent(),r.default.log("Set localDescription:",o,"for:"+this.connection.peer),n.socket.send({type:c.ServerMessageType.Answer,payload:{sdp:o,type:this.connection.type,connectionId:this.connection.connectionId,browser:i.util.browser},dst:this.connection.peer}),[3,6];case 5:return a=t.sent(),n.emitError(c.PeerErrorType.WebRTC,a),r.default.log("Failed to setLocalDescription, ",a),[3,6];case 6:return[3,8];case 7:return s=t.sent(),n.emitError(c.PeerErrorType.WebRTC,s),r.default.log("Failed to create answer, ",s),[3,8];case 8:return[2]}})})},o.prototype.handleSDP=function(e,o){return n(this,void 0,Promise,function(){var n,i,a,s;return t(this,function(t){switch(t.label){case 0:o=new RTCSessionDescription(o),n=this.connection.peerConnection,i=this.connection.provider,r.default.log("Setting remote description",o),a=this,t.label=1;case 1:return t.trys.push([1,5,,6]),[4,n.setRemoteDescription(o)];case 2:return t.sent(),r.default.log("Set remoteDescription:"+e+" for:"+this.connection.peer),"OFFER"!==e?[3,4]:[4,a._makeAnswer()];case 3:t.sent(),t.label=4;case 4:return[3,6];case 5:return s=t.sent(),i.emitError(c.PeerErrorType.WebRTC,s),r.default.log("Failed to setRemoteDescription, ",s),[3,6];case 6:return[2]}})})},o.prototype.handleCandidate=function(e){return n(this,void 0,Promise,function(){var n,o,i,a,s,d;return t(this,function(t){switch(t.label){case 0:r.default.log("handleCandidate:",e),n=e.candidate,o=e.sdpMLineIndex,i=e.sdpMid,a=this.connection.peerConnection,s=this.connection.provider,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:o,candidate:n}))];case 2:return t.sent(),r.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return d=t.sent(),s.emitError(c.PeerErrorType.WebRTC,d),r.default.log("Failed to handleCandidate, ",d),[3,4];case 4:return[2]}})})},o.prototype._addTracksToConnection=function(e,n){if(r.default.log("add tracks from stream "+e.id+" to peer connection"),!n.addTrack)return r.default.error("Your browser does\'t support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(t){n.addTrack(t,e)})},o.prototype._addStreamToMediaConnection=function(e,n){r.default.log("add stream "+e.id+" to media connection "+n.connectionId),n.addStream(e)},o}();exports.Negotiator=a;\n},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],"tQFK":[function(require,module,exports) {\n"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("eventemitter3"),r=function(e){function r(t,r,n){var o=e.call(this)||this;return o.peer=t,o.provider=r,o.options=n,o._open=!1,o.metadata=n.metadata,o}return t(r,e),Object.defineProperty(r.prototype,"open",{get:function(){return this._open},enumerable:!0,configurable:!0}),r}(e.EventEmitter);exports.BaseConnection=r;\n},{"eventemitter3":"JJlS"}],"dbHP":[function(require,module,exports) {\n"use strict";var e=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./util"),i=r(require("./logger")),a=require("./negotiator"),s=require("./enums"),l=require("./baseconnection"),c=function(r){function l(e,t,o){var i=r.call(this,e,t,o)||this;return i._localStream=i.options._stream,i.connectionId=i.options.connectionId||l.ID_PREFIX+n.util.randomToken(),i._negotiator=new a.Negotiator(i),i._localStream&&i._negotiator.startConnection({_stream:i._localStream,originator:!0}),i}return e(l,r),Object.defineProperty(l.prototype,"type",{get:function(){return s.ConnectionType.Media},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"localStream",{get:function(){return this._localStream},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!0,configurable:!0}),l.prototype.addStream=function(e){i.default.log("Receiving stream",e),this._remoteStream=e,r.prototype.emit.call(this,s.ConnectionEventType.Stream,e)},l.prototype.handleMessage=function(e){var t=e.type,o=e.payload;switch(e.type){case s.ServerMessageType.Answer:this._negotiator.handleSDP(t,o.sdp),this._open=!0;break;case s.ServerMessageType.Candidate:this._negotiator.handleCandidate(o.candidate);break;default:i.default.warn("Unrecognized message type:"+t+" from peer:"+this.peer)}},l.prototype.answer=function(e,r){var n,a;if(void 0===r&&(r={}),this._localStream)i.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=e,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(t(t({},this.options._payload),{_stream:e}));var s=this.provider._getMessages(this.connectionId);try{for(var l=o(s),c=l.next();!c.done;c=l.next()){var p=c.value;this.handleMessage(p)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}this._open=!0}},l.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,r.prototype.emit.call(this,s.ConnectionEventType.Close))},l.ID_PREFIX="mc_",l}(l.BaseConnection);exports.MediaConnection=c;\n},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],"GGp6":[function(require,module,exports) {\n"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("eventemitter3"),o=t(require("./logger")),n=function(t){function r(){var e=t.call(this)||this;return e.fileReader=new FileReader,e._queue=[],e._processing=!1,e.fileReader.onload=function(t){e._processing=!1,t.target&&e.emit("done",t.target.result),e.doNextTask()},e.fileReader.onerror=function(t){o.default.error("EncodingQueue error:",t),e._processing=!1,e.destroy(),e.emit("error",t)},e}return e(r,t),Object.defineProperty(r.prototype,"queue",{get:function(){return this._queue},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"processing",{get:function(){return this._processing},enumerable:!0,configurable:!0}),r.prototype.enque=function(e){this.queue.push(e),this.processing||this.doNextTask()},r.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},r.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},r}(r.EventEmitter);exports.EncodingQueue=n;\n},{"eventemitter3":"JJlS","./logger":"WOs9"}],"GBTQ":[function(require,module,exports) {\n"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),t=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./util"),o=n(require("./logger")),r=require("./negotiator"),a=require("./enums"),s=require("./baseconnection"),u=require("./encodingQueue"),l=function(n){function s(e,t,l){var f=n.call(this,e,t,l)||this;return f.stringify=JSON.stringify,f.parse=JSON.parse,f._buffer=[],f._bufferSize=0,f._buffering=!1,f._chunkedData={},f._encodingQueue=new u.EncodingQueue,f.connectionId=f.options.connectionId||s.ID_PREFIX+i.util.randomToken(),f.label=f.options.label||f.connectionId,f.serialization=f.options.serialization||a.SerializationType.Binary,f.reliable=!!f.options.reliable,f._encodingQueue.on("done",function(e){f._bufferedSend(e)}),f._encodingQueue.on("error",function(){o.default.error("DC#"+f.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),f.close()}),f._negotiator=new r.Negotiator(f),f._negotiator.startConnection(f.options._payload||{originator:!0}),f}return e(s,n),Object.defineProperty(s.prototype,"type",{get:function(){return a.ConnectionType.Data},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!0,configurable:!0}),s.prototype.initialize=function(e){this._dc=e,this._configureDataChannel()},s.prototype._configureDataChannel=function(){var e=this;i.util.supports.binaryBlob&&!i.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){o.default.log("DC#"+e.connectionId+" dc connection success"),e._open=!0,e.emit(a.ConnectionEventType.Open)},this.dataChannel.onmessage=function(t){o.default.log("DC#"+e.connectionId+" dc onmessage:",t.data),e._handleDataMessage(t)},this.dataChannel.onclose=function(){o.default.log("DC#"+e.connectionId+" dc closed for:",e.peer),e.close()}},s.prototype._handleDataMessage=function(e){var t=this,o=e.data,r=o.constructor,s=o;if(this.serialization===a.SerializationType.Binary||this.serialization===a.SerializationType.BinaryUTF8){if(r===Blob)return void i.util.blobToArrayBuffer(o,function(e){var n=i.util.unpack(e);t.emit(a.ConnectionEventType.Data,n)});if(r===ArrayBuffer)s=i.util.unpack(o);else if(r===String){var u=i.util.binaryStringToArrayBuffer(o);s=i.util.unpack(u)}}else this.serialization===a.SerializationType.JSON&&(s=this.parse(o));s.__peerData?this._handleChunk(s):n.prototype.emit.call(this,a.ConnectionEventType.Data,s)},s.prototype._handleChunk=function(e){var t=e.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:e.total};if(n.data[e.n]=e.data,n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];var i=new Blob(n.data);this._handleDataMessage({data:i})}},s.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,n.prototype.emit.call(this,a.ConnectionEventType.Close))},s.prototype.send=function(e,t){if(this.open)if(this.serialization===a.SerializationType.JSON)this._bufferedSend(this.stringify(e));else if(this.serialization===a.SerializationType.Binary||this.serialization===a.SerializationType.BinaryUTF8){var o=i.util.pack(e);if(!t&&o.size>i.util.chunkedMTU)return void this._sendChunks(o);i.util.supports.binaryBlob?this._bufferedSend(o):this._encodingQueue.enque(o)}else this._bufferedSend(e);else n.prototype.emit.call(this,a.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},s.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)},s.prototype._trySend=function(e){var t=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>s.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){t._buffering=!1,t._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return o.default.error("DC#:"+this.connectionId+" Error when sending:",n),this._buffering=!0,this.close(),!1}return!0},s.prototype._tryBuffer=function(){if(this.open&&0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},s.prototype._sendChunks=function(e){var n,r,a=i.util.chunk(e);o.default.log("DC#"+this.connectionId+" Try to send "+a.length+" chunks...");try{for(var s=t(a),u=s.next();!u.done;u=s.next()){var l=u.value;this.send(l,!0)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},s.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case a.ServerMessageType.Answer:this._negotiator.handleSDP(e.type,t.sdp);break;case a.ServerMessageType.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:o.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},s.ID_PREFIX="dc_",s.MAX_BUFFERED_AMOUNT=8388608,s}(s.BaseConnection);exports.DataConnection=l;\n},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],"in7L":[function(require,module,exports) {\n"use strict";var t=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))(function(n,s){function i(t){try{a(o.next(t))}catch(e){s(e)}}function u(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,u)}a((o=o.apply(t,e||[])).next())})},e=this&&this.__generator||function(t,e){var r,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(u){s=[6,u],o=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var o=require("./util"),n=r(require("./logger")),s=function(){function r(t){this._options=t}return r.prototype._buildUrl=function(t){var e=(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+t;return e+="?ts="+(new Date).getTime()+Math.random()},r.prototype.retrieveId=function(){return t(this,void 0,Promise,function(){var t,r,s,i;return e(this,function(e){switch(e.label){case 0:t=this._buildUrl("id"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(r=e.sent()).status)throw new Error("Error. Status:"+r.status);return[2,r.text()];case 3:throw s=e.sent(),n.default.error("Error retrieving ID",s),i="","/"===this._options.path&&this._options.host!==o.util.CLOUD_HOST&&(i=" If you passed in a `path` to your self-hosted PeerServer, you\'ll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+i);case 4:return[2]}})})},r.prototype.listAllPeers=function(){return t(this,void 0,Promise,function(){var t,r,s,i;return e(this,function(e){switch(e.label){case 0:t=this._buildUrl("peers"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(r=e.sent()).status){if(401===r.status)throw s="",s=this._options.host===o.util.CLOUD_HOST?"It looks like you\'re using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn\'t look like you have permission to list peers IDs. "+s);throw new Error("Error. Status:"+r.status)}return[2,r.json()];case 3:throw i=e.sent(),n.default.error("Error retrieving list peers",i),new Error("Could not get list peers from the server."+i);case 4:return[2]}})})},r}();exports.API=s;\n},{"./util":"BHXf","./logger":"WOs9"}],"Hxpd":[function(require,module,exports) {\n"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var i=require("eventemitter3"),s=require("./util"),a=o(require("./logger")),c=require("./socket"),l=require("./mediaconnection"),d=require("./dataconnection"),u=require("./enums"),p=require("./api"),h=function(){return function(){}}(),f=function(o){function i(e,n){var r,c=o.call(this)||this;return c._id=null,c._lastServerId=null,c._destroyed=!1,c._disconnected=!1,c._open=!1,c._connections=new Map,c._lostMessages=new Map,e&&e.constructor==Object?n=e:e&&(r=e.toString()),n=t({debug:0,host:s.util.CLOUD_HOST,port:s.util.CLOUD_PORT,path:"/",key:i.DEFAULT_KEY,token:s.util.randomToken(),config:s.util.defaultConfig},n),c._options=n,"/"===c._options.host&&(c._options.host=window.location.hostname),c._options.path&&("/"!==c._options.path[0]&&(c._options.path="/"+c._options.path),"/"!==c._options.path[c._options.path.length-1]&&(c._options.path+="/")),void 0===c._options.secure&&c._options.host!==s.util.CLOUD_HOST?c._options.secure=s.util.isSecure():c._options.host==s.util.CLOUD_HOST&&(c._options.secure=!0),c._options.logFunction&&a.default.setLogFunction(c._options.logFunction),a.default.logLevel=c._options.debug||0,c._api=new p.API(n),c._socket=c._createServerConnection(),s.util.supports.audioVideo||s.util.supports.data?r&&!s.util.validateId(r)?(c._delayedAbort(u.PeerErrorType.InvalidID,\'ID "\'+r+\'" is invalid\'),c):(r?c._initialize(r):c._api.retrieveId().then(function(e){return c._initialize(e)}).catch(function(e){return c._abort(u.PeerErrorType.ServerError,e)}),c):(c._delayedAbort(u.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),c)}return e(i,o),Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"open",{get:function(){return this._open},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"socket",{get:function(){return this._socket},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"connections",{get:function(){var e,t,o=Object.create(null);try{for(var i=n(this._connections),s=i.next();!s.done;s=i.next()){var a=r(s.value,2),c=a[0],l=a[1];o[c]=l}}catch(d){e={error:d}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!0,configurable:!0}),i.prototype._createServerConnection=function(){var e=this,t=new c.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(u.SocketEventType.Message,function(t){e._handleMessage(t)}),t.on(u.SocketEventType.Error,function(t){e._abort(u.PeerErrorType.SocketError,t)}),t.on(u.SocketEventType.Disconnected,function(){e.disconnected||(e.emitError(u.PeerErrorType.Network,"Lost connection to server."),e.disconnect())}),t.on(u.SocketEventType.Close,function(){e.disconnected||e._abort(u.PeerErrorType.SocketClosed,"Underlying socket is already closed.")}),t},i.prototype._initialize=function(e){this._id=e,this.socket.start(e,this._options.token)},i.prototype._handleMessage=function(e){var t,r,o=e.type,i=e.payload,s=e.src;switch(o){case u.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(u.PeerEventType.Open,this.id);break;case u.ServerMessageType.Error:this._abort(u.PeerErrorType.ServerError,i.msg);break;case u.ServerMessageType.IdTaken:this._abort(u.PeerErrorType.UnavailableID,\'ID "\'+this.id+\'" is taken\');break;case u.ServerMessageType.InvalidKey:this._abort(u.PeerErrorType.InvalidKey,\'API KEY "\'+this._options.key+\'" is invalid\');break;case u.ServerMessageType.Leave:a.default.log("Received leave message from "+s),this._cleanupPeer(s),this._connections.delete(s);break;case u.ServerMessageType.Expire:this.emitError(u.PeerErrorType.PeerUnavailable,"Could not connect to peer "+s);break;case u.ServerMessageType.Offer:var c=i.connectionId;if((_=this.getConnection(s,c))&&(_.close(),a.default.warn("Offer received for existing Connection ID:"+c)),i.type===u.ConnectionType.Media)_=new l.MediaConnection(s,this,{connectionId:c,_payload:i,metadata:i.metadata}),this._addConnection(s,_),this.emit(u.PeerEventType.Call,_);else{if(i.type!==u.ConnectionType.Data)return void a.default.warn("Received malformed connection type:"+i.type);_=new d.DataConnection(s,this,{connectionId:c,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(s,_),this.emit(u.PeerEventType.Connection,_)}var p=this._getMessages(c);try{for(var h=n(p),f=h.next();!f.done;f=h.next()){var y=f.value;_.handleMessage(y)}}catch(v){t={error:v}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}break;default:if(!i)return void a.default.warn("You received a malformed message from "+s+" of type "+o);var _;c=i.connectionId;(_=this.getConnection(s,c))&&_.peerConnection?_.handleMessage(e):c?this._storeMessage(c,e):a.default.warn("You received an unrecognized message:",e)}},i.prototype._storeMessage=function(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)},i.prototype._getMessages=function(e){var t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]},i.prototype.connect=function(e,t){if(void 0===t&&(t={}),this.disconnected)return a.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(u.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var n=new d.DataConnection(e,this,t);return this._addConnection(e,n),n},i.prototype.call=function(e,t,n){if(void 0===n&&(n={}),this.disconnected)return a.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(u.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(t){n._stream=t;var r=new l.MediaConnection(e,this,n);return this._addConnection(e,r),r}a.default.error("To call a peer, you must provide a stream from your browser\'s `getUserMedia`.")},i.prototype._addConnection=function(e,t){a.default.log("add connection "+t.type+":"+t.connectionId+" to peerId:"+e),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)},i.prototype._removeConnection=function(e){var t=this._connections.get(e.peer);if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}this._lostMessages.delete(e.connectionId)},i.prototype.getConnection=function(e,t){var r,o,i=this._connections.get(e);if(!i)return null;try{for(var s=n(i),a=s.next();!a.done;a=s.next()){var c=a.value;if(c.connectionId===t)return c}}catch(l){r={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return null},i.prototype._delayedAbort=function(e,t){var n=this;setTimeout(function(){n._abort(e,t)},0)},i.prototype._abort=function(e,t){a.default.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()},i.prototype.emitError=function(e,t){var n;a.default.error("Error:",t),(n="string"==typeof t?new Error(t):t).type=e,this.emit(u.PeerEventType.Error,n)},i.prototype.destroy=function(){this.destroyed||(a.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(u.PeerEventType.Close))},i.prototype._cleanup=function(){var e,t;try{for(var r=n(this._connections.keys()),o=r.next();!o.done;o=r.next()){var i=o.value;this._cleanupPeer(i),this._connections.delete(i)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.socket.removeAllListeners()},i.prototype._cleanupPeer=function(e){var t,r,o=this._connections.get(e);if(o)try{for(var i=n(o),s=i.next();!s.done;s=i.next()){s.value.close()}}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},i.prototype.disconnect=function(){if(!this.disconnected){var e=this.id;a.default.log("Disconnect peer with ID:"+e),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit(u.PeerEventType.Disconnected,e)}},i.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)a.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");a.default.error("In a hurry? We\'re still trying to make the initial connection!")}},i.prototype.listAllPeers=function(e){var t=this;void 0===e&&(e=function(e){}),this._api.listAllPeers().then(function(t){return e(t)}).catch(function(e){return t._abort(u.PeerErrorType.ServerError,e)})},i.DEFAULT_KEY="peerjs",i}(i.EventEmitter);exports.Peer=f;\n},{"eventemitter3":"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],"iTK6":[function(require,module,exports) {\n"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util"),r=require("./peer");exports.peerjs={Peer:r.Peer,util:e.util},exports.default=r.Peer,window.peerjs=exports.peerjs,window.Peer=r.Peer;\n},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"], null)\n//# sourceMappingURL=/peerjs.min.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja2Vycy1jbGllbnQvLi9ub2RlX21vZHVsZXMvcGVlcmpzL2Rpc3QvcGVlcmpzLm1pbi5qcz9hMGJjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdDQUFnQywwREFBMEQsU0FBbUMsQ0FBQyxnQkFBZ0IsVUFBVSxVQUFVLHNEQUFzRCx3QkFBd0Isb0JBQW9CLEdBQUcsS0FBQyw0QkFBNEIseUJBQUUsQ0FBQyxDQUFDLENBQUMsOENBQThDLGtDQUFrQyxzQkFBc0IscUJBQXFCLFlBQVksMkJBQTJCLDJDQUEyQyxvQkFBb0IsY0FBYyx3QkFBd0IsMENBQTBDLHdDQUF3QywyREFBMkQsb0JBQW9CLFlBQVksR0FBRyxHQUFHLFlBQVksV0FBVyxRQUFRLFFBQVEsU0FBUyxTQUFTLGFBQWEsdUJBQXVCLEtBQW9ELGtCQUFrQixDQUFpRixDQUFDLDZCQUE2QixTQUFTLEVBQUU7QUFDaGdDLFNBQVMsNEJBQTRCLElBQUksdUJBQXVCLFNBQVMsVUFBVSxzREFBc0QsSUFBSSwrQ0FBK0MsU0FBUyxVQUFVLG1DQUFtQyxpQ0FBaUMsYUFBYSwrQkFBK0Isb0xBQW9MLDJFQUEyRSw4QkFBOEIsMEJBQTBCLG1DQUFtQyx3RUFBd0Usa0NBQWtDLGtDQUFrQyx5Q0FBeUMsSUFBSSw2QkFBNkIsbUJBQW1CLDZCQUE2QjtBQUMvNUIsQ0FBQyxHQUFHO0FBQ0osOEZBQThGLG1CQUFtQix5QkFBeUIsa0JBQWtCLFlBQVksaUNBQWlDLGNBQWMsb0hBQW9ILGFBQWEseUJBQXlCLGNBQWMsc0JBQXNCLGtGQUFrRixjQUFjLCtFQUErRSwrQ0FBK0MsNEJBQTRCLGtCQUFrQiwrQkFBK0IsMkNBQTJDLDhDQUE4Qyw2Q0FBNkMsMkNBQTJDLFVBQVUscUJBQXFCLGdCQUFnQixrQkFBa0Isa0JBQWtCLG9DQUFvQyxxQ0FBcUMsb0NBQW9DLHFDQUFxQyxxQ0FBcUMscUNBQXFDLG1DQUFtQyxvQ0FBb0Msb0NBQW9DLG9DQUFvQywyQ0FBMkMsNkRBQTZELDZEQUE2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c0NvbnRlbnQiOlsicGFyY2VsUmVxdWlyZT1mdW5jdGlvbihlLHIsdCxuKXt2YXIgaSxvPVwiZnVuY3Rpb25cIj09dHlwZW9mIHBhcmNlbFJlcXVpcmUmJnBhcmNlbFJlcXVpcmUsdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2Z1bmN0aW9uIGYodCxuKXtpZighclt0XSl7aWYoIWVbdF0pe3ZhciBpPVwiZnVuY3Rpb25cIj09dHlwZW9mIHBhcmNlbFJlcXVpcmUmJnBhcmNlbFJlcXVpcmU7aWYoIW4mJmkpcmV0dXJuIGkodCwhMCk7aWYobylyZXR1cm4gbyh0LCEwKTtpZih1JiZcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gdSh0KTt2YXIgYz1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK3QrXCInXCIpO3Rocm93IGMuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixjfXAucmVzb2x2ZT1mdW5jdGlvbihyKXtyZXR1cm4gZVt0XVsxXVtyXXx8cn0scC5jYWNoZT17fTt2YXIgbD1yW3RdPW5ldyBmLk1vZHVsZSh0KTtlW3RdWzBdLmNhbGwobC5leHBvcnRzLHAsbCxsLmV4cG9ydHMsdGhpcyl9cmV0dXJuIHJbdF0uZXhwb3J0cztmdW5jdGlvbiBwKGUpe3JldHVybiBmKHAucmVzb2x2ZShlKSl9fWYuaXNQYXJjZWxSZXF1aXJlPSEwLGYuTW9kdWxlPWZ1bmN0aW9uKGUpe3RoaXMuaWQ9ZSx0aGlzLmJ1bmRsZT1mLHRoaXMuZXhwb3J0cz17fX0sZi5tb2R1bGVzPWUsZi5jYWNoZT1yLGYucGFyZW50PW8sZi5yZWdpc3Rlcj1mdW5jdGlvbihyLHQpe2Vbcl09W2Z1bmN0aW9uKGUscil7ci5leHBvcnRzPXR9LHt9XX07Zm9yKHZhciBjPTA7Yzx0Lmxlbmd0aDtjKyspdHJ5e2YodFtjXSl9Y2F0Y2goZSl7aXx8KGk9ZSl9aWYodC5sZW5ndGgpe3ZhciBsPWYodFt0Lmxlbmd0aC0xXSk7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9bDpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIGx9KTpuJiYodGhpc1tuXT1sKX1pZihwYXJjZWxSZXF1aXJlPWYsaSl0aHJvdyBpO3JldHVybiBmfSh7XCJFZ0JoXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcbnZhciBlPXt9O2UudXNlQmxvYkJ1aWxkZXI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBCbG9iKFtdKSwhMX1jYXRjaChlKXtyZXR1cm4hMH19KCksZS51c2VBcnJheUJ1ZmZlclZpZXc9IWUudXNlQmxvYkJ1aWxkZXImJmZ1bmN0aW9uKCl7dHJ5e3JldHVybiAwPT09bmV3IEJsb2IoW25ldyBVaW50OEFycmF5KFtdKV0pLnNpemV9Y2F0Y2goZSl7cmV0dXJuITB9fSgpLG1vZHVsZS5leHBvcnRzLmJpbmFyeUZlYXR1cmVzPWU7dmFyIHI9bW9kdWxlLmV4cG9ydHMuQmxvYkJ1aWxkZXI7ZnVuY3Rpb24gdCgpe3RoaXMuX3BpZWNlcz1bXSx0aGlzLl9wYXJ0cz1bXX1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYocj1tb2R1bGUuZXhwb3J0cy5CbG9iQnVpbGRlcj13aW5kb3cuV2ViS2l0QmxvYkJ1aWxkZXJ8fHdpbmRvdy5Nb3pCbG9iQnVpbGRlcnx8d2luZG93Lk1TQmxvYkJ1aWxkZXJ8fHdpbmRvdy5CbG9iQnVpbGRlciksdC5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKGUpe1wibnVtYmVyXCI9PXR5cGVvZiBlP3RoaXMuX3BpZWNlcy5wdXNoKGUpOih0aGlzLmZsdXNoKCksdGhpcy5fcGFydHMucHVzaChlKSl9LHQucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7aWYodGhpcy5fcGllY2VzLmxlbmd0aD4wKXt2YXIgcj1uZXcgVWludDhBcnJheSh0aGlzLl9waWVjZXMpO2UudXNlQXJyYXlCdWZmZXJWaWV3fHwocj1yLmJ1ZmZlciksdGhpcy5fcGFydHMucHVzaChyKSx0aGlzLl9waWVjZXM9W119fSx0LnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24oKXtpZih0aGlzLmZsdXNoKCksZS51c2VCbG9iQnVpbGRlcil7Zm9yKHZhciB0PW5ldyByLGk9MCx1PXRoaXMuX3BhcnRzLmxlbmd0aDtpPHU7aSsrKXQuYXBwZW5kKHRoaXMuX3BhcnRzW2ldKTtyZXR1cm4gdC5nZXRCbG9iKCl9cmV0dXJuIG5ldyBCbG9iKHRoaXMuX3BhcnRzKX0sbW9kdWxlLmV4cG9ydHMuQnVmZmVyQnVpbGRlcj10O1xufSx7fV0sXCJrZFBwXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcbnZhciB0PXJlcXVpcmUoXCIuL2J1ZmZlcmJ1aWxkZXJcIikuQnVmZmVyQnVpbGRlcixlPXJlcXVpcmUoXCIuL2J1ZmZlcmJ1aWxkZXJcIikuYmluYXJ5RmVhdHVyZXMsaT17dW5wYWNrOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcih0KS51bnBhY2soKX0scGFjazpmdW5jdGlvbih0KXt2YXIgZT1uZXcgbjtyZXR1cm4gZS5wYWNrKHQpLGUuZ2V0QnVmZmVyKCl9fTtmdW5jdGlvbiByKHQpe3RoaXMuaW5kZXg9MCx0aGlzLmRhdGFCdWZmZXI9dCx0aGlzLmRhdGFWaWV3PW5ldyBVaW50OEFycmF5KHRoaXMuZGF0YUJ1ZmZlciksdGhpcy5sZW5ndGg9dGhpcy5kYXRhQnVmZmVyLmJ5dGVMZW5ndGh9ZnVuY3Rpb24gbigpe3RoaXMuYnVmZmVyQnVpbGRlcj1uZXcgdH1mdW5jdGlvbiB1KHQpe3ZhciBlPXQuY2hhckNvZGVBdCgwKTtyZXR1cm4gZTw9MjA0Nz9cIjAwXCI6ZTw9NjU1MzU/XCIwMDBcIjplPD0yMDk3MTUxP1wiMDAwMFwiOmU8PTY3MTA4ODYzP1wiMDAwMDBcIjpcIjAwMDAwMFwifWZ1bmN0aW9uIGEodCl7cmV0dXJuIHQubGVuZ3RoPjYwMD9uZXcgQmxvYihbdF0pLnNpemU6dC5yZXBsYWNlKC9bXlxcdTAwMDAtXFx1MDA3Rl0vZyx1KS5sZW5ndGh9bW9kdWxlLmV4cG9ydHM9aSxyLnByb3RvdHlwZS51bnBhY2s9ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMudW5wYWNrX3VpbnQ4KCk7aWYoZTwxMjgpcmV0dXJuIGU7aWYoKDIyNF5lKTwzMilyZXR1cm4oMjI0XmUpLTMyO2lmKCh0PTE2MF5lKTw9MTUpcmV0dXJuIHRoaXMudW5wYWNrX3Jhdyh0KTtpZigodD0xNzZeZSk8PTE1KXJldHVybiB0aGlzLnVucGFja19zdHJpbmcodCk7aWYoKHQ9MTQ0XmUpPD0xNSlyZXR1cm4gdGhpcy51bnBhY2tfYXJyYXkodCk7aWYoKHQ9MTI4XmUpPD0xNSlyZXR1cm4gdGhpcy51bnBhY2tfbWFwKHQpO3N3aXRjaChlKXtjYXNlIDE5MjpyZXR1cm4gbnVsbDtjYXNlIDE5MzpyZXR1cm47Y2FzZSAxOTQ6cmV0dXJuITE7Y2FzZSAxOTU6cmV0dXJuITA7Y2FzZSAyMDI6cmV0dXJuIHRoaXMudW5wYWNrX2Zsb2F0KCk7Y2FzZSAyMDM6cmV0dXJuIHRoaXMudW5wYWNrX2RvdWJsZSgpO2Nhc2UgMjA0OnJldHVybiB0aGlzLnVucGFja191aW50OCgpO2Nhc2UgMjA1OnJldHVybiB0aGlzLnVucGFja191aW50MTYoKTtjYXNlIDIwNjpyZXR1cm4gdGhpcy51bnBhY2tfdWludDMyKCk7Y2FzZSAyMDc6cmV0dXJuIHRoaXMudW5wYWNrX3VpbnQ2NCgpO2Nhc2UgMjA4OnJldHVybiB0aGlzLnVucGFja19pbnQ4KCk7Y2FzZSAyMDk6cmV0dXJuIHRoaXMudW5wYWNrX2ludDE2KCk7Y2FzZSAyMTA6cmV0dXJuIHRoaXMudW5wYWNrX2ludDMyKCk7Y2FzZSAyMTE6cmV0dXJuIHRoaXMudW5wYWNrX2ludDY0KCk7Y2FzZSAyMTI6Y2FzZSAyMTM6Y2FzZSAyMTQ6Y2FzZSAyMTU6cmV0dXJuO2Nhc2UgMjE2OnJldHVybiB0PXRoaXMudW5wYWNrX3VpbnQxNigpLHRoaXMudW5wYWNrX3N0cmluZyh0KTtjYXNlIDIxNzpyZXR1cm4gdD10aGlzLnVucGFja191aW50MzIoKSx0aGlzLnVucGFja19zdHJpbmcodCk7Y2FzZSAyMTg6cmV0dXJuIHQ9dGhpcy51bnBhY2tfdWludDE2KCksdGhpcy51bnBhY2tfcmF3KHQpO2Nhc2UgMjE5OnJldHVybiB0PXRoaXMudW5wYWNrX3VpbnQzMigpLHRoaXMudW5wYWNrX3Jhdyh0KTtjYXNlIDIyMDpyZXR1cm4gdD10aGlzLnVucGFja191aW50MTYoKSx0aGlzLnVucGFja19hcnJheSh0KTtjYXNlIDIyMTpyZXR1cm4gdD10aGlzLnVucGFja191aW50MzIoKSx0aGlzLnVucGFja19hcnJheSh0KTtjYXNlIDIyMjpyZXR1cm4gdD10aGlzLnVucGFja191aW50MTYoKSx0aGlzLnVucGFja19tYXAodCk7Y2FzZSAyMjM6cmV0dXJuIHQ9dGhpcy51bnBhY2tfdWludDMyKCksdGhpcy51bnBhY2tfbWFwKHQpfX0sci5wcm90b3R5cGUudW5wYWNrX3VpbnQ4PWZ1bmN0aW9uKCl7dmFyIHQ9MjU1JnRoaXMuZGF0YVZpZXdbdGhpcy5pbmRleF07cmV0dXJuIHRoaXMuaW5kZXgrKyx0fSxyLnByb3RvdHlwZS51bnBhY2tfdWludDE2PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWFkKDIpLGU9MjU2KigyNTUmdFswXSkrKDI1NSZ0WzFdKTtyZXR1cm4gdGhpcy5pbmRleCs9MixlfSxyLnByb3RvdHlwZS51bnBhY2tfdWludDMyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWFkKDQpLGU9MjU2KigyNTYqKDI1Nip0WzBdK3RbMV0pK3RbMl0pK3RbM107cmV0dXJuIHRoaXMuaW5kZXgrPTQsZX0sci5wcm90b3R5cGUudW5wYWNrX3VpbnQ2ND1mdW5jdGlvbigpe3ZhciB0PXRoaXMucmVhZCg4KSxlPTI1NiooMjU2KigyNTYqKDI1NiooMjU2KigyNTYqKDI1Nip0WzBdK3RbMV0pK3RbMl0pK3RbM10pK3RbNF0pK3RbNV0pK3RbNl0pK3RbN107cmV0dXJuIHRoaXMuaW5kZXgrPTgsZX0sci5wcm90b3R5cGUudW5wYWNrX2ludDg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVucGFja191aW50OCgpO3JldHVybiB0PDEyOD90OnQtMjU2fSxyLnByb3RvdHlwZS51bnBhY2tfaW50MTY9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVucGFja191aW50MTYoKTtyZXR1cm4gdDwzMjc2OD90OnQtNjU1MzZ9LHIucHJvdG90eXBlLnVucGFja19pbnQzMj1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wYWNrX3VpbnQzMigpO3JldHVybiB0PE1hdGgucG93KDIsMzEpP3Q6dC1NYXRoLnBvdygyLDMyKX0sci5wcm90b3R5cGUudW5wYWNrX2ludDY0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51bnBhY2tfdWludDY0KCk7cmV0dXJuIHQ8TWF0aC5wb3coMiw2Myk/dDp0LU1hdGgucG93KDIsNjQpfSxyLnByb3RvdHlwZS51bnBhY2tfcmF3PWZ1bmN0aW9uKHQpe2lmKHRoaXMubGVuZ3RoPHRoaXMuaW5kZXgrdCl0aHJvdyBuZXcgRXJyb3IoXCJCaW5hcnlQYWNrRmFpbHVyZTogaW5kZXggaXMgb3V0IG9mIHJhbmdlIFwiK3RoaXMuaW5kZXgrXCIgXCIrdCtcIiBcIit0aGlzLmxlbmd0aCk7dmFyIGU9dGhpcy5kYXRhQnVmZmVyLnNsaWNlKHRoaXMuaW5kZXgsdGhpcy5pbmRleCt0KTtyZXR1cm4gdGhpcy5pbmRleCs9dCxlfSxyLnByb3RvdHlwZS51bnBhY2tfc3RyaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxpLHI9dGhpcy5yZWFkKHQpLG49MCx1PVwiXCI7bjx0OykoZT1yW25dKTwxMjg/KHUrPVN0cmluZy5mcm9tQ2hhckNvZGUoZSksbisrKTooMTkyXmUpPDMyPyhpPSgxOTJeZSk8PDZ8NjMmcltuKzFdLHUrPVN0cmluZy5mcm9tQ2hhckNvZGUoaSksbis9Mik6KGk9KDE1JmUpPDwxMnwoNjMmcltuKzFdKTw8Nnw2MyZyW24rMl0sdSs9U3RyaW5nLmZyb21DaGFyQ29kZShpKSxuKz0zKTtyZXR1cm4gdGhpcy5pbmRleCs9dCx1fSxyLnByb3RvdHlwZS51bnBhY2tfYXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0KSxpPTA7aTx0O2krKyllW2ldPXRoaXMudW5wYWNrKCk7cmV0dXJuIGV9LHIucHJvdG90eXBlLnVucGFja19tYXA9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LGk9MDtpPHQ7aSsrKXt2YXIgcj10aGlzLnVucGFjaygpLG49dGhpcy51bnBhY2soKTtlW3JdPW59cmV0dXJuIGV9LHIucHJvdG90eXBlLnVucGFja19mbG9hdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wYWNrX3VpbnQzMigpLGU9KHQ+PjIzJjI1NSktMTI3O3JldHVybigwPT09dD4+MzE/MTotMSkqKDgzODg2MDcmdHw4Mzg4NjA4KSpNYXRoLnBvdygyLGUtMjMpfSxyLnByb3RvdHlwZS51bnBhY2tfZG91YmxlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51bnBhY2tfdWludDMyKCksZT10aGlzLnVucGFja191aW50MzIoKSxpPSh0Pj4yMCYyMDQ3KS0xMDIzO3JldHVybigwPT09dD4+MzE/MTotMSkqKCgxMDQ4NTc1JnR8MTA0ODU3NikqTWF0aC5wb3coMixpLTIwKStlKk1hdGgucG93KDIsaS01MikpfSxyLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaW5kZXg7aWYoZSt0PD10aGlzLmxlbmd0aClyZXR1cm4gdGhpcy5kYXRhVmlldy5zdWJhcnJheShlLGUrdCk7dGhyb3cgbmV3IEVycm9yKFwiQmluYXJ5UGFja0ZhaWx1cmU6IHJlYWQgaW5kZXggb3V0IG9mIHJhbmdlXCIpfSxuLnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXJCdWlsZGVyLmdldEJ1ZmZlcigpfSxuLnByb3RvdHlwZS5wYWNrPWZ1bmN0aW9uKHQpe3ZhciBpPXR5cGVvZiB0O2lmKFwic3RyaW5nXCI9PT1pKXRoaXMucGFja19zdHJpbmcodCk7ZWxzZSBpZihcIm51bWJlclwiPT09aSlNYXRoLmZsb29yKHQpPT09dD90aGlzLnBhY2tfaW50ZWdlcih0KTp0aGlzLnBhY2tfZG91YmxlKHQpO2Vsc2UgaWYoXCJib29sZWFuXCI9PT1pKSEwPT09dD90aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDE5NSk6ITE9PT10JiZ0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDE5NCk7ZWxzZSBpZihcInVuZGVmaW5lZFwiPT09aSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDE5Mik7ZWxzZXtpZihcIm9iamVjdFwiIT09aSl0aHJvdyBuZXcgRXJyb3IoJ1R5cGUgXCInK2krJ1wiIG5vdCB5ZXQgc3VwcG9ydGVkJyk7aWYobnVsbD09PXQpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgxOTIpO2Vsc2V7dmFyIHI9dC5jb25zdHJ1Y3RvcjtpZihyPT1BcnJheSl0aGlzLnBhY2tfYXJyYXkodCk7ZWxzZSBpZihyPT1CbG9ifHxyPT1GaWxlfHx0IGluc3RhbmNlb2YgQmxvYnx8dCBpbnN0YW5jZW9mIEZpbGUpdGhpcy5wYWNrX2Jpbih0KTtlbHNlIGlmKHI9PUFycmF5QnVmZmVyKWUudXNlQXJyYXlCdWZmZXJWaWV3P3RoaXMucGFja19iaW4obmV3IFVpbnQ4QXJyYXkodCkpOnRoaXMucGFja19iaW4odCk7ZWxzZSBpZihcIkJZVEVTX1BFUl9FTEVNRU5UXCJpbiB0KWUudXNlQXJyYXlCdWZmZXJWaWV3P3RoaXMucGFja19iaW4obmV3IFVpbnQ4QXJyYXkodC5idWZmZXIpKTp0aGlzLnBhY2tfYmluKHQuYnVmZmVyKTtlbHNlIGlmKHI9PU9iamVjdHx8ci50b1N0cmluZygpLnN0YXJ0c1dpdGgoXCJjbGFzc1wiKSl0aGlzLnBhY2tfb2JqZWN0KHQpO2Vsc2UgaWYocj09RGF0ZSl0aGlzLnBhY2tfc3RyaW5nKHQudG9TdHJpbmcoKSk7ZWxzZXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LnRvQmluYXJ5UGFjayl0aHJvdyBuZXcgRXJyb3IoJ1R5cGUgXCInK3IudG9TdHJpbmcoKSsnXCIgbm90IHlldCBzdXBwb3J0ZWQnKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQudG9CaW5hcnlQYWNrKCkpfX19dGhpcy5idWZmZXJCdWlsZGVyLmZsdXNoKCl9LG4ucHJvdG90eXBlLnBhY2tfYmluPWZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RofHx0LmJ5dGVMZW5ndGh8fHQuc2l6ZTtpZihlPD0xNSl0aGlzLnBhY2tfdWludDgoMTYwK2UpO2Vsc2UgaWYoZTw9NjU1MzUpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMTgpLHRoaXMucGFja191aW50MTYoZSk7ZWxzZXtpZighKGU8PTQyOTQ5NjcyOTUpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbGVuZ3RoXCIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjE5KSx0aGlzLnBhY2tfdWludDMyKGUpfXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQodCl9LG4ucHJvdG90eXBlLnBhY2tfc3RyaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPWEodCk7aWYoZTw9MTUpdGhpcy5wYWNrX3VpbnQ4KDE3NitlKTtlbHNlIGlmKGU8PTY1NTM1KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjE2KSx0aGlzLnBhY2tfdWludDE2KGUpO2Vsc2V7aWYoIShlPD00Mjk0OTY3Mjk1KSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxlbmd0aFwiKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIxNyksdGhpcy5wYWNrX3VpbnQzMihlKX10aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQpfSxuLnByb3RvdHlwZS5wYWNrX2FycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RoO2lmKGU8PTE1KXRoaXMucGFja191aW50OCgxNDQrZSk7ZWxzZSBpZihlPD02NTUzNSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIyMCksdGhpcy5wYWNrX3VpbnQxNihlKTtlbHNle2lmKCEoZTw9NDI5NDk2NzI5NSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBsZW5ndGhcIik7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMjEpLHRoaXMucGFja191aW50MzIoZSl9Zm9yKHZhciBpPTA7aTxlO2krKyl0aGlzLnBhY2sodFtpXSl9LG4ucHJvdG90eXBlLnBhY2tfaW50ZWdlcj1mdW5jdGlvbih0KXtpZih0Pj0tMzImJnQ8PTEyNyl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZ0KTtlbHNlIGlmKHQ+PTAmJnQ8PTI1NSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwNCksdGhpcy5wYWNrX3VpbnQ4KHQpO2Vsc2UgaWYodD49LTEyOCYmdDw9MTI3KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjA4KSx0aGlzLnBhY2tfaW50OCh0KTtlbHNlIGlmKHQ+PTAmJnQ8PTY1NTM1KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjA1KSx0aGlzLnBhY2tfdWludDE2KHQpO2Vsc2UgaWYodD49LTMyNzY4JiZ0PD0zMjc2Nyl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwOSksdGhpcy5wYWNrX2ludDE2KHQpO2Vsc2UgaWYodD49MCYmdDw9NDI5NDk2NzI5NSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwNiksdGhpcy5wYWNrX3VpbnQzMih0KTtlbHNlIGlmKHQ+PS0yMTQ3NDgzNjQ4JiZ0PD0yMTQ3NDgzNjQ3KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjEwKSx0aGlzLnBhY2tfaW50MzIodCk7ZWxzZSBpZih0Pj0tMHg4MDAwMDAwMDAwMDAwMDAwJiZ0PD0weDgwMDAwMDAwMDAwMDAwMDApdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMTEpLHRoaXMucGFja19pbnQ2NCh0KTtlbHNle2lmKCEodD49MCYmdDw9MHgxMDAwMDAwMDAwMDAwMDAwMCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnRlZ2VyXCIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjA3KSx0aGlzLnBhY2tfdWludDY0KHQpfX0sbi5wcm90b3R5cGUucGFja19kb3VibGU9ZnVuY3Rpb24odCl7dmFyIGU9MDt0PDAmJihlPTEsdD0tdCk7dmFyIGk9TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMikscj10L01hdGgucG93KDIsaSktMSxuPU1hdGguZmxvb3IocipNYXRoLnBvdygyLDUyKSksdT1NYXRoLnBvdygyLDMyKSxhPWU8PDMxfGkrMTAyMzw8MjB8bi91JjEwNDg1NzUscD1uJXU7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMDMpLHRoaXMucGFja19pbnQzMihhKSx0aGlzLnBhY2tfaW50MzIocCl9LG4ucHJvdG90eXBlLnBhY2tfb2JqZWN0PWZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC5rZXlzKHQpLmxlbmd0aDtpZihlPD0xNSl0aGlzLnBhY2tfdWludDgoMTI4K2UpO2Vsc2UgaWYoZTw9NjU1MzUpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMjIpLHRoaXMucGFja191aW50MTYoZSk7ZWxzZXtpZighKGU8PTQyOTQ5NjcyOTUpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbGVuZ3RoXCIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjIzKSx0aGlzLnBhY2tfdWludDMyKGUpfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJih0aGlzLnBhY2soaSksdGhpcy5wYWNrKHRbaV0pKX0sbi5wcm90b3R5cGUucGFja191aW50OD1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQpfSxuLnByb3RvdHlwZS5wYWNrX3VpbnQxNj1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQ+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JnQpfSxuLnByb3RvdHlwZS5wYWNrX3VpbnQzMj1mdW5jdGlvbih0KXt2YXIgZT00Mjk0OTY3Mjk1JnQ7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNDI3ODE5MDA4MCZlKT4+PjI0KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCgxNjcxMTY4MCZlKT4+PjE2KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZlKT4+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JmUpfSxuLnByb3RvdHlwZS5wYWNrX3VpbnQ2ND1mdW5jdGlvbih0KXt2YXIgZT10L01hdGgucG93KDIsMzIpLGk9dCVNYXRoLnBvdygyLDMyKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg0Mjc4MTkwMDgwJmUpPj4+MjQpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDE2NzExNjgwJmUpPj4+MTYpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDY1MjgwJmUpPj4+OCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmZSksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNDI3ODE5MDA4MCZpKT4+PjI0KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCgxNjcxMTY4MCZpKT4+PjE2KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZpKT4+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JmkpfSxuLnByb3RvdHlwZS5wYWNrX2ludDg9ZnVuY3Rpb24odCl7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmdCl9LG4ucHJvdG90eXBlLnBhY2tfaW50MTY9ZnVuY3Rpb24odCl7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNjUyODAmdCk+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JnQpfSxuLnByb3RvdHlwZS5wYWNrX2ludDMyPWZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQodD4+PjI0JjI1NSksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoMTY3MTE2ODAmdCk+Pj4xNiksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNjUyODAmdCk+Pj44KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZ0KX0sbi5wcm90b3R5cGUucGFja19pbnQ2ND1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLmZsb29yKHQvTWF0aC5wb3coMiwzMikpLGk9dCVNYXRoLnBvdygyLDMyKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg0Mjc4MTkwMDgwJmUpPj4+MjQpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDE2NzExNjgwJmUpPj4+MTYpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDY1MjgwJmUpPj4+OCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmZSksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNDI3ODE5MDA4MCZpKT4+PjI0KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCgxNjcxMTY4MCZpKT4+PjE2KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZpKT4+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JmkpfTtcbn0se1wiLi9idWZmZXJidWlsZGVyXCI6XCJFZ0JoXCJ9XSxcImlTeENcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlLHQsbil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1uLGV9ZnVuY3Rpb24gdChlKXtyZXR1cm4odD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5leHRyYWN0VmVyc2lvbj1vLGV4cG9ydHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQ9aSxleHBvcnRzLmRpc2FibGVMb2c9cyxleHBvcnRzLmRpc2FibGVXYXJuaW5ncz1hLGV4cG9ydHMubG9nPXUsZXhwb3J0cy5kZXByZWNhdGVkPWMsZXhwb3J0cy5kZXRlY3RCcm93c2VyPXAsZXhwb3J0cy5jb21wYWN0T2JqZWN0PWQsZXhwb3J0cy53YWxrU3RhdHM9bCxleHBvcnRzLmZpbHRlclN0YXRzPWI7dmFyIG49ITAscj0hMDtmdW5jdGlvbiBvKGUsdCxuKXt2YXIgcj1lLm1hdGNoKHQpO3JldHVybiByJiZyLmxlbmd0aD49biYmcGFyc2VJbnQocltuXSwxMCl9ZnVuY3Rpb24gaShlLHQsbil7aWYoZS5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsbz1yLmFkZEV2ZW50TGlzdGVuZXI7ci5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUscil7aWYoZSE9PXQpcmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciB0PW4oZSk7dCYmcih0KX07cmV0dXJuIHRoaXMuX2V2ZW50TWFwPXRoaXMuX2V2ZW50TWFwfHx7fSx0aGlzLl9ldmVudE1hcFtyXT1pLG8uYXBwbHkodGhpcyxbZSxpXSl9O3ZhciBpPXIucmVtb3ZlRXZlbnRMaXN0ZW5lcjtyLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oZSxuKXtpZihlIT09dHx8IXRoaXMuX2V2ZW50TWFwfHwhdGhpcy5fZXZlbnRNYXBbbl0pcmV0dXJuIGkuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciByPXRoaXMuX2V2ZW50TWFwW25dO3JldHVybiBkZWxldGUgdGhpcy5fZXZlbnRNYXBbbl0saS5hcHBseSh0aGlzLFtlLHJdKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJvblwiK3Qse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzW1wiX29uXCIrdF19LHNldDpmdW5jdGlvbihlKXt0aGlzW1wiX29uXCIrdF0mJih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodCx0aGlzW1wiX29uXCIrdF0pLGRlbGV0ZSB0aGlzW1wiX29uXCIrdF0pLGUmJnRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0LHRoaXNbXCJfb25cIit0XT1lKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19ZnVuY3Rpb24gcyhlKXtyZXR1cm5cImJvb2xlYW5cIiE9dHlwZW9mIGU/bmV3IEVycm9yKFwiQXJndW1lbnQgdHlwZTogXCIrdChlKStcIi4gUGxlYXNlIHVzZSBhIGJvb2xlYW4uXCIpOihuPWUsZT9cImFkYXB0ZXIuanMgbG9nZ2luZyBkaXNhYmxlZFwiOlwiYWRhcHRlci5qcyBsb2dnaW5nIGVuYWJsZWRcIil9ZnVuY3Rpb24gYShlKXtyZXR1cm5cImJvb2xlYW5cIiE9dHlwZW9mIGU/bmV3IEVycm9yKFwiQXJndW1lbnQgdHlwZTogXCIrdChlKStcIi4gUGxlYXNlIHVzZSBhIGJvb2xlYW4uXCIpOihyPSFlLFwiYWRhcHRlci5qcyBkZXByZWNhdGlvbiB3YXJuaW5ncyBcIisoZT9cImRpc2FibGVkXCI6XCJlbmFibGVkXCIpKX1mdW5jdGlvbiB1KCl7aWYoXCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93P1widW5kZWZpbmVkXCI6dCh3aW5kb3cpKSl7aWYobilyZXR1cm47XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGNvbnNvbGUubG9nJiZjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGMoZSx0KXtyJiZjb25zb2xlLndhcm4oZStcIiBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFwiK3QrXCIgaW5zdGVhZC5cIil9ZnVuY3Rpb24gcChlKXt2YXJ7bmF2aWdhdG9yOnR9PWUsbj17YnJvd3NlcjpudWxsLHZlcnNpb246bnVsbH07aWYodm9pZCAwPT09ZXx8IWUubmF2aWdhdG9yKXJldHVybiBuLmJyb3dzZXI9XCJOb3QgYSBicm93c2VyLlwiLG47aWYodC5tb3pHZXRVc2VyTWVkaWEpbi5icm93c2VyPVwiZmlyZWZveFwiLG4udmVyc2lvbj1vKHQudXNlckFnZW50LC9GaXJlZm94XFwvKFxcZCspXFwuLywxKTtlbHNlIGlmKHQud2Via2l0R2V0VXNlck1lZGlhfHwhMT09PWUuaXNTZWN1cmVDb250ZXh0JiZlLndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uJiYhZS5SVENJY2VHYXRoZXJlciluLmJyb3dzZXI9XCJjaHJvbWVcIixuLnZlcnNpb249byh0LnVzZXJBZ2VudCwvQ2hyb20oZXxpdW0pXFwvKFxcZCspXFwuLywyKTtlbHNlIGlmKHQubWVkaWFEZXZpY2VzJiZ0LnVzZXJBZ2VudC5tYXRjaCgvRWRnZVxcLyhcXGQrKS4oXFxkKykkLykpbi5icm93c2VyPVwiZWRnZVwiLG4udmVyc2lvbj1vKHQudXNlckFnZW50LC9FZGdlXFwvKFxcZCspLihcXGQrKSQvLDIpO2Vsc2V7aWYoIWUuUlRDUGVlckNvbm5lY3Rpb258fCF0LnVzZXJBZ2VudC5tYXRjaCgvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vKSlyZXR1cm4gbi5icm93c2VyPVwiTm90IGEgc3VwcG9ydGVkIGJyb3dzZXIuXCIsbjtuLmJyb3dzZXI9XCJzYWZhcmlcIixuLnZlcnNpb249byh0LnVzZXJBZ2VudCwvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vLDEpLG4uc3VwcG9ydHNVbmlmaWVkUGxhbj1lLlJUQ1J0cFRyYW5zY2VpdmVyJiZcImN1cnJlbnREaXJlY3Rpb25cImluIGUuUlRDUnRwVHJhbnNjZWl2ZXIucHJvdG90eXBlfXJldHVybiBufWZ1bmN0aW9uIGYoZSl7cmV0dXJuXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX1mdW5jdGlvbiBkKHQpe3JldHVybiBmKHQpP09iamVjdC5rZXlzKHQpLnJlZHVjZShmdW5jdGlvbihuLHIpe3ZhciBvPWYodFtyXSksaT1vP2QodFtyXSk6dFtyXSxzPW8mJiFPYmplY3Qua2V5cyhpKS5sZW5ndGg7cmV0dXJuIHZvaWQgMD09PWl8fHM/bjpPYmplY3QuYXNzaWduKG4sZSh7fSxyLGkpKX0se30pOnR9ZnVuY3Rpb24gbChlLHQsbil7dCYmIW4uaGFzKHQuaWQpJiYobi5zZXQodC5pZCx0KSxPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3IuZW5kc1dpdGgoXCJJZFwiKT9sKGUsZS5nZXQodFtyXSksbik6ci5lbmRzV2l0aChcIklkc1wiKSYmdFtyXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2woZSxlLmdldCh0KSxuKX0pfSkpfWZ1bmN0aW9uIGIoZSx0LG4pe3ZhciByPW4/XCJvdXRib3VuZC1ydHBcIjpcImluYm91bmQtcnRwXCIsbz1uZXcgTWFwO2lmKG51bGw9PT10KXJldHVybiBvO3ZhciBpPVtdO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7XCJ0cmFja1wiPT09ZS50eXBlJiZlLnRyYWNrSWRlbnRpZmllcj09PXQuaWQmJmkucHVzaChlKX0pLGkuZm9yRWFjaChmdW5jdGlvbih0KXtlLmZvckVhY2goZnVuY3Rpb24obil7bi50eXBlPT09ciYmbi50cmFja0lkPT09dC5pZCYmbChlLG4sbyl9KX0pLG99XG59LHt9XSxcInM2U05cIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0VXNlck1lZGlhPWk7dmFyIGU9dChyZXF1aXJlKFwiLi4vdXRpbHMuanNcIikpO2Z1bmN0aW9uIHIoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiByPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gdChlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciB0PXIoKTtpZih0JiZ0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dmFyIG89e30sbj1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpe3ZhciBhPW4/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpOm51bGw7YSYmKGEuZ2V0fHxhLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KG8saSxhKTpvW2ldPWVbaV19cmV0dXJuIG8uZGVmYXVsdD1lLHQmJnQuc2V0KGUsbyksb31mdW5jdGlvbiBvKGUpe3JldHVybihvPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX12YXIgbj1lLmxvZztmdW5jdGlvbiBpKHIpe3ZhciB0PXImJnIubmF2aWdhdG9yO2lmKHQubWVkaWFEZXZpY2VzKXt2YXIgaT1lLmRldGVjdEJyb3dzZXIociksYT1mdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT09byhlKXx8ZS5tYW5kYXRvcnl8fGUub3B0aW9uYWwpcmV0dXJuIGU7dmFyIHI9e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24odCl7aWYoXCJyZXF1aXJlXCIhPT10JiZcImFkdmFuY2VkXCIhPT10JiZcIm1lZGlhU291cmNlXCIhPT10KXt2YXIgbj1cIm9iamVjdFwiPT09byhlW3RdKT9lW3RdOntpZGVhbDplW3RdfTt2b2lkIDAhPT1uLmV4YWN0JiZcIm51bWJlclwiPT10eXBlb2Ygbi5leGFjdCYmKG4ubWluPW4ubWF4PW4uZXhhY3QpO3ZhciBpPWZ1bmN0aW9uKGUscil7cmV0dXJuIGU/ZStyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Iuc2xpY2UoMSk6XCJkZXZpY2VJZFwiPT09cj9cInNvdXJjZUlkXCI6cn07aWYodm9pZCAwIT09bi5pZGVhbCl7ci5vcHRpb25hbD1yLm9wdGlvbmFsfHxbXTt2YXIgYT17fTtcIm51bWJlclwiPT10eXBlb2Ygbi5pZGVhbD8oYVtpKFwibWluXCIsdCldPW4uaWRlYWwsci5vcHRpb25hbC5wdXNoKGEpLChhPXt9KVtpKFwibWF4XCIsdCldPW4uaWRlYWwsci5vcHRpb25hbC5wdXNoKGEpKTooYVtpKFwiXCIsdCldPW4uaWRlYWwsci5vcHRpb25hbC5wdXNoKGEpKX12b2lkIDAhPT1uLmV4YWN0JiZcIm51bWJlclwiIT10eXBlb2Ygbi5leGFjdD8oci5tYW5kYXRvcnk9ci5tYW5kYXRvcnl8fHt9LHIubWFuZGF0b3J5W2koXCJcIix0KV09bi5leGFjdCk6W1wibWluXCIsXCJtYXhcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2b2lkIDAhPT1uW2VdJiYoci5tYW5kYXRvcnk9ci5tYW5kYXRvcnl8fHt9LHIubWFuZGF0b3J5W2koZSx0KV09bltlXSl9KX19KSxlLmFkdmFuY2VkJiYoci5vcHRpb25hbD0oci5vcHRpb25hbHx8W10pLmNvbmNhdChlLmFkdmFuY2VkKSkscn0sYz1mdW5jdGlvbihlLHIpe2lmKGkudmVyc2lvbj49NjEpcmV0dXJuIHIoZSk7aWYoKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpJiZcIm9iamVjdFwiPT09byhlLmF1ZGlvKSl7dmFyIGM9ZnVuY3Rpb24oZSxyLHQpe3IgaW4gZSYmISh0IGluIGUpJiYoZVt0XT1lW3JdLGRlbGV0ZSBlW3JdKX07YygoZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSkuYXVkaW8sXCJhdXRvR2FpbkNvbnRyb2xcIixcImdvb2dBdXRvR2FpbkNvbnRyb2xcIiksYyhlLmF1ZGlvLFwibm9pc2VTdXBwcmVzc2lvblwiLFwiZ29vZ05vaXNlU3VwcHJlc3Npb25cIiksZS5hdWRpbz1hKGUuYXVkaW8pfWlmKGUmJlwib2JqZWN0XCI9PT1vKGUudmlkZW8pKXt2YXIgZD1lLnZpZGVvLmZhY2luZ01vZGU7ZD1kJiYoXCJvYmplY3RcIj09PW8oZCk/ZDp7aWRlYWw6ZH0pO3ZhciB1LHM9aS52ZXJzaW9uPDY2O2lmKGQmJihcInVzZXJcIj09PWQuZXhhY3R8fFwiZW52aXJvbm1lbnRcIj09PWQuZXhhY3R8fFwidXNlclwiPT09ZC5pZGVhbHx8XCJlbnZpcm9ubWVudFwiPT09ZC5pZGVhbCkmJighdC5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHN8fCF0Lm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLmZhY2luZ01vZGV8fHMpKWlmKGRlbGV0ZSBlLnZpZGVvLmZhY2luZ01vZGUsXCJlbnZpcm9ubWVudFwiPT09ZC5leGFjdHx8XCJlbnZpcm9ubWVudFwiPT09ZC5pZGVhbD91PVtcImJhY2tcIixcInJlYXJcIl06XCJ1c2VyXCIhPT1kLmV4YWN0JiZcInVzZXJcIiE9PWQuaWRlYWx8fCh1PVtcImZyb250XCJdKSx1KXJldHVybiB0Lm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkudGhlbihmdW5jdGlvbih0KXt2YXIgbz0odD10LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInZpZGVvaW5wdXRcIj09PWUua2luZH0pKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiB1LnNvbWUoZnVuY3Rpb24ocil7cmV0dXJuIGUubGFiZWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhyKX0pfSk7cmV0dXJuIW8mJnQubGVuZ3RoJiZ1LmluY2x1ZGVzKFwiYmFja1wiKSYmKG89dFt0Lmxlbmd0aC0xXSksbyYmKGUudmlkZW8uZGV2aWNlSWQ9ZC5leGFjdD97ZXhhY3Q6by5kZXZpY2VJZH06e2lkZWFsOm8uZGV2aWNlSWR9KSxlLnZpZGVvPWEoZS52aWRlbyksbihcImNocm9tZTogXCIrSlNPTi5zdHJpbmdpZnkoZSkpLHIoZSl9KTtlLnZpZGVvPWEoZS52aWRlbyl9cmV0dXJuIG4oXCJjaHJvbWU6IFwiK0pTT04uc3RyaW5naWZ5KGUpKSxyKGUpfSxkPWZ1bmN0aW9uKGUpe3JldHVybiBpLnZlcnNpb24+PTY0P2U6e25hbWU6e1Blcm1pc3Npb25EZW5pZWRFcnJvcjpcIk5vdEFsbG93ZWRFcnJvclwiLFBlcm1pc3Npb25EaXNtaXNzZWRFcnJvcjpcIk5vdEFsbG93ZWRFcnJvclwiLEludmFsaWRTdGF0ZUVycm9yOlwiTm90QWxsb3dlZEVycm9yXCIsRGV2aWNlc05vdEZvdW5kRXJyb3I6XCJOb3RGb3VuZEVycm9yXCIsQ29uc3RyYWludE5vdFNhdGlzZmllZEVycm9yOlwiT3ZlcmNvbnN0cmFpbmVkRXJyb3JcIixUcmFja1N0YXJ0RXJyb3I6XCJOb3RSZWFkYWJsZUVycm9yXCIsTWVkaWFEZXZpY2VGYWlsZWREdWVUb1NodXRkb3duOlwiTm90QWxsb3dlZEVycm9yXCIsTWVkaWFEZXZpY2VLaWxsU3dpdGNoT246XCJOb3RBbGxvd2VkRXJyb3JcIixUYWJDYXB0dXJlRXJyb3I6XCJBYm9ydEVycm9yXCIsU2NyZWVuQ2FwdHVyZUVycm9yOlwiQWJvcnRFcnJvclwiLERldmljZUNhcHR1cmVFcnJvcjpcIkFib3J0RXJyb3JcIn1bZS5uYW1lXXx8ZS5uYW1lLG1lc3NhZ2U6ZS5tZXNzYWdlLGNvbnN0cmFpbnQ6ZS5jb25zdHJhaW50fHxlLmNvbnN0cmFpbnROYW1lLHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZSsodGhpcy5tZXNzYWdlJiZcIjogXCIpK3RoaXMubWVzc2FnZX19fTtpZih0LmdldFVzZXJNZWRpYT1mdW5jdGlvbihlLHIsbyl7YyhlLGZ1bmN0aW9uKGUpe3Qud2Via2l0R2V0VXNlck1lZGlhKGUscixmdW5jdGlvbihlKXtvJiZvKGQoZSkpfSl9KX0uYmluZCh0KSx0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpe3ZhciB1PXQubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKHQubWVkaWFEZXZpY2VzKTt0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSl7cmV0dXJuIGMoZSxmdW5jdGlvbihlKXtyZXR1cm4gdShlKS50aGVuKGZ1bmN0aW9uKHIpe2lmKGUuYXVkaW8mJiFyLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RofHxlLnZpZGVvJiYhci5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCl0aHJvdyByLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdG9wKCl9KSxuZXcgRE9NRXhjZXB0aW9uKFwiXCIsXCJOb3RGb3VuZEVycm9yXCIpO3JldHVybiByfSxmdW5jdGlvbihlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZChlKSl9KX0pfX19fVxufSx7XCIuLi91dGlscy5qc1wiOlwiaVN4Q1wifV0sXCJWSGE4XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSxpKXtlLm5hdmlnYXRvci5tZWRpYURldmljZXMmJlwiZ2V0RGlzcGxheU1lZGlhXCJpbiBlLm5hdmlnYXRvci5tZWRpYURldmljZXN8fGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGk/ZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYT1mdW5jdGlvbihhKXtyZXR1cm4gaShhKS50aGVuKGZ1bmN0aW9uKGkpe3ZhciB0PWEudmlkZW8mJmEudmlkZW8ud2lkdGgsbz1hLnZpZGVvJiZhLnZpZGVvLmhlaWdodCxkPWEudmlkZW8mJmEudmlkZW8uZnJhbWVSYXRlO3JldHVybiBhLnZpZGVvPXttYW5kYXRvcnk6e2Nocm9tZU1lZGlhU291cmNlOlwiZGVza3RvcFwiLGNocm9tZU1lZGlhU291cmNlSWQ6aSxtYXhGcmFtZVJhdGU6ZHx8M319LHQmJihhLnZpZGVvLm1hbmRhdG9yeS5tYXhXaWR0aD10KSxvJiYoYS52aWRlby5tYW5kYXRvcnkubWF4SGVpZ2h0PW8pLGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoYSl9KX06Y29uc29sZS5lcnJvcihcInNoaW1HZXREaXNwbGF5TWVkaWE6IGdldFNvdXJjZUlkIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uXCIpKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1HZXREaXNwbGF5TWVkaWE9ZTtcbn0se31dLFwidUk1WFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1NZWRpYVN0cmVhbT1hLGV4cG9ydHMuc2hpbU9uVHJhY2s9YyxleHBvcnRzLnNoaW1HZXRTZW5kZXJzV2l0aER0bWY9cCxleHBvcnRzLnNoaW1HZXRTdGF0cz1kLGV4cG9ydHMuc2hpbVNlbmRlclJlY2VpdmVyR2V0U3RhdHM9aCxleHBvcnRzLnNoaW1BZGRUcmFja1JlbW92ZVRyYWNrV2l0aE5hdGl2ZT1mLGV4cG9ydHMuc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2s9bSxleHBvcnRzLnNoaW1QZWVyQ29ubmVjdGlvbj11LGV4cG9ydHMuZml4TmVnb3RpYXRpb25OZWVkZWQ9bCxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcInNoaW1HZXRVc2VyTWVkaWFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5zaGltR2V0VXNlck1lZGlhfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwic2hpbUdldERpc3BsYXlNZWRpYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiByLnNoaW1HZXREaXNwbGF5TWVkaWF9fSk7dmFyIGU9aShyZXF1aXJlKFwiLi4vdXRpbHMuanNcIikpLHQ9cmVxdWlyZShcIi4vZ2V0dXNlcm1lZGlhXCIpLHI9cmVxdWlyZShcIi4vZ2V0ZGlzcGxheW1lZGlhXCIpO2Z1bmN0aW9uIG4oKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiBuPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gaShlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciB0PW4oKTtpZih0JiZ0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dmFyIHI9e30saT1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBvIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbykpe3ZhciBzPWk/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLG8pOm51bGw7cyYmKHMuZ2V0fHxzLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsbyxzKTpyW29dPWVbb119cmV0dXJuIHIuZGVmYXVsdD1lLHQmJnQuc2V0KGUscikscn1mdW5jdGlvbiBvKGUsdCxyKXtyZXR1cm4gdCBpbiBlP09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPXIsZX1mdW5jdGlvbiBzKGUpe3JldHVybihzPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBhKGUpe2UuTWVkaWFTdHJlYW09ZS5NZWRpYVN0cmVhbXx8ZS53ZWJraXRNZWRpYVN0cmVhbX1mdW5jdGlvbiBjKHQpe2lmKFwib2JqZWN0XCIhPT1zKHQpfHwhdC5SVENQZWVyQ29ubmVjdGlvbnx8XCJvbnRyYWNrXCJpbiB0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSllLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHQsXCJ0cmFja1wiLGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyYW5zY2VpdmVyfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcInRyYW5zY2VpdmVyXCIse3ZhbHVlOntyZWNlaXZlcjplLnJlY2VpdmVyfX0pLGV9KTtlbHNle09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcIm9udHJhY2tcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29udHJhY2t9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9vbnRyYWNrJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuX29udHJhY2spLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5fb250cmFjaz1lKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KTt2YXIgcj10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjt0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX29udHJhY2twb2x5fHwodGhpcy5fb250cmFja3BvbHk9ZnVuY3Rpb24ocil7ci5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcImFkZHRyYWNrXCIsZnVuY3Rpb24obil7dmFyIGk7aT10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM/ZS5nZXRSZWNlaXZlcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyYWNrJiZlLnRyYWNrLmlkPT09bi50cmFjay5pZH0pOnt0cmFjazpuLnRyYWNrfTt2YXIgbz1uZXcgRXZlbnQoXCJ0cmFja1wiKTtvLnRyYWNrPW4udHJhY2ssby5yZWNlaXZlcj1pLG8udHJhbnNjZWl2ZXI9e3JlY2VpdmVyOml9LG8uc3RyZWFtcz1bci5zdHJlYW1dLGUuZGlzcGF0Y2hFdmVudChvKX0pLHIuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24obil7dmFyIGk7aT10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM/ZS5nZXRSZWNlaXZlcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyYWNrJiZlLnRyYWNrLmlkPT09bi5pZH0pOnt0cmFjazpufTt2YXIgbz1uZXcgRXZlbnQoXCJ0cmFja1wiKTtvLnRyYWNrPW4sby5yZWNlaXZlcj1pLG8udHJhbnNjZWl2ZXI9e3JlY2VpdmVyOml9LG8uc3RyZWFtcz1bci5zdHJlYW1dLGUuZGlzcGF0Y2hFdmVudChvKX0pfSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJhZGRzdHJlYW1cIix0aGlzLl9vbnRyYWNrcG9seSkpLHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19ZnVuY3Rpb24gcChlKXtpZihcIm9iamVjdFwiPT09cyhlKSYmZS5SVENQZWVyQ29ubmVjdGlvbiYmIShcImdldFNlbmRlcnNcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSYmXCJjcmVhdGVEVE1GU2VuZGVyXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSl7dmFyIHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dHJhY2s6dCxnZXQgZHRtZigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9kdG1mJiYoXCJhdWRpb1wiPT09dC5raW5kP3RoaXMuX2R0bWY9ZS5jcmVhdGVEVE1GU2VuZGVyKHQpOnRoaXMuX2R0bWY9bnVsbCksdGhpcy5fZHRtZn0sX3BjOmV9fTtpZighZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycyl7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZW5kZXJzPXRoaXMuX3NlbmRlcnN8fFtdLHRoaXMuX3NlbmRlcnMuc2xpY2UoKX07dmFyIHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSxuKXt2YXIgaT1yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gaXx8KGk9dCh0aGlzLGUpLHRoaXMuX3NlbmRlcnMucHVzaChpKSksaX07dmFyIG49ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s9ZnVuY3Rpb24oZSl7bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9dGhpcy5fc2VuZGVycy5pbmRleE9mKGUpOy0xIT09dCYmdGhpcy5fc2VuZGVycy5zcGxpY2UodCwxKX19dmFyIGk9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbihlKXt2YXIgcj10aGlzO3RoaXMuX3NlbmRlcnM9dGhpcy5fc2VuZGVyc3x8W10saS5hcHBseSh0aGlzLFtlXSksZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IuX3NlbmRlcnMucHVzaCh0KHIsZSkpfSl9O3ZhciBvPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9zZW5kZXJzPXRoaXMuX3NlbmRlcnN8fFtdLG8uYXBwbHkodGhpcyxbZV0pLGUuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10Ll9zZW5kZXJzLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PT1lfSk7ciYmdC5fc2VuZGVycy5zcGxpY2UodC5fc2VuZGVycy5pbmRleE9mKHIpLDEpfSl9fWVsc2UgaWYoXCJvYmplY3RcIj09PXMoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24mJlwiZ2V0U2VuZGVyc1wiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUmJlwiY3JlYXRlRFRNRlNlbmRlclwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUmJmUuUlRDUnRwU2VuZGVyJiYhKFwiZHRtZlwiaW4gZS5SVENSdHBTZW5kZXIucHJvdG90eXBlKSl7dmFyIGE9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWEuYXBwbHkodGhpcyxbXSk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5fcGM9ZX0pLHR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUsXCJkdG1mXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9kdG1mJiYoXCJhdWRpb1wiPT09dGhpcy50cmFjay5raW5kP3RoaXMuX2R0bWY9dGhpcy5fcGMuY3JlYXRlRFRNRlNlbmRlcih0aGlzLnRyYWNrKTp0aGlzLl9kdG1mPW51bGwpLHRoaXMuX2R0bWZ9fSl9fWZ1bmN0aW9uIGQoZSl7aWYoZS5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLFtyLG4saV09YXJndW1lbnRzO2lmKGFyZ3VtZW50cy5sZW5ndGg+MCYmXCJmdW5jdGlvblwiPT10eXBlb2YgcilyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoMD09PXQubGVuZ3RoJiYoMD09PWFyZ3VtZW50cy5sZW5ndGh8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHIpKXJldHVybiB0LmFwcGx5KHRoaXMsW10pO3ZhciBvPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiBlLnJlc3VsdCgpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9e2lkOmUuaWQsdGltZXN0YW1wOmUudGltZXN0YW1wLHR5cGU6e2xvY2FsY2FuZGlkYXRlOlwibG9jYWwtY2FuZGlkYXRlXCIscmVtb3RlY2FuZGlkYXRlOlwicmVtb3RlLWNhbmRpZGF0ZVwifVtlLnR5cGVdfHxlLnR5cGV9O2UubmFtZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JbdF09ZS5zdGF0KHQpfSksdFtyLmlkXT1yfSksdH0scz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IE1hcChPYmplY3Qua2V5cyhlKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuW3QsZVt0XV19KSl9O2lmKGFyZ3VtZW50cy5sZW5ndGg+PTIpe3JldHVybiB0LmFwcGx5KHRoaXMsW2Z1bmN0aW9uKGUpe24ocyhvKGUpKSl9LHJdKX1yZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocixuKXt0LmFwcGx5KGUsW2Z1bmN0aW9uKGUpe3IocyhvKGUpKSl9LG5dKX0pLnRoZW4obixpKX19fWZ1bmN0aW9uIGgodCl7aWYoXCJvYmplY3RcIj09PXModCkmJnQuUlRDUGVlckNvbm5lY3Rpb24mJnQuUlRDUnRwU2VuZGVyJiZ0LlJUQ1J0cFJlY2VpdmVyKXtpZighKFwiZ2V0U3RhdHNcImluIHQuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpe3ZhciByPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM7ciYmKHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ci5hcHBseSh0aGlzLFtdKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0Ll9wYz1lfSksdH0pO3ZhciBuPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO24mJih0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbigpe3ZhciBlPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBlLl9wYz10aGlzLGV9KSx0LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9wYy5nZXRTdGF0cygpLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJuIGUuZmlsdGVyU3RhdHMocix0LnRyYWNrLCEwKX0pfX1pZighKFwiZ2V0U3RhdHNcImluIHQuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKSl7dmFyIGk9dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzO2kmJih0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9aS5hcHBseSh0aGlzLFtdKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0Ll9wYz1lfSksdH0pLGUud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQodCxcInRyYWNrXCIsZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVjZWl2ZXIuX3BjPWUuc3JjRWxlbWVudCxlfSksdC5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9wYy5nZXRTdGF0cygpLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJuIGUuZmlsdGVyU3RhdHMocix0LnRyYWNrLCExKX0pfX1pZihcImdldFN0YXRzXCJpbiB0LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUmJlwiZ2V0U3RhdHNcImluIHQuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKXt2YXIgbz10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0czt0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB0Lk1lZGlhU3RyZWFtVHJhY2spe3ZhciBlLHIsbixpPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0LnRyYWNrPT09aSYmKGU/bj0hMDplPXQpfSksdGhpcy5nZXRSZWNlaXZlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyYWNrPT09aSYmKHI/bj0hMDpyPWUpLGUudHJhY2s9PT1pfSksbnx8ZSYmcj9Qcm9taXNlLnJlamVjdChuZXcgRE9NRXhjZXB0aW9uKFwiVGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgc2VuZGVyIG9yIHJlY2VpdmVyIGZvciB0aGUgdHJhY2suXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIikpOmU/ZS5nZXRTdGF0cygpOnI/ci5nZXRTdGF0cygpOlByb21pc2UucmVqZWN0KG5ldyBET01FeGNlcHRpb24oXCJUaGVyZSBpcyBubyBzZW5kZXIgb3IgcmVjZWl2ZXIgZm9yIHRoZSB0cmFjay5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKSl9cmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX19fWZ1bmN0aW9uIGYoZSl7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcz10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zfHx7fSxPYmplY3Qua2V5cyh0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGUuX3NoaW1tZWRMb2NhbFN0cmVhbXNbdF1bMF19KX07dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSxyKXtpZighcilyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcz10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zfHx7fTt2YXIgbj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tyLmlkXT8tMT09PXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbci5pZF0uaW5kZXhPZihuKSYmdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tyLmlkXS5wdXNoKG4pOnRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbci5pZF09W3Isbl0sbn07dmFyIHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXM9dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc3x8e30sZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKHQuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PT1lfSkpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlRyYWNrIGFscmVhZHkgZXhpc3RzLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpfSk7dmFyIG49dGhpcy5nZXRTZW5kZXJzKCk7ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGk9dGhpcy5nZXRTZW5kZXJzKCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybi0xPT09bi5pbmRleE9mKGUpfSk7dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tlLmlkXT1bZV0uY29uY2F0KGkpfTt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXN8fHt9LGRlbGV0ZSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW2UuaWRdLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfTt2YXIgaT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXN8fHt9LGUmJk9iamVjdC5rZXlzKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fc2hpbW1lZExvY2FsU3RyZWFtc1tyXS5pbmRleE9mKGUpOy0xIT09biYmdC5fc2hpbW1lZExvY2FsU3RyZWFtc1tyXS5zcGxpY2UobiwxKSwxPT09dC5fc2hpbW1lZExvY2FsU3RyZWFtc1tyXS5sZW5ndGgmJmRlbGV0ZSB0Ll9zaGltbWVkTG9jYWxTdHJlYW1zW3JdfSksaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIG0odCl7aWYodC5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHI9ZS5kZXRlY3RCcm93c2VyKHQpO2lmKHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrJiZyLnZlcnNpb24+PTY1KXJldHVybiBmKHQpO3ZhciBuPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtczt0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bi5hcHBseSh0aGlzKTtyZXR1cm4gdGhpcy5fcmV2ZXJzZVN0cmVhbXM9dGhpcy5fcmV2ZXJzZVN0cmVhbXN8fHt9LHQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9yZXZlcnNlU3RyZWFtc1t0LmlkXX0pfTt2YXIgaT10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciByPXRoaXM7aWYodGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSx0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e30sZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKHIuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PT1lfSkpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlRyYWNrIGFscmVhZHkgZXhpc3RzLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpfSksIXRoaXMuX3JldmVyc2VTdHJlYW1zW2UuaWRdKXt2YXIgbj1uZXcgdC5NZWRpYVN0cmVhbShlLmdldFRyYWNrcygpKTt0aGlzLl9zdHJlYW1zW2UuaWRdPW4sdGhpcy5fcmV2ZXJzZVN0cmVhbXNbbi5pZF09ZSxlPW59aS5hcHBseSh0aGlzLFtlXSl9O3ZhciBzPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbTt0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSx0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e30scy5hcHBseSh0aGlzLFt0aGlzLl9zdHJlYW1zW2UuaWRdfHxlXSksZGVsZXRlIHRoaXMuX3JldmVyc2VTdHJlYW1zW3RoaXMuX3N0cmVhbXNbZS5pZF0/dGhpcy5fc3RyZWFtc1tlLmlkXS5pZDplLmlkXSxkZWxldGUgdGhpcy5fc3RyZWFtc1tlLmlkXX0sdC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSxyKXt2YXIgbj10aGlzO2lmKFwiY2xvc2VkXCI9PT10aGlzLnNpZ25hbGluZ1N0YXRlKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUaGUgUlRDUGVlckNvbm5lY3Rpb24ncyBzaWduYWxpbmdTdGF0ZSBpcyAnY2xvc2VkJy5cIixcIkludmFsaWRTdGF0ZUVycm9yXCIpO3ZhciBpPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKDEhPT1pLmxlbmd0aHx8IWlbMF0uZ2V0VHJhY2tzKCkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdD09PWV9KSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVGhlIGFkYXB0ZXIuanMgYWRkVHJhY2sgcG9seWZpbGwgb25seSBzdXBwb3J0cyBhIHNpbmdsZSAgc3RyZWFtIHdoaWNoIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIHRyYWNrLlwiLFwiTm90U3VwcG9ydGVkRXJyb3JcIik7aWYodGhpcy5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFjaz09PWV9KSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVHJhY2sgYWxyZWFkeSBleGlzdHMuXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIik7dGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSx0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e307dmFyIG89dGhpcy5fc3RyZWFtc1tyLmlkXTtpZihvKW8uYWRkVHJhY2soZSksUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe24uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJuZWdvdGlhdGlvbm5lZWRlZFwiKSl9KTtlbHNle3ZhciBzPW5ldyB0Lk1lZGlhU3RyZWFtKFtlXSk7dGhpcy5fc3RyZWFtc1tyLmlkXT1zLHRoaXMuX3JldmVyc2VTdHJlYW1zW3MuaWRdPXIsdGhpcy5hZGRTdHJlYW0ocyl9cmV0dXJuIHRoaXMuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PT1lfSl9LFtcImNyZWF0ZU9mZmVyXCIsXCJjcmVhdGVBbnN3ZXJcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVtlXSxuPW8oe30sZSxmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHM7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1swXT9yLmFwcGx5KHRoaXMsW2Z1bmN0aW9uKHIpe3ZhciBuPXAoZSxyKTt0WzBdLmFwcGx5KG51bGwsW25dKX0sZnVuY3Rpb24oZSl7dFsxXSYmdFsxXS5hcHBseShudWxsLGUpfSxhcmd1bWVudHNbMl1dKTpyLmFwcGx5KHRoaXMsYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBwKGUsdCl9KX0pO3QuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW2VdPW5bZV19KTt2YXIgYT10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uO3QuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb249ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCYmYXJndW1lbnRzWzBdLnR5cGU/KGFyZ3VtZW50c1swXT0oZT10aGlzLHQ9YXJndW1lbnRzWzBdLHI9dC5zZHAsT2JqZWN0LmtleXMoZS5fcmV2ZXJzZVN0cmVhbXN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWUuX3JldmVyc2VTdHJlYW1zW3RdLGk9ZS5fc3RyZWFtc1tuLmlkXTtyPXIucmVwbGFjZShuZXcgUmVnRXhwKG4uaWQsXCJnXCIpLGkuaWQpfSksbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTp0LnR5cGUsc2RwOnJ9KSksYS5hcHBseSh0aGlzLGFyZ3VtZW50cykpOmEuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlLHQscn07dmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcImxvY2FsRGVzY3JpcHRpb25cIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwibG9jYWxEZXNjcmlwdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT1jLmdldC5hcHBseSh0aGlzKTtyZXR1cm5cIlwiPT09ZS50eXBlP2U6cCh0aGlzLGUpfX0pLHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZihcImNsb3NlZFwiPT09dGhpcy5zaWduYWxpbmdTdGF0ZSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVGhlIFJUQ1BlZXJDb25uZWN0aW9uJ3Mgc2lnbmFsaW5nU3RhdGUgaXMgJ2Nsb3NlZCcuXCIsXCJJbnZhbGlkU3RhdGVFcnJvclwiKTtpZighZS5fcGMpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIkFyZ3VtZW50IDEgb2YgUlRDUGVlckNvbm5lY3Rpb24ucmVtb3ZlVHJhY2sgZG9lcyBub3QgaW1wbGVtZW50IGludGVyZmFjZSBSVENSdHBTZW5kZXIuXCIsXCJUeXBlRXJyb3JcIik7aWYoIShlLl9wYz09PXRoaXMpKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJTZW5kZXIgd2FzIG5vdCBjcmVhdGVkIGJ5IHRoaXMgY29ubmVjdGlvbi5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKTt0aGlzLl9zdHJlYW1zPXRoaXMuX3N0cmVhbXN8fHt9LE9iamVjdC5rZXlzKHRoaXMuX3N0cmVhbXMpLmZvckVhY2goZnVuY3Rpb24obil7ci5fc3RyZWFtc1tuXS5nZXRUcmFja3MoKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWNrPT09dH0pJiYodD1yLl9zdHJlYW1zW25dKX0pLHQmJigxPT09dC5nZXRUcmFja3MoKS5sZW5ndGg/dGhpcy5yZW1vdmVTdHJlYW0odGhpcy5fcmV2ZXJzZVN0cmVhbXNbdC5pZF0pOnQucmVtb3ZlVHJhY2soZS50cmFjayksdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcIm5lZ290aWF0aW9ubmVlZGVkXCIpKSl9fWZ1bmN0aW9uIHAoZSx0KXt2YXIgcj10LnNkcDtyZXR1cm4gT2JqZWN0LmtleXMoZS5fcmV2ZXJzZVN0cmVhbXN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWUuX3JldmVyc2VTdHJlYW1zW3RdLGk9ZS5fc3RyZWFtc1tuLmlkXTtyPXIucmVwbGFjZShuZXcgUmVnRXhwKGkuaWQsXCJnXCIpLG4uaWQpfSksbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTp0LnR5cGUsc2RwOnJ9KX19ZnVuY3Rpb24gdSh0KXt2YXIgcj1lLmRldGVjdEJyb3dzZXIodCk7aWYoIXQuUlRDUGVlckNvbm5lY3Rpb24mJnQud2Via2l0UlRDUGVlckNvbm5lY3Rpb24mJih0LlJUQ1BlZXJDb25uZWN0aW9uPXQud2Via2l0UlRDUGVlckNvbm5lY3Rpb24pLHQuUlRDUGVlckNvbm5lY3Rpb24pe3IudmVyc2lvbjw1MyYmW1wic2V0TG9jYWxEZXNjcmlwdGlvblwiLFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIixcImFkZEljZUNhbmRpZGF0ZVwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW2VdLG49byh7fSxlLGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT1uZXcoXCJhZGRJY2VDYW5kaWRhdGVcIj09PWU/dC5SVENJY2VDYW5kaWRhdGU6dC5SVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSksci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTt0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVtlXT1uW2VdfSk7dmFyIG49dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO3QuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF0/ci52ZXJzaW9uPDc4JiZhcmd1bWVudHNbMF0mJlwiXCI9PT1hcmd1bWVudHNbMF0uY2FuZGlkYXRlP1Byb21pc2UucmVzb2x2ZSgpOm4uYXBwbHkodGhpcyxhcmd1bWVudHMpOihhcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXS5hcHBseShudWxsKSxQcm9taXNlLnJlc29sdmUoKSl9fX1mdW5jdGlvbiBsKHQpe2Uud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQodCxcIm5lZ290aWF0aW9ubmVlZGVkXCIsZnVuY3Rpb24oZSl7aWYoXCJzdGFibGVcIj09PWUudGFyZ2V0LnNpZ25hbGluZ1N0YXRlKXJldHVybiBlfSl9XG59LHtcIi4uL3V0aWxzLmpzXCI6XCJpU3hDXCIsXCIuL2dldHVzZXJtZWRpYVwiOlwiczZTTlwiLFwiLi9nZXRkaXNwbGF5bWVkaWFcIjpcIlZIYThcIn1dLFwiTloxQ1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmZpbHRlckljZVNlcnZlcnM9bjt2YXIgcj10KHJlcXVpcmUoXCIuLi91dGlsc1wiKSk7ZnVuY3Rpb24gZSgpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIHI9bmV3IFdlYWtNYXA7cmV0dXJuIGU9ZnVuY3Rpb24oKXtyZXR1cm4gcn0scn1mdW5jdGlvbiB0KHIpe2lmKHImJnIuX19lc01vZHVsZSlyZXR1cm4gcjtpZihudWxsPT09cnx8XCJvYmplY3RcIiE9dHlwZW9mIHImJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHIpcmV0dXJue2RlZmF1bHQ6cn07dmFyIHQ9ZSgpO2lmKHQmJnQuaGFzKHIpKXJldHVybiB0LmdldChyKTt2YXIgbj17fSx1PU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIGkgaW4gcilpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixpKSl7dmFyIGY9dT9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHIsaSk6bnVsbDtmJiYoZi5nZXR8fGYuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkobixpLGYpOm5baV09cltpXX1yZXR1cm4gbi5kZWZhdWx0PXIsdCYmdC5zZXQocixuKSxufWZ1bmN0aW9uIG4oZSx0KXt2YXIgbj0hMTtyZXR1cm4oZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSkuZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKGUmJihlLnVybHN8fGUudXJsKSl7dmFyIHQ9ZS51cmxzfHxlLnVybDtlLnVybCYmIWUudXJscyYmci5kZXByZWNhdGVkKFwiUlRDSWNlU2VydmVyLnVybFwiLFwiUlRDSWNlU2VydmVyLnVybHNcIik7dmFyIHU9XCJzdHJpbmdcIj09dHlwZW9mIHQ7cmV0dXJuIHUmJih0PVt0XSksdD10LmZpbHRlcihmdW5jdGlvbihyKXtpZigwPT09ci5pbmRleE9mKFwic3R1bjpcIikpcmV0dXJuITE7dmFyIGU9ci5zdGFydHNXaXRoKFwidHVyblwiKSYmIXIuc3RhcnRzV2l0aChcInR1cm46W1wiKSYmci5pbmNsdWRlcyhcInRyYW5zcG9ydD11ZHBcIik7cmV0dXJuIGUmJiFuPyhuPSEwLCEwKTplJiYhbn0pLGRlbGV0ZSBlLnVybCxlLnVybHM9dT90WzBdOnQsISF0Lmxlbmd0aH19KX1cbn0se1wiLi4vdXRpbHNcIjpcImlTeENcIn1dLFwiWUh2aFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgcj17Z2VuZXJhdGVJZGVudGlmaWVyOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLDEwKX19O3IubG9jYWxDTmFtZT1yLmdlbmVyYXRlSWRlbnRpZmllcigpLHIuc3BsaXRMaW5lcz1mdW5jdGlvbihyKXtyZXR1cm4gci50cmltKCkuc3BsaXQoXCJcXG5cIikubWFwKGZ1bmN0aW9uKHIpe3JldHVybiByLnRyaW0oKX0pfSxyLnNwbGl0U2VjdGlvbnM9ZnVuY3Rpb24ocil7cmV0dXJuIHIuc3BsaXQoXCJcXG5tPVwiKS5tYXAoZnVuY3Rpb24ocixlKXtyZXR1cm4oZT4wP1wibT1cIityOnIpLnRyaW0oKStcIlxcclxcblwifSl9LHIuZ2V0RGVzY3JpcHRpb249ZnVuY3Rpb24oZSl7dmFyIHQ9ci5zcGxpdFNlY3Rpb25zKGUpO3JldHVybiB0JiZ0WzBdfSxyLmdldE1lZGlhU2VjdGlvbnM9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5zcGxpdFNlY3Rpb25zKGUpO3JldHVybiB0LnNoaWZ0KCksdH0sci5tYXRjaFByZWZpeD1mdW5jdGlvbihlLHQpe3JldHVybiByLnNwbGl0TGluZXMoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiAwPT09ci5pbmRleE9mKHQpfSl9LHIucGFyc2VDYW5kaWRhdGU9ZnVuY3Rpb24ocil7Zm9yKHZhciBlLHQ9e2ZvdW5kYXRpb246KGU9MD09PXIuaW5kZXhPZihcImE9Y2FuZGlkYXRlOlwiKT9yLnN1YnN0cmluZygxMikuc3BsaXQoXCIgXCIpOnIuc3Vic3RyaW5nKDEwKS5zcGxpdChcIiBcIikpWzBdLGNvbXBvbmVudDpwYXJzZUludChlWzFdLDEwKSxwcm90b2NvbDplWzJdLnRvTG93ZXJDYXNlKCkscHJpb3JpdHk6cGFyc2VJbnQoZVszXSwxMCksaXA6ZVs0XSxhZGRyZXNzOmVbNF0scG9ydDpwYXJzZUludChlWzVdLDEwKSx0eXBlOmVbN119LG49ODtuPGUubGVuZ3RoO24rPTIpc3dpdGNoKGVbbl0pe2Nhc2VcInJhZGRyXCI6dC5yZWxhdGVkQWRkcmVzcz1lW24rMV07YnJlYWs7Y2FzZVwicnBvcnRcIjp0LnJlbGF0ZWRQb3J0PXBhcnNlSW50KGVbbisxXSwxMCk7YnJlYWs7Y2FzZVwidGNwdHlwZVwiOnQudGNwVHlwZT1lW24rMV07YnJlYWs7Y2FzZVwidWZyYWdcIjp0LnVmcmFnPWVbbisxXSx0LnVzZXJuYW1lRnJhZ21lbnQ9ZVtuKzFdO2JyZWFrO2RlZmF1bHQ6dFtlW25dXT1lW24rMV19cmV0dXJuIHR9LHIud3JpdGVDYW5kaWRhdGU9ZnVuY3Rpb24ocil7dmFyIGU9W107ZS5wdXNoKHIuZm91bmRhdGlvbiksZS5wdXNoKHIuY29tcG9uZW50KSxlLnB1c2goci5wcm90b2NvbC50b1VwcGVyQ2FzZSgpKSxlLnB1c2goci5wcmlvcml0eSksZS5wdXNoKHIuYWRkcmVzc3x8ci5pcCksZS5wdXNoKHIucG9ydCk7dmFyIHQ9ci50eXBlO3JldHVybiBlLnB1c2goXCJ0eXBcIiksZS5wdXNoKHQpLFwiaG9zdFwiIT09dCYmci5yZWxhdGVkQWRkcmVzcyYmci5yZWxhdGVkUG9ydCYmKGUucHVzaChcInJhZGRyXCIpLGUucHVzaChyLnJlbGF0ZWRBZGRyZXNzKSxlLnB1c2goXCJycG9ydFwiKSxlLnB1c2goci5yZWxhdGVkUG9ydCkpLHIudGNwVHlwZSYmXCJ0Y3BcIj09PXIucHJvdG9jb2wudG9Mb3dlckNhc2UoKSYmKGUucHVzaChcInRjcHR5cGVcIiksZS5wdXNoKHIudGNwVHlwZSkpLChyLnVzZXJuYW1lRnJhZ21lbnR8fHIudWZyYWcpJiYoZS5wdXNoKFwidWZyYWdcIiksZS5wdXNoKHIudXNlcm5hbWVGcmFnbWVudHx8ci51ZnJhZykpLFwiY2FuZGlkYXRlOlwiK2Uuam9pbihcIiBcIil9LHIucGFyc2VJY2VPcHRpb25zPWZ1bmN0aW9uKHIpe3JldHVybiByLnN1YnN0cigxNCkuc3BsaXQoXCIgXCIpfSxyLnBhcnNlUnRwTWFwPWZ1bmN0aW9uKHIpe3ZhciBlPXIuc3Vic3RyKDkpLnNwbGl0KFwiIFwiKSx0PXtwYXlsb2FkVHlwZTpwYXJzZUludChlLnNoaWZ0KCksMTApfTtyZXR1cm4gZT1lWzBdLnNwbGl0KFwiL1wiKSx0Lm5hbWU9ZVswXSx0LmNsb2NrUmF0ZT1wYXJzZUludChlWzFdLDEwKSx0LmNoYW5uZWxzPTM9PT1lLmxlbmd0aD9wYXJzZUludChlWzJdLDEwKToxLHQubnVtQ2hhbm5lbHM9dC5jaGFubmVscyx0fSxyLndyaXRlUnRwTWFwPWZ1bmN0aW9uKHIpe3ZhciBlPXIucGF5bG9hZFR5cGU7dm9pZCAwIT09ci5wcmVmZXJyZWRQYXlsb2FkVHlwZSYmKGU9ci5wcmVmZXJyZWRQYXlsb2FkVHlwZSk7dmFyIHQ9ci5jaGFubmVsc3x8ci5udW1DaGFubmVsc3x8MTtyZXR1cm5cImE9cnRwbWFwOlwiK2UrXCIgXCIrci5uYW1lK1wiL1wiK3IuY2xvY2tSYXRlKygxIT09dD9cIi9cIit0OlwiXCIpK1wiXFxyXFxuXCJ9LHIucGFyc2VFeHRtYXA9ZnVuY3Rpb24ocil7dmFyIGU9ci5zdWJzdHIoOSkuc3BsaXQoXCIgXCIpO3JldHVybntpZDpwYXJzZUludChlWzBdLDEwKSxkaXJlY3Rpb246ZVswXS5pbmRleE9mKFwiL1wiKT4wP2VbMF0uc3BsaXQoXCIvXCIpWzFdOlwic2VuZHJlY3ZcIix1cmk6ZVsxXX19LHIud3JpdGVFeHRtYXA9ZnVuY3Rpb24ocil7cmV0dXJuXCJhPWV4dG1hcDpcIisoci5pZHx8ci5wcmVmZXJyZWRJZCkrKHIuZGlyZWN0aW9uJiZcInNlbmRyZWN2XCIhPT1yLmRpcmVjdGlvbj9cIi9cIityLmRpcmVjdGlvbjpcIlwiKStcIiBcIityLnVyaStcIlxcclxcblwifSxyLnBhcnNlRm10cD1mdW5jdGlvbihyKXtmb3IodmFyIGUsdD17fSxuPXIuc3Vic3RyKHIuaW5kZXhPZihcIiBcIikrMSkuc3BsaXQoXCI7XCIpLGE9MDthPG4ubGVuZ3RoO2ErKyl0WyhlPW5bYV0udHJpbSgpLnNwbGl0KFwiPVwiKSlbMF0udHJpbSgpXT1lWzFdO3JldHVybiB0fSxyLndyaXRlRm10cD1mdW5jdGlvbihyKXt2YXIgZT1cIlwiLHQ9ci5wYXlsb2FkVHlwZTtpZih2b2lkIDAhPT1yLnByZWZlcnJlZFBheWxvYWRUeXBlJiYodD1yLnByZWZlcnJlZFBheWxvYWRUeXBlKSxyLnBhcmFtZXRlcnMmJk9iamVjdC5rZXlzKHIucGFyYW1ldGVycykubGVuZ3RoKXt2YXIgbj1bXTtPYmplY3Qua2V5cyhyLnBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24oZSl7ci5wYXJhbWV0ZXJzW2VdP24ucHVzaChlK1wiPVwiK3IucGFyYW1ldGVyc1tlXSk6bi5wdXNoKGUpfSksZSs9XCJhPWZtdHA6XCIrdCtcIiBcIituLmpvaW4oXCI7XCIpK1wiXFxyXFxuXCJ9cmV0dXJuIGV9LHIucGFyc2VSdGNwRmI9ZnVuY3Rpb24ocil7dmFyIGU9ci5zdWJzdHIoci5pbmRleE9mKFwiIFwiKSsxKS5zcGxpdChcIiBcIik7cmV0dXJue3R5cGU6ZS5zaGlmdCgpLHBhcmFtZXRlcjplLmpvaW4oXCIgXCIpfX0sci53cml0ZVJ0Y3BGYj1mdW5jdGlvbihyKXt2YXIgZT1cIlwiLHQ9ci5wYXlsb2FkVHlwZTtyZXR1cm4gdm9pZCAwIT09ci5wcmVmZXJyZWRQYXlsb2FkVHlwZSYmKHQ9ci5wcmVmZXJyZWRQYXlsb2FkVHlwZSksci5ydGNwRmVlZGJhY2smJnIucnRjcEZlZWRiYWNrLmxlbmd0aCYmci5ydGNwRmVlZGJhY2suZm9yRWFjaChmdW5jdGlvbihyKXtlKz1cImE9cnRjcC1mYjpcIit0K1wiIFwiK3IudHlwZSsoci5wYXJhbWV0ZXImJnIucGFyYW1ldGVyLmxlbmd0aD9cIiBcIityLnBhcmFtZXRlcjpcIlwiKStcIlxcclxcblwifSksZX0sci5wYXJzZVNzcmNNZWRpYT1mdW5jdGlvbihyKXt2YXIgZT1yLmluZGV4T2YoXCIgXCIpLHQ9e3NzcmM6cGFyc2VJbnQoci5zdWJzdHIoNyxlLTcpLDEwKX0sbj1yLmluZGV4T2YoXCI6XCIsZSk7cmV0dXJuIG4+LTE/KHQuYXR0cmlidXRlPXIuc3Vic3RyKGUrMSxuLWUtMSksdC52YWx1ZT1yLnN1YnN0cihuKzEpKTp0LmF0dHJpYnV0ZT1yLnN1YnN0cihlKzEpLHR9LHIucGFyc2VTc3JjR3JvdXA9ZnVuY3Rpb24ocil7dmFyIGU9ci5zdWJzdHIoMTMpLnNwbGl0KFwiIFwiKTtyZXR1cm57c2VtYW50aWNzOmUuc2hpZnQoKSxzc3JjczplLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gcGFyc2VJbnQociwxMCl9KX19LHIuZ2V0TWlkPWZ1bmN0aW9uKGUpe3ZhciB0PXIubWF0Y2hQcmVmaXgoZSxcImE9bWlkOlwiKVswXTtpZih0KXJldHVybiB0LnN1YnN0cig2KX0sci5wYXJzZUZpbmdlcnByaW50PWZ1bmN0aW9uKHIpe3ZhciBlPXIuc3Vic3RyKDE0KS5zcGxpdChcIiBcIik7cmV0dXJue2FsZ29yaXRobTplWzBdLnRvTG93ZXJDYXNlKCksdmFsdWU6ZVsxXX19LHIuZ2V0RHRsc1BhcmFtZXRlcnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57cm9sZTpcImF1dG9cIixmaW5nZXJwcmludHM6ci5tYXRjaFByZWZpeChlK3QsXCJhPWZpbmdlcnByaW50OlwiKS5tYXAoci5wYXJzZUZpbmdlcnByaW50KX19LHIud3JpdGVEdGxzUGFyYW1ldGVycz1mdW5jdGlvbihyLGUpe3ZhciB0PVwiYT1zZXR1cDpcIitlK1wiXFxyXFxuXCI7cmV0dXJuIHIuZmluZ2VycHJpbnRzLmZvckVhY2goZnVuY3Rpb24ocil7dCs9XCJhPWZpbmdlcnByaW50OlwiK3IuYWxnb3JpdGhtK1wiIFwiK3IudmFsdWUrXCJcXHJcXG5cIn0pLHR9LHIuZ2V0SWNlUGFyYW1ldGVycz1mdW5jdGlvbihlLHQpe3ZhciBuPXIuc3BsaXRMaW5lcyhlKTtyZXR1cm57dXNlcm5hbWVGcmFnbWVudDoobj1uLmNvbmNhdChyLnNwbGl0TGluZXModCkpKS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIDA9PT1yLmluZGV4T2YoXCJhPWljZS11ZnJhZzpcIil9KVswXS5zdWJzdHIoMTIpLHBhc3N3b3JkOm4uZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiAwPT09ci5pbmRleE9mKFwiYT1pY2UtcHdkOlwiKX0pWzBdLnN1YnN0cigxMCl9fSxyLndyaXRlSWNlUGFyYW1ldGVycz1mdW5jdGlvbihyKXtyZXR1cm5cImE9aWNlLXVmcmFnOlwiK3IudXNlcm5hbWVGcmFnbWVudCtcIlxcclxcbmE9aWNlLXB3ZDpcIityLnBhc3N3b3JkK1wiXFxyXFxuXCJ9LHIucGFyc2VSdHBQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD17Y29kZWNzOltdLGhlYWRlckV4dGVuc2lvbnM6W10sZmVjTWVjaGFuaXNtczpbXSxydGNwOltdfSxuPXIuc3BsaXRMaW5lcyhlKVswXS5zcGxpdChcIiBcIiksYT0zO2E8bi5sZW5ndGg7YSsrKXt2YXIgcz1uW2FdLGk9ci5tYXRjaFByZWZpeChlLFwiYT1ydHBtYXA6XCIrcytcIiBcIilbMF07aWYoaSl7dmFyIHA9ci5wYXJzZVJ0cE1hcChpKSxjPXIubWF0Y2hQcmVmaXgoZSxcImE9Zm10cDpcIitzK1wiIFwiKTtzd2l0Y2gocC5wYXJhbWV0ZXJzPWMubGVuZ3RoP3IucGFyc2VGbXRwKGNbMF0pOnt9LHAucnRjcEZlZWRiYWNrPXIubWF0Y2hQcmVmaXgoZSxcImE9cnRjcC1mYjpcIitzK1wiIFwiKS5tYXAoci5wYXJzZVJ0Y3BGYiksdC5jb2RlY3MucHVzaChwKSxwLm5hbWUudG9VcHBlckNhc2UoKSl7Y2FzZVwiUkVEXCI6Y2FzZVwiVUxQRkVDXCI6dC5mZWNNZWNoYW5pc21zLnB1c2gocC5uYW1lLnRvVXBwZXJDYXNlKCkpfX19cmV0dXJuIHIubWF0Y2hQcmVmaXgoZSxcImE9ZXh0bWFwOlwiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuaGVhZGVyRXh0ZW5zaW9ucy5wdXNoKHIucGFyc2VFeHRtYXAoZSkpfSksdH0sci53cml0ZVJ0cERlc2NyaXB0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIG49XCJcIjtuKz1cIm09XCIrZStcIiBcIixuKz10LmNvZGVjcy5sZW5ndGg+MD9cIjlcIjpcIjBcIixuKz1cIiBVRFAvVExTL1JUUC9TQVZQRiBcIixuKz10LmNvZGVjcy5tYXAoZnVuY3Rpb24ocil7cmV0dXJuIHZvaWQgMCE9PXIucHJlZmVycmVkUGF5bG9hZFR5cGU/ci5wcmVmZXJyZWRQYXlsb2FkVHlwZTpyLnBheWxvYWRUeXBlfSkuam9pbihcIiBcIikrXCJcXHJcXG5cIixuKz1cImM9SU4gSVA0IDAuMC4wLjBcXHJcXG5cIixuKz1cImE9cnRjcDo5IElOIElQNCAwLjAuMC4wXFxyXFxuXCIsdC5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihlKXtuKz1yLndyaXRlUnRwTWFwKGUpLG4rPXIud3JpdGVGbXRwKGUpLG4rPXIud3JpdGVSdGNwRmIoZSl9KTt2YXIgYT0wO3JldHVybiB0LmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKHIpe3IubWF4cHRpbWU+YSYmKGE9ci5tYXhwdGltZSl9KSxhPjAmJihuKz1cImE9bWF4cHRpbWU6XCIrYStcIlxcclxcblwiKSxuKz1cImE9cnRjcC1tdXhcXHJcXG5cIix0LmhlYWRlckV4dGVuc2lvbnMmJnQuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGUpe24rPXIud3JpdGVFeHRtYXAoZSl9KSxufSxyLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LG49W10sYT1yLnBhcnNlUnRwUGFyYW1ldGVycyhlKSxzPS0xIT09YS5mZWNNZWNoYW5pc21zLmluZGV4T2YoXCJSRURcIiksaT0tMSE9PWEuZmVjTWVjaGFuaXNtcy5pbmRleE9mKFwiVUxQRkVDXCIpLHA9ci5tYXRjaFByZWZpeChlLFwiYT1zc3JjOlwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHIucGFyc2VTc3JjTWVkaWEoZSl9KS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuXCJjbmFtZVwiPT09ci5hdHRyaWJ1dGV9KSxjPXAubGVuZ3RoPjAmJnBbMF0uc3NyYyxvPXIubWF0Y2hQcmVmaXgoZSxcImE9c3NyYy1ncm91cDpGSURcIikubWFwKGZ1bmN0aW9uKHIpe3JldHVybiByLnN1YnN0cigxNykuc3BsaXQoXCIgXCIpLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gcGFyc2VJbnQociwxMCl9KX0pO28ubGVuZ3RoPjAmJm9bMF0ubGVuZ3RoPjEmJm9bMF1bMF09PT1jJiYodD1vWzBdWzFdKSxhLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKHIpe2lmKFwiUlRYXCI9PT1yLm5hbWUudG9VcHBlckNhc2UoKSYmci5wYXJhbWV0ZXJzLmFwdCl7dmFyIGU9e3NzcmM6Yyxjb2RlY1BheWxvYWRUeXBlOnBhcnNlSW50KHIucGFyYW1ldGVycy5hcHQsMTApfTtjJiZ0JiYoZS5ydHg9e3NzcmM6dH0pLG4ucHVzaChlKSxzJiYoKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmZlYz17c3NyYzpjLG1lY2hhbmlzbTppP1wicmVkK3VscGZlY1wiOlwicmVkXCJ9LG4ucHVzaChlKSl9fSksMD09PW4ubGVuZ3RoJiZjJiZuLnB1c2goe3NzcmM6Y30pO3ZhciB1PXIubWF0Y2hQcmVmaXgoZSxcImI9XCIpO3JldHVybiB1Lmxlbmd0aCYmKHU9MD09PXVbMF0uaW5kZXhPZihcImI9VElBUzpcIik/cGFyc2VJbnQodVswXS5zdWJzdHIoNyksMTApOjA9PT11WzBdLmluZGV4T2YoXCJiPUFTOlwiKT8xZTMqcGFyc2VJbnQodVswXS5zdWJzdHIoNSksMTApKi45NS0xNmUzOnZvaWQgMCxuLmZvckVhY2goZnVuY3Rpb24ocil7ci5tYXhCaXRyYXRlPXV9KSksbn0sci5wYXJzZVJ0Y3BQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49ci5tYXRjaFByZWZpeChlLFwiYT1zc3JjOlwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHIucGFyc2VTc3JjTWVkaWEoZSl9KS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuXCJjbmFtZVwiPT09ci5hdHRyaWJ1dGV9KVswXTtuJiYodC5jbmFtZT1uLnZhbHVlLHQuc3NyYz1uLnNzcmMpO3ZhciBhPXIubWF0Y2hQcmVmaXgoZSxcImE9cnRjcC1yc2l6ZVwiKTt0LnJlZHVjZWRTaXplPWEubGVuZ3RoPjAsdC5jb21wb3VuZD0wPT09YS5sZW5ndGg7dmFyIHM9ci5tYXRjaFByZWZpeChlLFwiYT1ydGNwLW11eFwiKTtyZXR1cm4gdC5tdXg9cy5sZW5ndGg+MCx0fSxyLnBhcnNlTXNpZD1mdW5jdGlvbihlKXt2YXIgdCxuPXIubWF0Y2hQcmVmaXgoZSxcImE9bXNpZDpcIik7aWYoMT09PW4ubGVuZ3RoKXJldHVybntzdHJlYW06KHQ9blswXS5zdWJzdHIoNykuc3BsaXQoXCIgXCIpKVswXSx0cmFjazp0WzFdfTt2YXIgYT1yLm1hdGNoUHJlZml4KGUsXCJhPXNzcmM6XCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gci5wYXJzZVNzcmNNZWRpYShlKX0pLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm5cIm1zaWRcIj09PXIuYXR0cmlidXRlfSk7cmV0dXJuIGEubGVuZ3RoPjA/e3N0cmVhbToodD1hWzBdLnZhbHVlLnNwbGl0KFwiIFwiKSlbMF0sdHJhY2s6dFsxXX06dm9pZCAwfSxyLnBhcnNlU2N0cERlc2NyaXB0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0LG49ci5wYXJzZU1MaW5lKGUpLGE9ci5tYXRjaFByZWZpeChlLFwiYT1tYXgtbWVzc2FnZS1zaXplOlwiKTthLmxlbmd0aD4wJiYodD1wYXJzZUludChhWzBdLnN1YnN0cigxOSksMTApKSxpc05hTih0KSYmKHQ9NjU1MzYpO3ZhciBzPXIubWF0Y2hQcmVmaXgoZSxcImE9c2N0cC1wb3J0OlwiKTtpZihzLmxlbmd0aD4wKXJldHVybntwb3J0OnBhcnNlSW50KHNbMF0uc3Vic3RyKDEyKSwxMCkscHJvdG9jb2w6bi5mbXQsbWF4TWVzc2FnZVNpemU6dH07aWYoci5tYXRjaFByZWZpeChlLFwiYT1zY3RwbWFwOlwiKS5sZW5ndGg+MCl7dmFyIGk9ci5tYXRjaFByZWZpeChlLFwiYT1zY3RwbWFwOlwiKVswXS5zdWJzdHIoMTApLnNwbGl0KFwiIFwiKTtyZXR1cm57cG9ydDpwYXJzZUludChpWzBdLDEwKSxwcm90b2NvbDppWzFdLG1heE1lc3NhZ2VTaXplOnR9fX0sci53cml0ZVNjdHBEZXNjcmlwdGlvbj1mdW5jdGlvbihyLGUpe3ZhciB0PVtdO3JldHVybiB0PVwiRFRMUy9TQ1RQXCIhPT1yLnByb3RvY29sP1tcIm09XCIrci5raW5kK1wiIDkgXCIrci5wcm90b2NvbCtcIiBcIitlLnByb3RvY29sK1wiXFxyXFxuXCIsXCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuXCIsXCJhPXNjdHAtcG9ydDpcIitlLnBvcnQrXCJcXHJcXG5cIl06W1wibT1cIityLmtpbmQrXCIgOSBcIityLnByb3RvY29sK1wiIFwiK2UucG9ydCtcIlxcclxcblwiLFwiYz1JTiBJUDQgMC4wLjAuMFxcclxcblwiLFwiYT1zY3RwbWFwOlwiK2UucG9ydCtcIiBcIitlLnByb3RvY29sK1wiIDY1NTM1XFxyXFxuXCJdLHZvaWQgMCE9PWUubWF4TWVzc2FnZVNpemUmJnQucHVzaChcImE9bWF4LW1lc3NhZ2Utc2l6ZTpcIitlLm1heE1lc3NhZ2VTaXplK1wiXFxyXFxuXCIpLHQuam9pbihcIlwiKX0sci5nZW5lcmF0ZVNlc3Npb25JZD1mdW5jdGlvbigpe3JldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc3Vic3RyKDIsMjEpfSxyLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgYT12b2lkIDAhPT10P3Q6MjtyZXR1cm5cInY9MFxcclxcbm89XCIrKG58fFwidGhpc2lzYWRhcHRlcm9ydGNcIikrXCIgXCIrKGV8fHIuZ2VuZXJhdGVTZXNzaW9uSWQoKSkrXCIgXCIrYStcIiBJTiBJUDQgMTI3LjAuMC4xXFxyXFxucz0tXFxyXFxudD0wIDBcXHJcXG5cIn0sci53cml0ZU1lZGlhU2VjdGlvbj1mdW5jdGlvbihlLHQsbixhKXt2YXIgcz1yLndyaXRlUnRwRGVzY3JpcHRpb24oZS5raW5kLHQpO2lmKHMrPXIud3JpdGVJY2VQYXJhbWV0ZXJzKGUuaWNlR2F0aGVyZXIuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkpLHMrPXIud3JpdGVEdGxzUGFyYW1ldGVycyhlLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksXCJvZmZlclwiPT09bj9cImFjdHBhc3NcIjpcImFjdGl2ZVwiKSxzKz1cImE9bWlkOlwiK2UubWlkK1wiXFxyXFxuXCIsZS5kaXJlY3Rpb24/cys9XCJhPVwiK2UuZGlyZWN0aW9uK1wiXFxyXFxuXCI6ZS5ydHBTZW5kZXImJmUucnRwUmVjZWl2ZXI/cys9XCJhPXNlbmRyZWN2XFxyXFxuXCI6ZS5ydHBTZW5kZXI/cys9XCJhPXNlbmRvbmx5XFxyXFxuXCI6ZS5ydHBSZWNlaXZlcj9zKz1cImE9cmVjdm9ubHlcXHJcXG5cIjpzKz1cImE9aW5hY3RpdmVcXHJcXG5cIixlLnJ0cFNlbmRlcil7dmFyIGk9XCJtc2lkOlwiK2EuaWQrXCIgXCIrZS5ydHBTZW5kZXIudHJhY2suaWQrXCJcXHJcXG5cIjtzKz1cImE9XCIraSxzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBcIitpLGUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCIgXCIraSxzKz1cImE9c3NyYy1ncm91cDpGSUQgXCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgXCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiXFxyXFxuXCIpfXJldHVybiBzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBjbmFtZTpcIityLmxvY2FsQ05hbWUrXCJcXHJcXG5cIixlLnJ0cFNlbmRlciYmZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKHMrPVwiYT1zc3JjOlwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIiBjbmFtZTpcIityLmxvY2FsQ05hbWUrXCJcXHJcXG5cIiksc30sci5nZXREaXJlY3Rpb249ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49ci5zcGxpdExpbmVzKGUpLGE9MDthPG4ubGVuZ3RoO2ErKylzd2l0Y2goblthXSl7Y2FzZVwiYT1zZW5kcmVjdlwiOmNhc2VcImE9c2VuZG9ubHlcIjpjYXNlXCJhPXJlY3Zvbmx5XCI6Y2FzZVwiYT1pbmFjdGl2ZVwiOnJldHVybiBuW2FdLnN1YnN0cigyKX1yZXR1cm4gdD9yLmdldERpcmVjdGlvbih0KTpcInNlbmRyZWN2XCJ9LHIuZ2V0S2luZD1mdW5jdGlvbihlKXtyZXR1cm4gci5zcGxpdExpbmVzKGUpWzBdLnNwbGl0KFwiIFwiKVswXS5zdWJzdHIoMil9LHIuaXNSZWplY3RlZD1mdW5jdGlvbihyKXtyZXR1cm5cIjBcIj09PXIuc3BsaXQoXCIgXCIsMilbMV19LHIucGFyc2VNTGluZT1mdW5jdGlvbihlKXt2YXIgdD1yLnNwbGl0TGluZXMoZSlbMF0uc3Vic3RyKDIpLnNwbGl0KFwiIFwiKTtyZXR1cm57a2luZDp0WzBdLHBvcnQ6cGFyc2VJbnQodFsxXSwxMCkscHJvdG9jb2w6dFsyXSxmbXQ6dC5zbGljZSgzKS5qb2luKFwiIFwiKX19LHIucGFyc2VPTGluZT1mdW5jdGlvbihlKXt2YXIgdD1yLm1hdGNoUHJlZml4KGUsXCJvPVwiKVswXS5zdWJzdHIoMikuc3BsaXQoXCIgXCIpO3JldHVybnt1c2VybmFtZTp0WzBdLHNlc3Npb25JZDp0WzFdLHNlc3Npb25WZXJzaW9uOnBhcnNlSW50KHRbMl0sMTApLG5ldFR5cGU6dFszXSxhZGRyZXNzVHlwZTp0WzRdLGFkZHJlc3M6dFs1XX19LHIuaXNWYWxpZFNEUD1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZXx8MD09PWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgdD1yLnNwbGl0TGluZXMoZSksbj0wO248dC5sZW5ndGg7bisrKWlmKHRbbl0ubGVuZ3RoPDJ8fFwiPVwiIT09dFtuXS5jaGFyQXQoMSkpcmV0dXJuITE7cmV0dXJuITB9LFwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJihtb2R1bGUuZXhwb3J0cz1yKTtcbn0se31dLFwiTkoydVwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT1yZXF1aXJlKFwic2RwXCIpO2Z1bmN0aW9uIHQoZSl7cmV0dXJue2luYm91bmRydHA6XCJpbmJvdW5kLXJ0cFwiLG91dGJvdW5kcnRwOlwib3V0Ym91bmQtcnRwXCIsY2FuZGlkYXRlcGFpcjpcImNhbmRpZGF0ZS1wYWlyXCIsbG9jYWxjYW5kaWRhdGU6XCJsb2NhbC1jYW5kaWRhdGVcIixyZW1vdGVjYW5kaWRhdGU6XCJyZW1vdGUtY2FuZGlkYXRlXCJ9W2UudHlwZV18fGUudHlwZX1mdW5jdGlvbiByKHQscixuLGEsaSl7dmFyIHM9ZS53cml0ZVJ0cERlc2NyaXB0aW9uKHQua2luZCxyKTtpZihzKz1lLndyaXRlSWNlUGFyYW1ldGVycyh0LmljZUdhdGhlcmVyLmdldExvY2FsUGFyYW1ldGVycygpKSxzKz1lLndyaXRlRHRsc1BhcmFtZXRlcnModC5kdGxzVHJhbnNwb3J0LmdldExvY2FsUGFyYW1ldGVycygpLFwib2ZmZXJcIj09PW4/XCJhY3RwYXNzXCI6aXx8XCJhY3RpdmVcIikscys9XCJhPW1pZDpcIit0Lm1pZCtcIlxcclxcblwiLHQucnRwU2VuZGVyJiZ0LnJ0cFJlY2VpdmVyP3MrPVwiYT1zZW5kcmVjdlxcclxcblwiOnQucnRwU2VuZGVyP3MrPVwiYT1zZW5kb25seVxcclxcblwiOnQucnRwUmVjZWl2ZXI/cys9XCJhPXJlY3Zvbmx5XFxyXFxuXCI6cys9XCJhPWluYWN0aXZlXFxyXFxuXCIsdC5ydHBTZW5kZXIpe3ZhciBvPXQucnRwU2VuZGVyLl9pbml0aWFsVHJhY2tJZHx8dC5ydHBTZW5kZXIudHJhY2suaWQ7dC5ydHBTZW5kZXIuX2luaXRpYWxUcmFja0lkPW87dmFyIGM9XCJtc2lkOlwiKyhhP2EuaWQ6XCItXCIpK1wiIFwiK28rXCJcXHJcXG5cIjtzKz1cImE9XCIrYyxzKz1cImE9c3NyYzpcIit0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBcIitjLHQuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihzKz1cImE9c3NyYzpcIit0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCIgXCIrYyxzKz1cImE9c3NyYy1ncm91cDpGSUQgXCIrdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgXCIrdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiXFxyXFxuXCIpfXJldHVybiBzKz1cImE9c3NyYzpcIit0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBjbmFtZTpcIitlLmxvY2FsQ05hbWUrXCJcXHJcXG5cIix0LnJ0cFNlbmRlciYmdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKHMrPVwiYT1zc3JjOlwiK3Quc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIiBjbmFtZTpcIitlLmxvY2FsQ05hbWUrXCJcXHJcXG5cIiksc31mdW5jdGlvbiBuKGUsdCl7dmFyIHI9ITE7cmV0dXJuKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmZpbHRlcihmdW5jdGlvbihlKXtpZihlJiYoZS51cmxzfHxlLnVybCkpe3ZhciBuPWUudXJsc3x8ZS51cmw7ZS51cmwmJiFlLnVybHMmJmNvbnNvbGUud2FybihcIlJUQ0ljZVNlcnZlci51cmwgaXMgZGVwcmVjYXRlZCEgVXNlIHVybHMgaW5zdGVhZC5cIik7dmFyIGE9XCJzdHJpbmdcIj09dHlwZW9mIG47cmV0dXJuIGEmJihuPVtuXSksbj1uLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gMD09PWUuaW5kZXhPZihcInR1cm46XCIpJiYtMSE9PWUuaW5kZXhPZihcInRyYW5zcG9ydD11ZHBcIikmJi0xPT09ZS5pbmRleE9mKFwidHVybjpbXCIpJiYhcj8ocj0hMCwhMCk6MD09PWUuaW5kZXhPZihcInN0dW46XCIpJiZ0Pj0xNDM5MyYmLTE9PT1lLmluZGV4T2YoXCI/dHJhbnNwb3J0PXVkcFwiKX0pLGRlbGV0ZSBlLnVybCxlLnVybHM9YT9uWzBdOm4sISFuLmxlbmd0aH19KX1mdW5jdGlvbiBhKGUsdCl7dmFyIHI9e2NvZGVjczpbXSxoZWFkZXJFeHRlbnNpb25zOltdLGZlY01lY2hhbmlzbXM6W119LG49ZnVuY3Rpb24oZSx0KXtlPXBhcnNlSW50KGUsMTApO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKHRbcl0ucGF5bG9hZFR5cGU9PT1lfHx0W3JdLnByZWZlcnJlZFBheWxvYWRUeXBlPT09ZSlyZXR1cm4gdFtyXX0sYT1mdW5jdGlvbihlLHQscixhKXt2YXIgaT1uKGUucGFyYW1ldGVycy5hcHQscikscz1uKHQucGFyYW1ldGVycy5hcHQsYSk7cmV0dXJuIGkmJnMmJmkubmFtZS50b0xvd2VyQ2FzZSgpPT09cy5uYW1lLnRvTG93ZXJDYXNlKCl9O3JldHVybiBlLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKG4pe2Zvcih2YXIgaT0wO2k8dC5jb2RlY3MubGVuZ3RoO2krKyl7dmFyIHM9dC5jb2RlY3NbaV07aWYobi5uYW1lLnRvTG93ZXJDYXNlKCk9PT1zLm5hbWUudG9Mb3dlckNhc2UoKSYmbi5jbG9ja1JhdGU9PT1zLmNsb2NrUmF0ZSl7aWYoXCJydHhcIj09PW4ubmFtZS50b0xvd2VyQ2FzZSgpJiZuLnBhcmFtZXRlcnMmJnMucGFyYW1ldGVycy5hcHQmJiFhKG4scyxlLmNvZGVjcyx0LmNvZGVjcykpY29udGludWU7KHM9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzKSkpLm51bUNoYW5uZWxzPU1hdGgubWluKG4ubnVtQ2hhbm5lbHMscy5udW1DaGFubmVscyksci5jb2RlY3MucHVzaChzKSxzLnJ0Y3BGZWVkYmFjaz1zLnJ0Y3BGZWVkYmFjay5maWx0ZXIoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxuLnJ0Y3BGZWVkYmFjay5sZW5ndGg7dCsrKWlmKG4ucnRjcEZlZWRiYWNrW3RdLnR5cGU9PT1lLnR5cGUmJm4ucnRjcEZlZWRiYWNrW3RdLnBhcmFtZXRlcj09PWUucGFyYW1ldGVyKXJldHVybiEwO3JldHVybiExfSk7YnJlYWt9fX0pLGUuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Zvcih2YXIgbj0wO248dC5oZWFkZXJFeHRlbnNpb25zLmxlbmd0aDtuKyspe3ZhciBhPXQuaGVhZGVyRXh0ZW5zaW9uc1tuXTtpZihlLnVyaT09PWEudXJpKXtyLmhlYWRlckV4dGVuc2lvbnMucHVzaChhKTticmVha319fSkscn1mdW5jdGlvbiBpKGUsdCxyKXtyZXR1cm4tMSE9PXtvZmZlcjp7c2V0TG9jYWxEZXNjcmlwdGlvbjpbXCJzdGFibGVcIixcImhhdmUtbG9jYWwtb2ZmZXJcIl0sc2V0UmVtb3RlRGVzY3JpcHRpb246W1wic3RhYmxlXCIsXCJoYXZlLXJlbW90ZS1vZmZlclwiXX0sYW5zd2VyOntzZXRMb2NhbERlc2NyaXB0aW9uOltcImhhdmUtcmVtb3RlLW9mZmVyXCIsXCJoYXZlLWxvY2FsLXByYW5zd2VyXCJdLHNldFJlbW90ZURlc2NyaXB0aW9uOltcImhhdmUtbG9jYWwtb2ZmZXJcIixcImhhdmUtcmVtb3RlLXByYW5zd2VyXCJdfX1bdF1bZV0uaW5kZXhPZihyKX1mdW5jdGlvbiBzKGUsdCl7dmFyIHI9ZS5nZXRSZW1vdGVDYW5kaWRhdGVzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gdC5mb3VuZGF0aW9uPT09ZS5mb3VuZGF0aW9uJiZ0LmlwPT09ZS5pcCYmdC5wb3J0PT09ZS5wb3J0JiZ0LnByaW9yaXR5PT09ZS5wcmlvcml0eSYmdC5wcm90b2NvbD09PWUucHJvdG9jb2wmJnQudHlwZT09PWUudHlwZX0pO3JldHVybiByfHxlLmFkZFJlbW90ZUNhbmRpZGF0ZSh0KSwhcn1mdW5jdGlvbiBvKGUsdCl7dmFyIHI9bmV3IEVycm9yKHQpO3JldHVybiByLm5hbWU9ZSxyLmNvZGU9e05vdFN1cHBvcnRlZEVycm9yOjksSW52YWxpZFN0YXRlRXJyb3I6MTEsSW52YWxpZEFjY2Vzc0Vycm9yOjE1LFR5cGVFcnJvcjp2b2lkIDAsT3BlcmF0aW9uRXJyb3I6dm9pZCAwfVtlXSxyfW1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGMsZCl7ZnVuY3Rpb24gcChlLHQpe3QuYWRkVHJhY2soZSksdC5kaXNwYXRjaEV2ZW50KG5ldyBjLk1lZGlhU3RyZWFtVHJhY2tFdmVudChcImFkZHRyYWNrXCIse3RyYWNrOmV9KSl9ZnVuY3Rpb24gbChlLHQscixuKXt2YXIgYT1uZXcgRXZlbnQoXCJ0cmFja1wiKTthLnRyYWNrPXQsYS5yZWNlaXZlcj1yLGEudHJhbnNjZWl2ZXI9e3JlY2VpdmVyOnJ9LGEuc3RyZWFtcz1uLGMuc2V0VGltZW91dChmdW5jdGlvbigpe2UuX2Rpc3BhdGNoRXZlbnQoXCJ0cmFja1wiLGEpfSl9dmFyIGY9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcyxhPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihbXCJhZGRFdmVudExpc3RlbmVyXCIsXCJyZW1vdmVFdmVudExpc3RlbmVyXCIsXCJkaXNwYXRjaEV2ZW50XCJdLmZvckVhY2goZnVuY3Rpb24oZSl7cltlXT1hW2VdLmJpbmQoYSl9KSx0aGlzLmNhblRyaWNrbGVJY2VDYW5kaWRhdGVzPW51bGwsdGhpcy5uZWVkTmVnb3RpYXRpb249ITEsdGhpcy5sb2NhbFN0cmVhbXM9W10sdGhpcy5yZW1vdGVTdHJlYW1zPVtdLHRoaXMuX2xvY2FsRGVzY3JpcHRpb249bnVsbCx0aGlzLl9yZW1vdGVEZXNjcmlwdGlvbj1udWxsLHRoaXMuc2lnbmFsaW5nU3RhdGU9XCJzdGFibGVcIix0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZT1cIm5ld1wiLHRoaXMuY29ubmVjdGlvblN0YXRlPVwibmV3XCIsdGhpcy5pY2VHYXRoZXJpbmdTdGF0ZT1cIm5ld1wiLHQ9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0fHx7fSkpLHRoaXMudXNpbmdCdW5kbGU9XCJtYXgtYnVuZGxlXCI9PT10LmJ1bmRsZVBvbGljeSxcIm5lZ290aWF0ZVwiPT09dC5ydGNwTXV4UG9saWN5KXRocm93IG8oXCJOb3RTdXBwb3J0ZWRFcnJvclwiLFwicnRjcE11eFBvbGljeSAnbmVnb3RpYXRlJyBpcyBub3Qgc3VwcG9ydGVkXCIpO3N3aXRjaCh0LnJ0Y3BNdXhQb2xpY3l8fCh0LnJ0Y3BNdXhQb2xpY3k9XCJyZXF1aXJlXCIpLHQuaWNlVHJhbnNwb3J0UG9saWN5KXtjYXNlXCJhbGxcIjpjYXNlXCJyZWxheVwiOmJyZWFrO2RlZmF1bHQ6dC5pY2VUcmFuc3BvcnRQb2xpY3k9XCJhbGxcIn1zd2l0Y2godC5idW5kbGVQb2xpY3kpe2Nhc2VcImJhbGFuY2VkXCI6Y2FzZVwibWF4LWNvbXBhdFwiOmNhc2VcIm1heC1idW5kbGVcIjpicmVhaztkZWZhdWx0OnQuYnVuZGxlUG9saWN5PVwiYmFsYW5jZWRcIn1pZih0LmljZVNlcnZlcnM9bih0LmljZVNlcnZlcnN8fFtdLGQpLHRoaXMuX2ljZUdhdGhlcmVycz1bXSx0LmljZUNhbmRpZGF0ZVBvb2xTaXplKWZvcih2YXIgaT10LmljZUNhbmRpZGF0ZVBvb2xTaXplO2k+MDtpLS0pdGhpcy5faWNlR2F0aGVyZXJzLnB1c2gobmV3IGMuUlRDSWNlR2F0aGVyZXIoe2ljZVNlcnZlcnM6dC5pY2VTZXJ2ZXJzLGdhdGhlclBvbGljeTp0LmljZVRyYW5zcG9ydFBvbGljeX0pKTtlbHNlIHQuaWNlQ2FuZGlkYXRlUG9vbFNpemU9MDt0aGlzLl9jb25maWc9dCx0aGlzLnRyYW5zY2VpdmVycz1bXSx0aGlzLl9zZHBTZXNzaW9uSWQ9ZS5nZW5lcmF0ZVNlc3Npb25JZCgpLHRoaXMuX3NkcFNlc3Npb25WZXJzaW9uPTAsdGhpcy5fZHRsc1JvbGU9dm9pZCAwLHRoaXMuX2lzQ2xvc2VkPSExfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZi5wcm90b3R5cGUsXCJsb2NhbERlc2NyaXB0aW9uXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYWxEZXNjcmlwdGlvbn19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZi5wcm90b3R5cGUsXCJyZW1vdGVEZXNjcmlwdGlvblwiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbW90ZURlc2NyaXB0aW9ufX0pLGYucHJvdG90eXBlLm9uaWNlY2FuZGlkYXRlPW51bGwsZi5wcm90b3R5cGUub25hZGRzdHJlYW09bnVsbCxmLnByb3RvdHlwZS5vbnRyYWNrPW51bGwsZi5wcm90b3R5cGUub25yZW1vdmVzdHJlYW09bnVsbCxmLnByb3RvdHlwZS5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlPW51bGwsZi5wcm90b3R5cGUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9bnVsbCxmLnByb3RvdHlwZS5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1udWxsLGYucHJvdG90eXBlLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2U9bnVsbCxmLnByb3RvdHlwZS5vbm5lZ290aWF0aW9ubmVlZGVkPW51bGwsZi5wcm90b3R5cGUub25kYXRhY2hhbm5lbD1udWxsLGYucHJvdG90eXBlLl9kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGUsdCl7dGhpcy5faXNDbG9zZWR8fCh0aGlzLmRpc3BhdGNoRXZlbnQodCksXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpc1tcIm9uXCIrZV0mJnRoaXNbXCJvblwiK2VdKHQpKX0sZi5wcm90b3R5cGUuX2VtaXRHYXRoZXJpbmdTdGF0ZUNoYW5nZT1mdW5jdGlvbigpe3ZhciBlPW5ldyBFdmVudChcImljZWdhdGhlcmluZ3N0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZVwiLGUpfSxmLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbmZpZ30sZi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYWxTdHJlYW1zfSxmLnByb3RvdHlwZS5nZXRSZW1vdGVTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3RlU3RyZWFtc30sZi5wcm90b3R5cGUuX2NyZWF0ZVRyYW5zY2VpdmVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy50cmFuc2NlaXZlcnMubGVuZ3RoPjAsbj17dHJhY2s6bnVsbCxpY2VHYXRoZXJlcjpudWxsLGljZVRyYW5zcG9ydDpudWxsLGR0bHNUcmFuc3BvcnQ6bnVsbCxsb2NhbENhcGFiaWxpdGllczpudWxsLHJlbW90ZUNhcGFiaWxpdGllczpudWxsLHJ0cFNlbmRlcjpudWxsLHJ0cFJlY2VpdmVyOm51bGwsa2luZDplLG1pZDpudWxsLHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM6bnVsbCxyZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOm51bGwsc3RyZWFtOm51bGwsYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtczpbXSx3YW50UmVjZWl2ZTohMH07aWYodGhpcy51c2luZ0J1bmRsZSYmciluLmljZVRyYW5zcG9ydD10aGlzLnRyYW5zY2VpdmVyc1swXS5pY2VUcmFuc3BvcnQsbi5kdGxzVHJhbnNwb3J0PXRoaXMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQ7ZWxzZXt2YXIgYT10aGlzLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cygpO24uaWNlVHJhbnNwb3J0PWEuaWNlVHJhbnNwb3J0LG4uZHRsc1RyYW5zcG9ydD1hLmR0bHNUcmFuc3BvcnR9cmV0dXJuIHR8fHRoaXMudHJhbnNjZWl2ZXJzLnB1c2gobiksbn0sZi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLl9pc0Nsb3NlZCl0aHJvdyBvKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkF0dGVtcHRlZCB0byBjYWxsIGFkZFRyYWNrIG9uIGEgY2xvc2VkIHBlZXJjb25uZWN0aW9uLlwiKTt2YXIgcjtpZih0aGlzLnRyYW5zY2VpdmVycy5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrPT09ZX0pKXRocm93IG8oXCJJbnZhbGlkQWNjZXNzRXJyb3JcIixcIlRyYWNrIGFscmVhZHkgZXhpc3RzLlwiKTtmb3IodmFyIG49MDtuPHRoaXMudHJhbnNjZWl2ZXJzLmxlbmd0aDtuKyspdGhpcy50cmFuc2NlaXZlcnNbbl0udHJhY2t8fHRoaXMudHJhbnNjZWl2ZXJzW25dLmtpbmQhPT1lLmtpbmR8fChyPXRoaXMudHJhbnNjZWl2ZXJzW25dKTtyZXR1cm4gcnx8KHI9dGhpcy5fY3JlYXRlVHJhbnNjZWl2ZXIoZS5raW5kKSksdGhpcy5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQoKSwtMT09PXRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2YodCkmJnRoaXMubG9jYWxTdHJlYW1zLnB1c2godCksci50cmFjaz1lLHIuc3RyZWFtPXQsci5ydHBTZW5kZXI9bmV3IGMuUlRDUnRwU2VuZGVyKGUsci5kdGxzVHJhbnNwb3J0KSxyLnJ0cFNlbmRlcn0sZi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoZD49MTUwMjUpZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3QuYWRkVHJhY2socixlKX0pO2Vsc2V7dmFyIHI9ZS5jbG9uZSgpO2UuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlLHQpe3ZhciBuPXIuZ2V0VHJhY2tzKClbdF07ZS5hZGRFdmVudExpc3RlbmVyKFwiZW5hYmxlZFwiLGZ1bmN0aW9uKGUpe24uZW5hYmxlZD1lLmVuYWJsZWR9KX0pLHIuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXt0LmFkZFRyYWNrKGUscil9KX19LGYucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2lzQ2xvc2VkKXRocm93IG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQXR0ZW1wdGVkIHRvIGNhbGwgcmVtb3ZlVHJhY2sgb24gYSBjbG9zZWQgcGVlcmNvbm5lY3Rpb24uXCIpO2lmKCEoZSBpbnN0YW5jZW9mIGMuUlRDUnRwU2VuZGVyKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgMSBvZiBSVENQZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayBkb2VzIG5vdCBpbXBsZW1lbnQgaW50ZXJmYWNlIFJUQ1J0cFNlbmRlci5cIik7dmFyIHQ9dGhpcy50cmFuc2NlaXZlcnMuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC5ydHBTZW5kZXI9PT1lfSk7aWYoIXQpdGhyb3cgbyhcIkludmFsaWRBY2Nlc3NFcnJvclwiLFwiU2VuZGVyIHdhcyBub3QgY3JlYXRlZCBieSB0aGlzIGNvbm5lY3Rpb24uXCIpO3ZhciByPXQuc3RyZWFtO3QucnRwU2VuZGVyLnN0b3AoKSx0LnJ0cFNlbmRlcj1udWxsLHQudHJhY2s9bnVsbCx0LnN0cmVhbT1udWxsLC0xPT09dGhpcy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0cmVhbX0pLmluZGV4T2YocikmJnRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2Yocik+LTEmJnRoaXMubG9jYWxTdHJlYW1zLnNwbGljZSh0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHIpLDEpLHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCl9LGYucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10LmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrPT09ZX0pO3ImJnQucmVtb3ZlVHJhY2socil9KX0sZi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuISFlLnJ0cFNlbmRlcn0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5ydHBTZW5kZXJ9KX0sZi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hIWUucnRwUmVjZWl2ZXJ9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUucnRwUmVjZWl2ZXJ9KX0sZi5wcm90b3R5cGUuX2NyZWF0ZUljZUdhdGhlcmVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZih0JiZlPjApcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzWzBdLmljZUdhdGhlcmVyO2lmKHRoaXMuX2ljZUdhdGhlcmVycy5sZW5ndGgpcmV0dXJuIHRoaXMuX2ljZUdhdGhlcmVycy5zaGlmdCgpO3ZhciBuPW5ldyBjLlJUQ0ljZUdhdGhlcmVyKHtpY2VTZXJ2ZXJzOnRoaXMuX2NvbmZpZy5pY2VTZXJ2ZXJzLGdhdGhlclBvbGljeTp0aGlzLl9jb25maWcuaWNlVHJhbnNwb3J0UG9saWN5fSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwic3RhdGVcIix7dmFsdWU6XCJuZXdcIix3cml0YWJsZTohMH0pLHRoaXMudHJhbnNjZWl2ZXJzW2VdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzPVtdLHRoaXMudHJhbnNjZWl2ZXJzW2VdLmJ1ZmZlckNhbmRpZGF0ZXM9ZnVuY3Rpb24odCl7dmFyIGE9IXQuY2FuZGlkYXRlfHwwPT09T2JqZWN0LmtleXModC5jYW5kaWRhdGUpLmxlbmd0aDtuLnN0YXRlPWE/XCJjb21wbGV0ZWRcIjpcImdhdGhlcmluZ1wiLG51bGwhPT1yLnRyYW5zY2VpdmVyc1tlXS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cyYmci50cmFuc2NlaXZlcnNbZV0uYnVmZmVyZWRDYW5kaWRhdGVFdmVudHMucHVzaCh0KX0sbi5hZGRFdmVudExpc3RlbmVyKFwibG9jYWxjYW5kaWRhdGVcIix0aGlzLnRyYW5zY2VpdmVyc1tlXS5idWZmZXJDYW5kaWRhdGVzKSxufSxmLnByb3RvdHlwZS5fZ2F0aGVyPWZ1bmN0aW9uKHQscil7dmFyIG49dGhpcyxhPXRoaXMudHJhbnNjZWl2ZXJzW3JdLmljZUdhdGhlcmVyO2lmKCFhLm9ubG9jYWxjYW5kaWRhdGUpe3ZhciBpPXRoaXMudHJhbnNjZWl2ZXJzW3JdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzO3RoaXMudHJhbnNjZWl2ZXJzW3JdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzPW51bGwsYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9jYWxjYW5kaWRhdGVcIix0aGlzLnRyYW5zY2VpdmVyc1tyXS5idWZmZXJDYW5kaWRhdGVzKSxhLm9ubG9jYWxjYW5kaWRhdGU9ZnVuY3Rpb24oaSl7aWYoIShuLnVzaW5nQnVuZGxlJiZyPjApKXt2YXIgcz1uZXcgRXZlbnQoXCJpY2VjYW5kaWRhdGVcIik7cy5jYW5kaWRhdGU9e3NkcE1pZDp0LHNkcE1MaW5lSW5kZXg6cn07dmFyIG89aS5jYW5kaWRhdGUsYz0hb3x8MD09PU9iamVjdC5rZXlzKG8pLmxlbmd0aDtpZihjKVwibmV3XCIhPT1hLnN0YXRlJiZcImdhdGhlcmluZ1wiIT09YS5zdGF0ZXx8KGEuc3RhdGU9XCJjb21wbGV0ZWRcIik7ZWxzZXtcIm5ld1wiPT09YS5zdGF0ZSYmKGEuc3RhdGU9XCJnYXRoZXJpbmdcIiksby5jb21wb25lbnQ9MSxvLnVmcmFnPWEuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkudXNlcm5hbWVGcmFnbWVudDt2YXIgZD1lLndyaXRlQ2FuZGlkYXRlKG8pO3MuY2FuZGlkYXRlPU9iamVjdC5hc3NpZ24ocy5jYW5kaWRhdGUsZS5wYXJzZUNhbmRpZGF0ZShkKSkscy5jYW5kaWRhdGUuY2FuZGlkYXRlPWQscy5jYW5kaWRhdGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue2NhbmRpZGF0ZTpzLmNhbmRpZGF0ZS5jYW5kaWRhdGUsc2RwTWlkOnMuY2FuZGlkYXRlLnNkcE1pZCxzZHBNTGluZUluZGV4OnMuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgsdXNlcm5hbWVGcmFnbWVudDpzLmNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50fX19dmFyIHA9ZS5nZXRNZWRpYVNlY3Rpb25zKG4uX2xvY2FsRGVzY3JpcHRpb24uc2RwKTtwW3MuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXhdKz1jP1wiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiOlwiYT1cIitzLmNhbmRpZGF0ZS5jYW5kaWRhdGUrXCJcXHJcXG5cIixuLl9sb2NhbERlc2NyaXB0aW9uLnNkcD1lLmdldERlc2NyaXB0aW9uKG4uX2xvY2FsRGVzY3JpcHRpb24uc2RwKStwLmpvaW4oXCJcIik7dmFyIGw9bi50cmFuc2NlaXZlcnMuZXZlcnkoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWNlR2F0aGVyZXImJlwiY29tcGxldGVkXCI9PT1lLmljZUdhdGhlcmVyLnN0YXRlfSk7XCJnYXRoZXJpbmdcIiE9PW4uaWNlR2F0aGVyaW5nU3RhdGUmJihuLmljZUdhdGhlcmluZ1N0YXRlPVwiZ2F0aGVyaW5nXCIsbi5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCkpLGN8fG4uX2Rpc3BhdGNoRXZlbnQoXCJpY2VjYW5kaWRhdGVcIixzKSxsJiYobi5fZGlzcGF0Y2hFdmVudChcImljZWNhbmRpZGF0ZVwiLG5ldyBFdmVudChcImljZWNhbmRpZGF0ZVwiKSksbi5pY2VHYXRoZXJpbmdTdGF0ZT1cImNvbXBsZXRlXCIsbi5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCkpfX0sYy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Eub25sb2NhbGNhbmRpZGF0ZShlKX0pfSwwKX19LGYucHJvdG90eXBlLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgYy5SVENJY2VUcmFuc3BvcnQobnVsbCk7dC5vbmljZXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ZS5fdXBkYXRlSWNlQ29ubmVjdGlvblN0YXRlKCksZS5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCl9O3ZhciByPW5ldyBjLlJUQ0R0bHNUcmFuc3BvcnQodCk7cmV0dXJuIHIub25kdGxzc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtlLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKX0sci5vbmVycm9yPWZ1bmN0aW9uKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJzdGF0ZVwiLHt2YWx1ZTpcImZhaWxlZFwiLHdyaXRhYmxlOiEwfSksZS5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCl9LHtpY2VUcmFuc3BvcnQ6dCxkdGxzVHJhbnNwb3J0OnJ9fSxmLnByb3RvdHlwZS5fZGlzcG9zZUljZUFuZER0bHNUcmFuc3BvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudHJhbnNjZWl2ZXJzW2VdLmljZUdhdGhlcmVyO3QmJihkZWxldGUgdC5vbmxvY2FsY2FuZGlkYXRlLGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tlXS5pY2VHYXRoZXJlcik7dmFyIHI9dGhpcy50cmFuc2NlaXZlcnNbZV0uaWNlVHJhbnNwb3J0O3ImJihkZWxldGUgci5vbmljZXN0YXRlY2hhbmdlLGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tlXS5pY2VUcmFuc3BvcnQpO3ZhciBuPXRoaXMudHJhbnNjZWl2ZXJzW2VdLmR0bHNUcmFuc3BvcnQ7biYmKGRlbGV0ZSBuLm9uZHRsc3N0YXRlY2hhbmdlLGRlbGV0ZSBuLm9uZXJyb3IsZGVsZXRlIHRoaXMudHJhbnNjZWl2ZXJzW2VdLmR0bHNUcmFuc3BvcnQpfSxmLnByb3RvdHlwZS5fdHJhbnNjZWl2ZT1mdW5jdGlvbih0LHIsbil7dmFyIGk9YSh0LmxvY2FsQ2FwYWJpbGl0aWVzLHQucmVtb3RlQ2FwYWJpbGl0aWVzKTtyJiZ0LnJ0cFNlbmRlciYmKGkuZW5jb2RpbmdzPXQuc2VuZEVuY29kaW5nUGFyYW1ldGVycyxpLnJ0Y3A9e2NuYW1lOmUubG9jYWxDTmFtZSxjb21wb3VuZDp0LnJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kfSx0LnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoJiYoaS5ydGNwLnNzcmM9dC5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMpLHQucnRwU2VuZGVyLnNlbmQoaSkpLG4mJnQucnRwUmVjZWl2ZXImJmkuY29kZWNzLmxlbmd0aD4wJiYoXCJ2aWRlb1wiPT09dC5raW5kJiZ0LnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMmJmQ8MTUwMTkmJnQucmVjdkVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2RlbGV0ZSBlLnJ0eH0pLHQucmVjdkVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGg/aS5lbmNvZGluZ3M9dC5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOmkuZW5jb2RpbmdzPVt7fV0saS5ydGNwPXtjb21wb3VuZDp0LnJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kfSx0LnJ0Y3BQYXJhbWV0ZXJzLmNuYW1lJiYoaS5ydGNwLmNuYW1lPXQucnRjcFBhcmFtZXRlcnMuY25hbWUpLHQuc2VuZEVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgmJihpLnJ0Y3Auc3NyYz10LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyksdC5ydHBSZWNlaXZlci5yZWNlaXZlKGkpKX0sZi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbj1mdW5jdGlvbih0KXt2YXIgcixuLHM9dGhpcztpZigtMT09PVtcIm9mZmVyXCIsXCJhbnN3ZXJcIl0uaW5kZXhPZih0LnR5cGUpKXJldHVybiBQcm9taXNlLnJlamVjdChvKFwiVHlwZUVycm9yXCIsJ1Vuc3VwcG9ydGVkIHR5cGUgXCInK3QudHlwZSsnXCInKSk7aWYoIWkoXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsdC50eXBlLHMuc2lnbmFsaW5nU3RhdGUpfHxzLl9pc0Nsb3NlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IHNldCBsb2NhbCBcIit0LnR5cGUrXCIgaW4gc3RhdGUgXCIrcy5zaWduYWxpbmdTdGF0ZSkpO2lmKFwib2ZmZXJcIj09PXQudHlwZSlyPWUuc3BsaXRTZWN0aW9ucyh0LnNkcCksbj1yLnNoaWZ0KCksci5mb3JFYWNoKGZ1bmN0aW9uKHQscil7dmFyIG49ZS5wYXJzZVJ0cFBhcmFtZXRlcnModCk7cy50cmFuc2NlaXZlcnNbcl0ubG9jYWxDYXBhYmlsaXRpZXM9bn0pLHMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSx0KXtzLl9nYXRoZXIoZS5taWQsdCl9KTtlbHNlIGlmKFwiYW5zd2VyXCI9PT10LnR5cGUpe3I9ZS5zcGxpdFNlY3Rpb25zKHMuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCksbj1yLnNoaWZ0KCk7dmFyIGM9ZS5tYXRjaFByZWZpeChuLFwiYT1pY2UtbGl0ZVwiKS5sZW5ndGg+MDtyLmZvckVhY2goZnVuY3Rpb24odCxyKXt2YXIgaT1zLnRyYW5zY2VpdmVyc1tyXSxvPWkuaWNlR2F0aGVyZXIsZD1pLmljZVRyYW5zcG9ydCxwPWkuZHRsc1RyYW5zcG9ydCxsPWkubG9jYWxDYXBhYmlsaXRpZXMsZj1pLnJlbW90ZUNhcGFiaWxpdGllcztpZighKGUuaXNSZWplY3RlZCh0KSYmMD09PWUubWF0Y2hQcmVmaXgodCxcImE9YnVuZGxlLW9ubHlcIikubGVuZ3RoKSYmIWkucmVqZWN0ZWQpe3ZhciB1PWUuZ2V0SWNlUGFyYW1ldGVycyh0LG4pLHY9ZS5nZXREdGxzUGFyYW1ldGVycyh0LG4pO2MmJih2LnJvbGU9XCJzZXJ2ZXJcIikscy51c2luZ0J1bmRsZSYmMCE9PXJ8fChzLl9nYXRoZXIoaS5taWQsciksXCJuZXdcIj09PWQuc3RhdGUmJmQuc3RhcnQobyx1LGM/XCJjb250cm9sbGluZ1wiOlwiY29udHJvbGxlZFwiKSxcIm5ld1wiPT09cC5zdGF0ZSYmcC5zdGFydCh2KSk7dmFyIGg9YShsLGYpO3MuX3RyYW5zY2VpdmUoaSxoLmNvZGVjcy5sZW5ndGg+MCwhMSl9fSl9cmV0dXJuIHMuX2xvY2FsRGVzY3JpcHRpb249e3R5cGU6dC50eXBlLHNkcDp0LnNkcH0sXCJvZmZlclwiPT09dC50eXBlP3MuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwiaGF2ZS1sb2NhbC1vZmZlclwiKTpzLl91cGRhdGVTaWduYWxpbmdTdGF0ZShcInN0YWJsZVwiKSxQcm9taXNlLnJlc29sdmUoKX0sZi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24odCl7dmFyIHI9dGhpcztpZigtMT09PVtcIm9mZmVyXCIsXCJhbnN3ZXJcIl0uaW5kZXhPZih0LnR5cGUpKXJldHVybiBQcm9taXNlLnJlamVjdChvKFwiVHlwZUVycm9yXCIsJ1Vuc3VwcG9ydGVkIHR5cGUgXCInK3QudHlwZSsnXCInKSk7aWYoIWkoXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiLHQudHlwZSxyLnNpZ25hbGluZ1N0YXRlKXx8ci5faXNDbG9zZWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBzZXQgcmVtb3RlIFwiK3QudHlwZStcIiBpbiBzdGF0ZSBcIityLnNpZ25hbGluZ1N0YXRlKSk7dmFyIG49e307ci5yZW1vdGVTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oZSl7bltlLmlkXT1lfSk7dmFyIGY9W10sdT1lLnNwbGl0U2VjdGlvbnModC5zZHApLHY9dS5zaGlmdCgpLGg9ZS5tYXRjaFByZWZpeCh2LFwiYT1pY2UtbGl0ZVwiKS5sZW5ndGg+MCxtPWUubWF0Y2hQcmVmaXgodixcImE9Z3JvdXA6QlVORExFIFwiKS5sZW5ndGg+MDtyLnVzaW5nQnVuZGxlPW07dmFyIGc9ZS5tYXRjaFByZWZpeCh2LFwiYT1pY2Utb3B0aW9uczpcIilbMF07cmV0dXJuIHIuY2FuVHJpY2tsZUljZUNhbmRpZGF0ZXM9ISFnJiZnLnN1YnN0cigxNCkuc3BsaXQoXCIgXCIpLmluZGV4T2YoXCJ0cmlja2xlXCIpPj0wLHUuZm9yRWFjaChmdW5jdGlvbihpLG8pe3ZhciBsPWUuc3BsaXRMaW5lcyhpKSx1PWUuZ2V0S2luZChpKSxnPWUuaXNSZWplY3RlZChpKSYmMD09PWUubWF0Y2hQcmVmaXgoaSxcImE9YnVuZGxlLW9ubHlcIikubGVuZ3RoLHk9bFswXS5zdWJzdHIoMikuc3BsaXQoXCIgXCIpWzJdLFM9ZS5nZXREaXJlY3Rpb24oaSx2KSxUPWUucGFyc2VNc2lkKGkpLEU9ZS5nZXRNaWQoaSl8fGUuZ2VuZXJhdGVJZGVudGlmaWVyKCk7aWYoZ3x8XCJhcHBsaWNhdGlvblwiPT09dSYmKFwiRFRMUy9TQ1RQXCI9PT15fHxcIlVEUC9EVExTL1NDVFBcIj09PXkpKXIudHJhbnNjZWl2ZXJzW29dPXttaWQ6RSxraW5kOnUscHJvdG9jb2w6eSxyZWplY3RlZDohMH07ZWxzZXt2YXIgQyxQLHcsUixfLGssYix4LEQ7IWcmJnIudHJhbnNjZWl2ZXJzW29dJiZyLnRyYW5zY2VpdmVyc1tvXS5yZWplY3RlZCYmKHIudHJhbnNjZWl2ZXJzW29dPXIuX2NyZWF0ZVRyYW5zY2VpdmVyKHUsITApKTt2YXIgSSxMLE09ZS5wYXJzZVJ0cFBhcmFtZXRlcnMoaSk7Z3x8KEk9ZS5nZXRJY2VQYXJhbWV0ZXJzKGksdiksKEw9ZS5nZXREdGxzUGFyYW1ldGVycyhpLHYpKS5yb2xlPVwiY2xpZW50XCIpLGI9ZS5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyhpKTt2YXIgTz1lLnBhcnNlUnRjcFBhcmFtZXRlcnMoaSksRz1lLm1hdGNoUHJlZml4KGksXCJhPWVuZC1vZi1jYW5kaWRhdGVzXCIsdikubGVuZ3RoPjAsaj1lLm1hdGNoUHJlZml4KGksXCJhPWNhbmRpZGF0ZTpcIikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlLnBhcnNlQ2FuZGlkYXRlKHQpfSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5jb21wb25lbnR9KTtpZigoXCJvZmZlclwiPT09dC50eXBlfHxcImFuc3dlclwiPT09dC50eXBlKSYmIWcmJm0mJm8+MCYmci50cmFuc2NlaXZlcnNbb10mJihyLl9kaXNwb3NlSWNlQW5kRHRsc1RyYW5zcG9ydHMobyksci50cmFuc2NlaXZlcnNbb10uaWNlR2F0aGVyZXI9ci50cmFuc2NlaXZlcnNbMF0uaWNlR2F0aGVyZXIsci50cmFuc2NlaXZlcnNbb10uaWNlVHJhbnNwb3J0PXIudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCxyLnRyYW5zY2VpdmVyc1tvXS5kdGxzVHJhbnNwb3J0PXIudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQsci50cmFuc2NlaXZlcnNbb10ucnRwU2VuZGVyJiZyLnRyYW5zY2VpdmVyc1tvXS5ydHBTZW5kZXIuc2V0VHJhbnNwb3J0KHIudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQpLHIudHJhbnNjZWl2ZXJzW29dLnJ0cFJlY2VpdmVyJiZyLnRyYW5zY2VpdmVyc1tvXS5ydHBSZWNlaXZlci5zZXRUcmFuc3BvcnQoci50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydCkpLFwib2ZmZXJcIiE9PXQudHlwZXx8Zyl7aWYoXCJhbnN3ZXJcIj09PXQudHlwZSYmIWcpe1A9KEM9ci50cmFuc2NlaXZlcnNbb10pLmljZUdhdGhlcmVyLHc9Qy5pY2VUcmFuc3BvcnQsUj1DLmR0bHNUcmFuc3BvcnQsXz1DLnJ0cFJlY2VpdmVyLGs9Qy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzLHg9Qy5sb2NhbENhcGFiaWxpdGllcyxyLnRyYW5zY2VpdmVyc1tvXS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzPWIsci50cmFuc2NlaXZlcnNbb10ucmVtb3RlQ2FwYWJpbGl0aWVzPU0sci50cmFuc2NlaXZlcnNbb10ucnRjcFBhcmFtZXRlcnM9TyxqLmxlbmd0aCYmXCJuZXdcIj09PXcuc3RhdGUmJighaCYmIUd8fG0mJjAhPT1vP2ouZm9yRWFjaChmdW5jdGlvbihlKXtzKEMuaWNlVHJhbnNwb3J0LGUpfSk6dy5zZXRSZW1vdGVDYW5kaWRhdGVzKGopKSxtJiYwIT09b3x8KFwibmV3XCI9PT13LnN0YXRlJiZ3LnN0YXJ0KFAsSSxcImNvbnRyb2xsaW5nXCIpLFwibmV3XCI9PT1SLnN0YXRlJiZSLnN0YXJ0KEwpKSwhYShDLmxvY2FsQ2FwYWJpbGl0aWVzLEMucmVtb3RlQ2FwYWJpbGl0aWVzKS5jb2RlY3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwicnR4XCI9PT1lLm5hbWUudG9Mb3dlckNhc2UoKX0pLmxlbmd0aCYmQy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmZGVsZXRlIEMuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgsci5fdHJhbnNjZWl2ZShDLFwic2VuZHJlY3ZcIj09PVN8fFwicmVjdm9ubHlcIj09PVMsXCJzZW5kcmVjdlwiPT09U3x8XCJzZW5kb25seVwiPT09UyksIV98fFwic2VuZHJlY3ZcIiE9PVMmJlwic2VuZG9ubHlcIiE9PVM/ZGVsZXRlIEMucnRwUmVjZWl2ZXI6KEQ9Xy50cmFjayxUPyhuW1Quc3RyZWFtXXx8KG5bVC5zdHJlYW1dPW5ldyBjLk1lZGlhU3RyZWFtKSxwKEQsbltULnN0cmVhbV0pLGYucHVzaChbRCxfLG5bVC5zdHJlYW1dXSkpOihuLmRlZmF1bHR8fChuLmRlZmF1bHQ9bmV3IGMuTWVkaWFTdHJlYW0pLHAoRCxuLmRlZmF1bHQpLGYucHVzaChbRCxfLG4uZGVmYXVsdF0pKSl9fWVsc2V7KEM9ci50cmFuc2NlaXZlcnNbb118fHIuX2NyZWF0ZVRyYW5zY2VpdmVyKHUpKS5taWQ9RSxDLmljZUdhdGhlcmVyfHwoQy5pY2VHYXRoZXJlcj1yLl9jcmVhdGVJY2VHYXRoZXJlcihvLG0pKSxqLmxlbmd0aCYmXCJuZXdcIj09PUMuaWNlVHJhbnNwb3J0LnN0YXRlJiYoIUd8fG0mJjAhPT1vP2ouZm9yRWFjaChmdW5jdGlvbihlKXtzKEMuaWNlVHJhbnNwb3J0LGUpfSk6Qy5pY2VUcmFuc3BvcnQuc2V0UmVtb3RlQ2FuZGlkYXRlcyhqKSkseD1jLlJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcyh1KSxkPDE1MDE5JiYoeC5jb2RlY3M9eC5jb2RlY3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwicnR4XCIhPT1lLm5hbWV9KSksaz1DLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnN8fFt7c3NyYzoxMDAxKigyKm8rMil9XTt2YXIgTixBPSExO2lmKFwic2VuZHJlY3ZcIj09PVN8fFwic2VuZG9ubHlcIj09PVMpe2lmKEE9IUMucnRwUmVjZWl2ZXIsXz1DLnJ0cFJlY2VpdmVyfHxuZXcgYy5SVENSdHBSZWNlaXZlcihDLmR0bHNUcmFuc3BvcnQsdSksQSlEPV8udHJhY2ssVCYmXCItXCI9PT1ULnN0cmVhbXx8KFQ/KG5bVC5zdHJlYW1dfHwobltULnN0cmVhbV09bmV3IGMuTWVkaWFTdHJlYW0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG5bVC5zdHJlYW1dLFwiaWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFQuc3RyZWFtfX0pKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRCxcImlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBULnRyYWNrfX0pLE49bltULnN0cmVhbV0pOihuLmRlZmF1bHR8fChuLmRlZmF1bHQ9bmV3IGMuTWVkaWFTdHJlYW0pLE49bi5kZWZhdWx0KSksTiYmKHAoRCxOKSxDLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXMucHVzaChOKSksZi5wdXNoKFtELF8sTl0pfWVsc2UgQy5ydHBSZWNlaXZlciYmQy5ydHBSZWNlaXZlci50cmFjayYmKEMuYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0LHIsbj1lLmdldFRyYWNrcygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQ9PT1DLnJ0cFJlY2VpdmVyLnRyYWNrLmlkfSk7biYmKHQ9biwocj1lKS5yZW1vdmVUcmFjayh0KSxyLmRpc3BhdGNoRXZlbnQobmV3IGMuTWVkaWFTdHJlYW1UcmFja0V2ZW50KFwicmVtb3ZldHJhY2tcIix7dHJhY2s6dH0pKSl9KSxDLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXM9W10pO0MubG9jYWxDYXBhYmlsaXRpZXM9eCxDLnJlbW90ZUNhcGFiaWxpdGllcz1NLEMucnRwUmVjZWl2ZXI9XyxDLnJ0Y3BQYXJhbWV0ZXJzPU8sQy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzPWssQy5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzPWIsci5fdHJhbnNjZWl2ZShyLnRyYW5zY2VpdmVyc1tvXSwhMSxBKX19fSksdm9pZCAwPT09ci5fZHRsc1JvbGUmJihyLl9kdGxzUm9sZT1cIm9mZmVyXCI9PT10LnR5cGU/XCJhY3RpdmVcIjpcInBhc3NpdmVcIiksci5fcmVtb3RlRGVzY3JpcHRpb249e3R5cGU6dC50eXBlLHNkcDp0LnNkcH0sXCJvZmZlclwiPT09dC50eXBlP3IuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwiaGF2ZS1yZW1vdGUtb2ZmZXJcIik6ci5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoXCJzdGFibGVcIiksT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1uW2VdO2lmKHQuZ2V0VHJhY2tzKCkubGVuZ3RoKXtpZigtMT09PXIucmVtb3RlU3RyZWFtcy5pbmRleE9mKHQpKXtyLnJlbW90ZVN0cmVhbXMucHVzaCh0KTt2YXIgYT1uZXcgRXZlbnQoXCJhZGRzdHJlYW1cIik7YS5zdHJlYW09dCxjLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLl9kaXNwYXRjaEV2ZW50KFwiYWRkc3RyZWFtXCIsYSl9KX1mLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ZVswXSxhPWVbMV07dC5pZD09PWVbMl0uaWQmJmwocixuLGEsW3RdKX0pfX0pLGYuZm9yRWFjaChmdW5jdGlvbihlKXtlWzJdfHxsKHIsZVswXSxlWzFdLFtdKX0pLGMuc2V0VGltZW91dChmdW5jdGlvbigpe3ImJnIudHJhbnNjZWl2ZXJzJiZyLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaWNlVHJhbnNwb3J0JiZcIm5ld1wiPT09ZS5pY2VUcmFuc3BvcnQuc3RhdGUmJmUuaWNlVHJhbnNwb3J0LmdldFJlbW90ZUNhbmRpZGF0ZXMoKS5sZW5ndGg+MCYmKGNvbnNvbGUud2FybihcIlRpbWVvdXQgZm9yIGFkZFJlbW90ZUNhbmRpZGF0ZS4gQ29uc2lkZXIgc2VuZGluZyBhbiBlbmQtb2YtY2FuZGlkYXRlcyBub3RpZmljYXRpb25cIiksZS5pY2VUcmFuc3BvcnQuYWRkUmVtb3RlQ2FuZGlkYXRlKHt9KSl9KX0sNGUzKSxQcm9taXNlLnJlc29sdmUoKX0sZi5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaWNlVHJhbnNwb3J0JiZlLmljZVRyYW5zcG9ydC5zdG9wKCksZS5kdGxzVHJhbnNwb3J0JiZlLmR0bHNUcmFuc3BvcnQuc3RvcCgpLGUucnRwU2VuZGVyJiZlLnJ0cFNlbmRlci5zdG9wKCksZS5ydHBSZWNlaXZlciYmZS5ydHBSZWNlaXZlci5zdG9wKCl9KSx0aGlzLl9pc0Nsb3NlZD0hMCx0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZShcImNsb3NlZFwiKX0sZi5wcm90b3R5cGUuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlPWZ1bmN0aW9uKGUpe3RoaXMuc2lnbmFsaW5nU3RhdGU9ZTt2YXIgdD1uZXcgRXZlbnQoXCJzaWduYWxpbmdzdGF0ZWNoYW5nZVwiKTt0aGlzLl9kaXNwYXRjaEV2ZW50KFwic2lnbmFsaW5nc3RhdGVjaGFuZ2VcIix0KX0sZi5wcm90b3R5cGUuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztcInN0YWJsZVwiPT09dGhpcy5zaWduYWxpbmdTdGF0ZSYmITAhPT10aGlzLm5lZWROZWdvdGlhdGlvbiYmKHRoaXMubmVlZE5lZ290aWF0aW9uPSEwLGMuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGUubmVlZE5lZ290aWF0aW9uKXtlLm5lZWROZWdvdGlhdGlvbj0hMTt2YXIgdD1uZXcgRXZlbnQoXCJuZWdvdGlhdGlvbm5lZWRlZFwiKTtlLl9kaXNwYXRjaEV2ZW50KFwibmVnb3RpYXRpb25uZWVkZWRcIix0KX19LDApKX0sZi5wcm90b3R5cGUuX3VwZGF0ZUljZUNvbm5lY3Rpb25TdGF0ZT1mdW5jdGlvbigpe3ZhciBlLHQ9e25ldzowLGNsb3NlZDowLGNoZWNraW5nOjAsY29ubmVjdGVkOjAsY29tcGxldGVkOjAsZGlzY29ubmVjdGVkOjAsZmFpbGVkOjB9O2lmKHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pY2VUcmFuc3BvcnQmJiFlLnJlamVjdGVkJiZ0W2UuaWNlVHJhbnNwb3J0LnN0YXRlXSsrfSksZT1cIm5ld1wiLHQuZmFpbGVkPjA/ZT1cImZhaWxlZFwiOnQuY2hlY2tpbmc+MD9lPVwiY2hlY2tpbmdcIjp0LmRpc2Nvbm5lY3RlZD4wP2U9XCJkaXNjb25uZWN0ZWRcIjp0Lm5ldz4wP2U9XCJuZXdcIjp0LmNvbm5lY3RlZD4wP2U9XCJjb25uZWN0ZWRcIjp0LmNvbXBsZXRlZD4wJiYoZT1cImNvbXBsZXRlZFwiKSxlIT09dGhpcy5pY2VDb25uZWN0aW9uU3RhdGUpe3RoaXMuaWNlQ29ubmVjdGlvblN0YXRlPWU7dmFyIHI9bmV3IEV2ZW50KFwiaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixyKX19LGYucHJvdG90eXBlLl91cGRhdGVDb25uZWN0aW9uU3RhdGU9ZnVuY3Rpb24oKXt2YXIgZSx0PXtuZXc6MCxjbG9zZWQ6MCxjb25uZWN0aW5nOjAsY29ubmVjdGVkOjAsY29tcGxldGVkOjAsZGlzY29ubmVjdGVkOjAsZmFpbGVkOjB9O2lmKHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pY2VUcmFuc3BvcnQmJmUuZHRsc1RyYW5zcG9ydCYmIWUucmVqZWN0ZWQmJih0W2UuaWNlVHJhbnNwb3J0LnN0YXRlXSsrLHRbZS5kdGxzVHJhbnNwb3J0LnN0YXRlXSsrKX0pLHQuY29ubmVjdGVkKz10LmNvbXBsZXRlZCxlPVwibmV3XCIsdC5mYWlsZWQ+MD9lPVwiZmFpbGVkXCI6dC5jb25uZWN0aW5nPjA/ZT1cImNvbm5lY3RpbmdcIjp0LmRpc2Nvbm5lY3RlZD4wP2U9XCJkaXNjb25uZWN0ZWRcIjp0Lm5ldz4wP2U9XCJuZXdcIjp0LmNvbm5lY3RlZD4wJiYoZT1cImNvbm5lY3RlZFwiKSxlIT09dGhpcy5jb25uZWN0aW9uU3RhdGUpe3RoaXMuY29ubmVjdGlvblN0YXRlPWU7dmFyIHI9bmV3IEV2ZW50KFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixyKX19LGYucHJvdG90eXBlLmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0Ll9pc0Nsb3NlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IGNhbGwgY3JlYXRlT2ZmZXIgYWZ0ZXIgY2xvc2VcIikpO3ZhciBuPXQudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cImF1ZGlvXCI9PT1lLmtpbmR9KS5sZW5ndGgsYT10LnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJ2aWRlb1wiPT09ZS5raW5kfSkubGVuZ3RoLGk9YXJndW1lbnRzWzBdO2lmKGkpe2lmKGkubWFuZGF0b3J5fHxpLm9wdGlvbmFsKXRocm93IG5ldyBUeXBlRXJyb3IoXCJMZWdhY3kgbWFuZGF0b3J5L29wdGlvbmFsIGNvbnN0cmFpbnRzIG5vdCBzdXBwb3J0ZWQuXCIpO3ZvaWQgMCE9PWkub2ZmZXJUb1JlY2VpdmVBdWRpbyYmKG49ITA9PT1pLm9mZmVyVG9SZWNlaXZlQXVkaW8/MTohMT09PWkub2ZmZXJUb1JlY2VpdmVBdWRpbz8wOmkub2ZmZXJUb1JlY2VpdmVBdWRpbyksdm9pZCAwIT09aS5vZmZlclRvUmVjZWl2ZVZpZGVvJiYoYT0hMD09PWkub2ZmZXJUb1JlY2VpdmVWaWRlbz8xOiExPT09aS5vZmZlclRvUmVjZWl2ZVZpZGVvPzA6aS5vZmZlclRvUmVjZWl2ZVZpZGVvKX1mb3IodC50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtcImF1ZGlvXCI9PT1lLmtpbmQ/LS1uPDAmJihlLndhbnRSZWNlaXZlPSExKTpcInZpZGVvXCI9PT1lLmtpbmQmJi0tYTwwJiYoZS53YW50UmVjZWl2ZT0hMSl9KTtuPjB8fGE+MDspbj4wJiYodC5fY3JlYXRlVHJhbnNjZWl2ZXIoXCJhdWRpb1wiKSxuLS0pLGE+MCYmKHQuX2NyZWF0ZVRyYW5zY2VpdmVyKFwidmlkZW9cIiksYS0tKTt2YXIgcz1lLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKHQuX3NkcFNlc3Npb25JZCx0Ll9zZHBTZXNzaW9uVmVyc2lvbisrKTt0LnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHIsbil7dmFyIGE9ci50cmFjayxpPXIua2luZCxzPXIubWlkfHxlLmdlbmVyYXRlSWRlbnRpZmllcigpO3IubWlkPXMsci5pY2VHYXRoZXJlcnx8KHIuaWNlR2F0aGVyZXI9dC5fY3JlYXRlSWNlR2F0aGVyZXIobix0LnVzaW5nQnVuZGxlKSk7dmFyIG89Yy5SVENSdHBTZW5kZXIuZ2V0Q2FwYWJpbGl0aWVzKGkpO2Q8MTUwMTkmJihvLmNvZGVjcz1vLmNvZGVjcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJydHhcIiE9PWUubmFtZX0pKSxvLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wiSDI2NFwiPT09ZS5uYW1lJiZ2b2lkIDA9PT1lLnBhcmFtZXRlcnNbXCJsZXZlbC1hc3ltbWV0cnktYWxsb3dlZFwiXSYmKGUucGFyYW1ldGVyc1tcImxldmVsLWFzeW1tZXRyeS1hbGxvd2VkXCJdPVwiMVwiKSxyLnJlbW90ZUNhcGFiaWxpdGllcyYmci5yZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzJiZyLnJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbih0KXtlLm5hbWUudG9Mb3dlckNhc2UoKT09PXQubmFtZS50b0xvd2VyQ2FzZSgpJiZlLmNsb2NrUmF0ZT09PXQuY2xvY2tSYXRlJiYoZS5wcmVmZXJyZWRQYXlsb2FkVHlwZT10LnBheWxvYWRUeXBlKX0pfSksby5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZSl7KHIucmVtb3RlQ2FwYWJpbGl0aWVzJiZyLnJlbW90ZUNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zfHxbXSkuZm9yRWFjaChmdW5jdGlvbih0KXtlLnVyaT09PXQudXJpJiYoZS5pZD10LmlkKX0pfSk7dmFyIHA9ci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzfHxbe3NzcmM6MTAwMSooMipuKzEpfV07YSYmZD49MTUwMTkmJlwidmlkZW9cIj09PWkmJiFwWzBdLnJ0eCYmKHBbMF0ucnR4PXtzc3JjOnBbMF0uc3NyYysxfSksci53YW50UmVjZWl2ZSYmKHIucnRwUmVjZWl2ZXI9bmV3IGMuUlRDUnRwUmVjZWl2ZXIoci5kdGxzVHJhbnNwb3J0LGkpKSxyLmxvY2FsQ2FwYWJpbGl0aWVzPW8sci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzPXB9KSxcIm1heC1jb21wYXRcIiE9PXQuX2NvbmZpZy5idW5kbGVQb2xpY3kmJihzKz1cImE9Z3JvdXA6QlVORExFIFwiK3QudHJhbnNjZWl2ZXJzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5taWR9KS5qb2luKFwiIFwiKStcIlxcclxcblwiKSxzKz1cImE9aWNlLW9wdGlvbnM6dHJpY2tsZVxcclxcblwiLHQudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24obixhKXtzKz1yKG4sbi5sb2NhbENhcGFiaWxpdGllcyxcIm9mZmVyXCIsbi5zdHJlYW0sdC5fZHRsc1JvbGUpLHMrPVwiYT1ydGNwLXJzaXplXFxyXFxuXCIsIW4uaWNlR2F0aGVyZXJ8fFwibmV3XCI9PT10LmljZUdhdGhlcmluZ1N0YXRlfHwwIT09YSYmdC51c2luZ0J1bmRsZXx8KG4uaWNlR2F0aGVyZXIuZ2V0TG9jYWxDYW5kaWRhdGVzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0LmNvbXBvbmVudD0xLHMrPVwiYT1cIitlLndyaXRlQ2FuZGlkYXRlKHQpK1wiXFxyXFxuXCJ9KSxcImNvbXBsZXRlZFwiPT09bi5pY2VHYXRoZXJlci5zdGF0ZSYmKHMrPVwiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiKSl9KTt2YXIgcD1uZXcgYy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJvZmZlclwiLHNkcDpzfSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShwKX0sZi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0Ll9pc0Nsb3NlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IGNhbGwgY3JlYXRlQW5zd2VyIGFmdGVyIGNsb3NlXCIpKTtpZihcImhhdmUtcmVtb3RlLW9mZmVyXCIhPT10LnNpZ25hbGluZ1N0YXRlJiZcImhhdmUtbG9jYWwtcHJhbnN3ZXJcIiE9PXQuc2lnbmFsaW5nU3RhdGUpcmV0dXJuIFByb21pc2UucmVqZWN0KG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBjYWxsIGNyZWF0ZUFuc3dlciBpbiBzaWduYWxpbmdTdGF0ZSBcIit0LnNpZ25hbGluZ1N0YXRlKSk7dmFyIG49ZS53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZSh0Ll9zZHBTZXNzaW9uSWQsdC5fc2RwU2Vzc2lvblZlcnNpb24rKyk7dC51c2luZ0J1bmRsZSYmKG4rPVwiYT1ncm91cDpCVU5ETEUgXCIrdC50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1pZH0pLmpvaW4oXCIgXCIpK1wiXFxyXFxuXCIpLG4rPVwiYT1pY2Utb3B0aW9uczp0cmlja2xlXFxyXFxuXCI7dmFyIGk9ZS5nZXRNZWRpYVNlY3Rpb25zKHQuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkubGVuZ3RoO3QudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSxzKXtpZighKHMrMT5pKSl7aWYoZS5yZWplY3RlZClyZXR1cm5cImFwcGxpY2F0aW9uXCI9PT1lLmtpbmQ/XCJEVExTL1NDVFBcIj09PWUucHJvdG9jb2w/bis9XCJtPWFwcGxpY2F0aW9uIDAgRFRMUy9TQ1RQIDUwMDBcXHJcXG5cIjpuKz1cIm09YXBwbGljYXRpb24gMCBcIitlLnByb3RvY29sK1wiIHdlYnJ0Yy1kYXRhY2hhbm5lbFxcclxcblwiOlwiYXVkaW9cIj09PWUua2luZD9uKz1cIm09YXVkaW8gMCBVRFAvVExTL1JUUC9TQVZQRiAwXFxyXFxuYT1ydHBtYXA6MCBQQ01VLzgwMDBcXHJcXG5cIjpcInZpZGVvXCI9PT1lLmtpbmQmJihuKz1cIm09dmlkZW8gMCBVRFAvVExTL1JUUC9TQVZQRiAxMjBcXHJcXG5hPXJ0cG1hcDoxMjAgVlA4LzkwMDAwXFxyXFxuXCIpLHZvaWQobis9XCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuYT1pbmFjdGl2ZVxcclxcbmE9bWlkOlwiK2UubWlkK1wiXFxyXFxuXCIpO3ZhciBvO2lmKGUuc3RyZWFtKVwiYXVkaW9cIj09PWUua2luZD9vPWUuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF06XCJ2aWRlb1wiPT09ZS5raW5kJiYobz1lLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdKSxvJiZkPj0xNTAxOSYmXCJ2aWRlb1wiPT09ZS5raW5kJiYhZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKGUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHg9e3NzcmM6ZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrMX0pO3ZhciBjPWEoZS5sb2NhbENhcGFiaWxpdGllcyxlLnJlbW90ZUNhcGFiaWxpdGllcyk7IWMuY29kZWNzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInJ0eFwiPT09ZS5uYW1lLnRvTG93ZXJDYXNlKCl9KS5sZW5ndGgmJmUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJmRlbGV0ZSBlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LG4rPXIoZSxjLFwiYW5zd2VyXCIsZS5zdHJlYW0sdC5fZHRsc1JvbGUpLGUucnRjcFBhcmFtZXRlcnMmJmUucnRjcFBhcmFtZXRlcnMucmVkdWNlZFNpemUmJihuKz1cImE9cnRjcC1yc2l6ZVxcclxcblwiKX19KTt2YXIgcz1uZXcgYy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJhbnN3ZXJcIixzZHA6bn0pO3JldHVybiBQcm9taXNlLnJlc29sdmUocyl9LGYucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZT1mdW5jdGlvbih0KXt2YXIgcixuPXRoaXM7cmV0dXJuIHQmJnZvaWQgMD09PXQuc2RwTUxpbmVJbmRleCYmIXQuc2RwTWlkP1Byb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJzZHBNTGluZUluZGV4IG9yIHNkcE1pZCByZXF1aXJlZFwiKSk6bmV3IFByb21pc2UoZnVuY3Rpb24oYSxpKXtpZighbi5fcmVtb3RlRGVzY3JpcHRpb24pcmV0dXJuIGkobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlIHdpdGhvdXQgYSByZW1vdGUgZGVzY3JpcHRpb25cIikpO2lmKHQmJlwiXCIhPT10LmNhbmRpZGF0ZSl7dmFyIGM9dC5zZHBNTGluZUluZGV4O2lmKHQuc2RwTWlkKWZvcih2YXIgZD0wO2Q8bi50cmFuc2NlaXZlcnMubGVuZ3RoO2QrKylpZihuLnRyYW5zY2VpdmVyc1tkXS5taWQ9PT10LnNkcE1pZCl7Yz1kO2JyZWFrfXZhciBwPW4udHJhbnNjZWl2ZXJzW2NdO2lmKCFwKXJldHVybiBpKG8oXCJPcGVyYXRpb25FcnJvclwiLFwiQ2FuIG5vdCBhZGQgSUNFIGNhbmRpZGF0ZVwiKSk7aWYocC5yZWplY3RlZClyZXR1cm4gYSgpO3ZhciBsPU9iamVjdC5rZXlzKHQuY2FuZGlkYXRlKS5sZW5ndGg+MD9lLnBhcnNlQ2FuZGlkYXRlKHQuY2FuZGlkYXRlKTp7fTtpZihcInRjcFwiPT09bC5wcm90b2NvbCYmKDA9PT1sLnBvcnR8fDk9PT1sLnBvcnQpKXJldHVybiBhKCk7aWYobC5jb21wb25lbnQmJjEhPT1sLmNvbXBvbmVudClyZXR1cm4gYSgpO2lmKCgwPT09Y3x8Yz4wJiZwLmljZVRyYW5zcG9ydCE9PW4udHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCkmJiFzKHAuaWNlVHJhbnNwb3J0LGwpKXJldHVybiBpKG8oXCJPcGVyYXRpb25FcnJvclwiLFwiQ2FuIG5vdCBhZGQgSUNFIGNhbmRpZGF0ZVwiKSk7dmFyIGY9dC5jYW5kaWRhdGUudHJpbSgpOzA9PT1mLmluZGV4T2YoXCJhPVwiKSYmKGY9Zi5zdWJzdHIoMikpLChyPWUuZ2V0TWVkaWFTZWN0aW9ucyhuLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApKVtjXSs9XCJhPVwiKyhsLnR5cGU/ZjpcImVuZC1vZi1jYW5kaWRhdGVzXCIpK1wiXFxyXFxuXCIsbi5fcmVtb3RlRGVzY3JpcHRpb24uc2RwPWUuZ2V0RGVzY3JpcHRpb24obi5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKStyLmpvaW4oXCJcIil9ZWxzZSBmb3IodmFyIHU9MDt1PG4udHJhbnNjZWl2ZXJzLmxlbmd0aCYmKG4udHJhbnNjZWl2ZXJzW3VdLnJlamVjdGVkfHwobi50cmFuc2NlaXZlcnNbdV0uaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSksKHI9ZS5nZXRNZWRpYVNlY3Rpb25zKG4uX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkpW3VdKz1cImE9ZW5kLW9mLWNhbmRpZGF0ZXNcXHJcXG5cIixuLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHA9ZS5nZXREZXNjcmlwdGlvbihuLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApK3Iuam9pbihcIlwiKSwhbi51c2luZ0J1bmRsZSkpO3UrKyk7YSgpfSl9LGYucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKGUpe2lmKGUmJmUgaW5zdGFuY2VvZiBjLk1lZGlhU3RyZWFtVHJhY2spe3ZhciB0PW51bGw7aWYodGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihyKXtyLnJ0cFNlbmRlciYmci5ydHBTZW5kZXIudHJhY2s9PT1lP3Q9ci5ydHBTZW5kZXI6ci5ydHBSZWNlaXZlciYmci5ydHBSZWNlaXZlci50cmFjaz09PWUmJih0PXIucnRwUmVjZWl2ZXIpfSksIXQpdGhyb3cgbyhcIkludmFsaWRBY2Nlc3NFcnJvclwiLFwiSW52YWxpZCBzZWxlY3Rvci5cIik7cmV0dXJuIHQuZ2V0U3RhdHMoKX12YXIgcj1bXTtyZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtbXCJydHBTZW5kZXJcIixcInJ0cFJlY2VpdmVyXCIsXCJpY2VHYXRoZXJlclwiLFwiaWNlVHJhbnNwb3J0XCIsXCJkdGxzVHJhbnNwb3J0XCJdLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XSYmci5wdXNoKGVbdF0uZ2V0U3RhdHMoKSl9KX0pLFByb21pc2UuYWxsKHIpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IE1hcDtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZm9yRWFjaChmdW5jdGlvbihlKXt0LnNldChlLmlkLGUpfSl9KSx0fSl9O1tcIlJUQ1J0cFNlbmRlclwiLFwiUlRDUnRwUmVjZWl2ZXJcIixcIlJUQ0ljZUdhdGhlcmVyXCIsXCJSVENJY2VUcmFuc3BvcnRcIixcIlJUQ0R0bHNUcmFuc3BvcnRcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj1jW2VdO2lmKHImJnIucHJvdG90eXBlJiZyLnByb3RvdHlwZS5nZXRTdGF0cyl7dmFyIG49ci5wcm90b3R5cGUuZ2V0U3RhdHM7ci5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseSh0aGlzKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciByPW5ldyBNYXA7cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24obil7ZVtuXS50eXBlPXQoZVtuXSksci5zZXQobixlW25dKX0pLHJ9KX19fSk7dmFyIHU9W1wiY3JlYXRlT2ZmZXJcIixcImNyZWF0ZUFuc3dlclwiXTtyZXR1cm4gdS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWYucHJvdG90eXBlW2VdO2YucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMF18fFwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0/dC5hcHBseSh0aGlzLFthcmd1bWVudHNbMl1dKS50aGVuKGZ1bmN0aW9uKHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMF0mJmVbMF0uYXBwbHkobnVsbCxbdF0pfSxmdW5jdGlvbih0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzFdJiZlWzFdLmFwcGx5KG51bGwsW3RdKX0pOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pLCh1PVtcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsXCJhZGRJY2VDYW5kaWRhdGVcIl0pLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9Zi5wcm90b3R5cGVbZV07Zi5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZVsyXT90LmFwcGx5KHRoaXMsYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXSYmZVsxXS5hcHBseShudWxsKX0sZnVuY3Rpb24odCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZVsyXSYmZVsyXS5hcHBseShudWxsLFt0XSl9KTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSxbXCJnZXRTdGF0c1wiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWYucHJvdG90eXBlW2VdO2YucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0/dC5hcHBseSh0aGlzLGFyZ3VtZW50cykudGhlbihmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0mJmVbMV0uYXBwbHkobnVsbCl9KTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSxmfTtcbn0se1wic2RwXCI6XCJZSHZoXCJ9XSxcIllkS3hcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXt2YXIgcj1lJiZlLm5hdmlnYXRvcix0PXIubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKHIubWVkaWFEZXZpY2VzKTtyLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOntQZXJtaXNzaW9uRGVuaWVkRXJyb3I6XCJOb3RBbGxvd2VkRXJyb3JcIn1bZS5uYW1lXXx8ZS5uYW1lLG1lc3NhZ2U6ZS5tZXNzYWdlLGNvbnN0cmFpbnQ6ZS5jb25zdHJhaW50LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX19fShlKSl9KX19T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0VXNlck1lZGlhPWU7XG59LHt9XSxcIlAzYlZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXtcImdldERpc3BsYXlNZWRpYVwiaW4gZS5uYXZpZ2F0b3ImJmUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmKGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmXCJnZXREaXNwbGF5TWVkaWFcImluIGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8KGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWE9ZS5uYXZpZ2F0b3IuZ2V0RGlzcGxheU1lZGlhLmJpbmQoZS5uYXZpZ2F0b3IpKSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0RGlzcGxheU1lZGlhPWU7XG59LHt9XSxcIlhSaWNcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltUGVlckNvbm5lY3Rpb249YSxleHBvcnRzLnNoaW1SZXBsYWNlVHJhY2s9cCxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcInNoaW1HZXRVc2VyTWVkaWFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5zaGltR2V0VXNlck1lZGlhfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwic2hpbUdldERpc3BsYXlNZWRpYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpLnNoaW1HZXREaXNwbGF5TWVkaWF9fSk7dmFyIGU9cyhyZXF1aXJlKFwiLi4vdXRpbHNcIikpLHQ9cmVxdWlyZShcIi4vZmlsdGVyaWNlc2VydmVyc1wiKSxyPW8ocmVxdWlyZShcInJ0Y3BlZXJjb25uZWN0aW9uLXNoaW1cIikpLG49cmVxdWlyZShcIi4vZ2V0dXNlcm1lZGlhXCIpLGk9cmVxdWlyZShcIi4vZ2V0ZGlzcGxheW1lZGlhXCIpO2Z1bmN0aW9uIG8oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIGMoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiBjPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gcyhlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciB0PWMoKTtpZih0JiZ0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dmFyIHI9e30sbj1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpe3ZhciBvPW4/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpOm51bGw7byYmKG8uZ2V0fHxvLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsaSxvKTpyW2ldPWVbaV19cmV0dXJuIHIuZGVmYXVsdD1lLHQmJnQuc2V0KGUscikscn1mdW5jdGlvbiBhKG4pe3ZhciBpPWUuZGV0ZWN0QnJvd3NlcihuKTtpZihuLlJUQ0ljZUdhdGhlcmVyJiYobi5SVENJY2VDYW5kaWRhdGV8fChuLlJUQ0ljZUNhbmRpZGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gZX0pLG4uUlRDU2Vzc2lvbkRlc2NyaXB0aW9ufHwobi5SVENTZXNzaW9uRGVzY3JpcHRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxpLnZlcnNpb248MTUwMjUpKXt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4uTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsXCJlbmFibGVkXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShuLk1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLFwiZW5hYmxlZFwiLHtzZXQ6ZnVuY3Rpb24oZSl7by5zZXQuY2FsbCh0aGlzLGUpO3ZhciB0PW5ldyBFdmVudChcImVuYWJsZWRcIik7dC5lbmFibGVkPWUsdGhpcy5kaXNwYXRjaEV2ZW50KHQpfX0pfSFuLlJUQ1J0cFNlbmRlcnx8XCJkdG1mXCJpbiBuLlJUQ1J0cFNlbmRlci5wcm90b3R5cGV8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUsXCJkdG1mXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9kdG1mJiYoXCJhdWRpb1wiPT09dGhpcy50cmFjay5raW5kP3RoaXMuX2R0bWY9bmV3IG4uUlRDRHRtZlNlbmRlcih0aGlzKTpcInZpZGVvXCI9PT10aGlzLnRyYWNrLmtpbmQmJih0aGlzLl9kdG1mPW51bGwpKSx0aGlzLl9kdG1mfX0pLG4uUlRDRHRtZlNlbmRlciYmIW4uUlRDRFRNRlNlbmRlciYmKG4uUlRDRFRNRlNlbmRlcj1uLlJUQ0R0bWZTZW5kZXIpO3ZhciBjPSgwLHIuZGVmYXVsdCkobixpLnZlcnNpb24pO24uUlRDUGVlckNvbm5lY3Rpb249ZnVuY3Rpb24ocil7cmV0dXJuIHImJnIuaWNlU2VydmVycyYmKHIuaWNlU2VydmVycz0oMCx0LmZpbHRlckljZVNlcnZlcnMpKHIuaWNlU2VydmVycyxpLnZlcnNpb24pLGUubG9nKFwiSUNFIHNlcnZlcnMgYWZ0ZXIgZmlsdGVyaW5nOlwiLHIuaWNlU2VydmVycykpLG5ldyBjKHIpfSxuLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZT1jLnByb3RvdHlwZX1mdW5jdGlvbiBwKGUpeyFlLlJUQ1J0cFNlbmRlcnx8XCJyZXBsYWNlVHJhY2tcImluIGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZXx8KGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5yZXBsYWNlVHJhY2s9ZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLnNldFRyYWNrKX1cbn0se1wiLi4vdXRpbHNcIjpcImlTeENcIixcIi4vZmlsdGVyaWNlc2VydmVyc1wiOlwiTloxQ1wiLFwicnRjcGVlcmNvbm5lY3Rpb24tc2hpbVwiOlwiTkoydVwiLFwiLi9nZXR1c2VybWVkaWFcIjpcIllkS3hcIixcIi4vZ2V0ZGlzcGxheW1lZGlhXCI6XCJQM2JWXCJ9XSxcIkd6U3ZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0VXNlck1lZGlhPW47dmFyIGU9byhyZXF1aXJlKFwiLi4vdXRpbHNcIikpO2Z1bmN0aW9uIHQoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiB0PWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gbyhlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciBvPXQoKTtpZihvJiZvLmhhcyhlKSlyZXR1cm4gby5nZXQoZSk7dmFyIHI9e30sbj1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpe3ZhciBhPW4/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpOm51bGw7YSYmKGEuZ2V0fHxhLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsaSxhKTpyW2ldPWVbaV19cmV0dXJuIHIuZGVmYXVsdD1lLG8mJm8uc2V0KGUscikscn1mdW5jdGlvbiByKGUpe3JldHVybihyPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBuKHQpe3ZhciBvPWUuZGV0ZWN0QnJvd3Nlcih0KSxuPXQmJnQubmF2aWdhdG9yLGk9dCYmdC5NZWRpYVN0cmVhbVRyYWNrO2lmKG4uZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKHQsbyxyKXtlLmRlcHJlY2F0ZWQoXCJuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhXCIsXCJuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYVwiKSxuLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEodCkudGhlbihvLHIpfSwhKG8udmVyc2lvbj41NSYmXCJhdXRvR2FpbkNvbnRyb2xcImluIG4ubWVkaWFEZXZpY2VzLmdldFN1cHBvcnRlZENvbnN0cmFpbnRzKCkpKXt2YXIgYT1mdW5jdGlvbihlLHQsbyl7dCBpbiBlJiYhKG8gaW4gZSkmJihlW29dPWVbdF0sZGVsZXRlIGVbdF0pfSxzPW4ubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKG4ubWVkaWFEZXZpY2VzKTtpZihuLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09PXIoZSkmJlwib2JqZWN0XCI9PT1yKGUuYXVkaW8pJiYoZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSxhKGUuYXVkaW8sXCJhdXRvR2FpbkNvbnRyb2xcIixcIm1vekF1dG9HYWluQ29udHJvbFwiKSxhKGUuYXVkaW8sXCJub2lzZVN1cHByZXNzaW9uXCIsXCJtb3pOb2lzZVN1cHByZXNzaW9uXCIpKSxzKGUpfSxpJiZpLnByb3RvdHlwZS5nZXRTZXR0aW5ncyl7dmFyIHA9aS5wcm90b3R5cGUuZ2V0U2V0dGluZ3M7aS5wcm90b3R5cGUuZ2V0U2V0dGluZ3M9ZnVuY3Rpb24oKXt2YXIgZT1wLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gYShlLFwibW96QXV0b0dhaW5Db250cm9sXCIsXCJhdXRvR2FpbkNvbnRyb2xcIiksYShlLFwibW96Tm9pc2VTdXBwcmVzc2lvblwiLFwibm9pc2VTdXBwcmVzc2lvblwiKSxlfX1pZihpJiZpLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzKXt2YXIgdT1pLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzO2kucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJhdWRpb1wiPT09dGhpcy5raW5kJiZcIm9iamVjdFwiPT09cihlKSYmKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSksYShlLFwiYXV0b0dhaW5Db250cm9sXCIsXCJtb3pBdXRvR2FpbkNvbnRyb2xcIiksYShlLFwibm9pc2VTdXBwcmVzc2lvblwiLFwibW96Tm9pc2VTdXBwcmVzc2lvblwiKSksdS5hcHBseSh0aGlzLFtlXSl9fX19XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCJ9XSxcIlV1R1VcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlLGkpe2UubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmXCJnZXREaXNwbGF5TWVkaWFcImluIGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8ZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiYoZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYT1mdW5jdGlvbihhKXtpZighYXx8IWEudmlkZW8pe3ZhciB0PW5ldyBET01FeGNlcHRpb24oXCJnZXREaXNwbGF5TWVkaWEgd2l0aG91dCB2aWRlbyBjb25zdHJhaW50cyBpcyB1bmRlZmluZWRcIik7cmV0dXJuIHQubmFtZT1cIk5vdEZvdW5kRXJyb3JcIix0LmNvZGU9OCxQcm9taXNlLnJlamVjdCh0KX1yZXR1cm4hMD09PWEudmlkZW8/YS52aWRlbz17bWVkaWFTb3VyY2U6aX06YS52aWRlby5tZWRpYVNvdXJjZT1pLGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoYSl9KX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1HZXREaXNwbGF5TWVkaWE9ZTtcbn0se31dLFwiRnpkclwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1PblRyYWNrPWMsZXhwb3J0cy5zaGltUGVlckNvbm5lY3Rpb249cyxleHBvcnRzLnNoaW1TZW5kZXJHZXRTdGF0cz1wLGV4cG9ydHMuc2hpbVJlY2VpdmVyR2V0U3RhdHM9dSxleHBvcnRzLnNoaW1SZW1vdmVTdHJlYW09ZixleHBvcnRzLnNoaW1SVENEYXRhQ2hhbm5lbD1DLGV4cG9ydHMuc2hpbUFkZFRyYW5zY2VpdmVyPWQsZXhwb3J0cy5zaGltQ3JlYXRlT2ZmZXI9eSxleHBvcnRzLnNoaW1DcmVhdGVBbnN3ZXI9bCxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcInNoaW1HZXRVc2VyTWVkaWFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5zaGltR2V0VXNlck1lZGlhfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwic2hpbUdldERpc3BsYXlNZWRpYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiByLnNoaW1HZXREaXNwbGF5TWVkaWF9fSk7dmFyIGU9byhyZXF1aXJlKFwiLi4vdXRpbHNcIikpLHQ9cmVxdWlyZShcIi4vZ2V0dXNlcm1lZGlhXCIpLHI9cmVxdWlyZShcIi4vZ2V0ZGlzcGxheW1lZGlhXCIpO2Z1bmN0aW9uIG4oKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiBuPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gbyhlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciB0PW4oKTtpZih0JiZ0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dmFyIHI9e30sbz1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpe3ZhciBhPW8/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpOm51bGw7YSYmKGEuZ2V0fHxhLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsaSxhKTpyW2ldPWVbaV19cmV0dXJuIHIuZGVmYXVsdD1lLHQmJnQuc2V0KGUscikscn1mdW5jdGlvbiBpKGUsdCxyKXtyZXR1cm4gdCBpbiBlP09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPXIsZX1mdW5jdGlvbiBhKGUpe3JldHVybihhPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBjKGUpe1wib2JqZWN0XCI9PT1hKGUpJiZlLlJUQ1RyYWNrRXZlbnQmJlwicmVjZWl2ZXJcImluIGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUmJiEoXCJ0cmFuc2NlaXZlclwiaW4gZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLFwidHJhbnNjZWl2ZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue3JlY2VpdmVyOnRoaXMucmVjZWl2ZXJ9fX0pfWZ1bmN0aW9uIHModCl7dmFyIHI9ZS5kZXRlY3RCcm93c2VyKHQpO2lmKFwib2JqZWN0XCI9PT1hKHQpJiYodC5SVENQZWVyQ29ubmVjdGlvbnx8dC5tb3pSVENQZWVyQ29ubmVjdGlvbikpe2lmKCF0LlJUQ1BlZXJDb25uZWN0aW9uJiZ0Lm1velJUQ1BlZXJDb25uZWN0aW9uJiYodC5SVENQZWVyQ29ubmVjdGlvbj10Lm1velJUQ1BlZXJDb25uZWN0aW9uKSxyLnZlcnNpb248NTMmJltcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsXCJhZGRJY2VDYW5kaWRhdGVcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVtlXSxuPWkoe30sZSxmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09bmV3KFwiYWRkSWNlQ2FuZGlkYXRlXCI9PT1lP3QuUlRDSWNlQ2FuZGlkYXRlOnQuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKShhcmd1bWVudHNbMF0pLHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSk7dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbZV09bltlXX0pLHIudmVyc2lvbjw2OCl7dmFyIG49dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO3QuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdJiZcIlwiPT09YXJndW1lbnRzWzBdLmNhbmRpZGF0ZT9Qcm9taXNlLnJlc29sdmUoKTpuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTooYXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0uYXBwbHkobnVsbCksUHJvbWlzZS5yZXNvbHZlKCkpfX12YXIgbz17aW5ib3VuZHJ0cDpcImluYm91bmQtcnRwXCIsb3V0Ym91bmRydHA6XCJvdXRib3VuZC1ydHBcIixjYW5kaWRhdGVwYWlyOlwiY2FuZGlkYXRlLXBhaXJcIixsb2NhbGNhbmRpZGF0ZTpcImxvY2FsLWNhbmRpZGF0ZVwiLHJlbW90ZWNhbmRpZGF0ZTpcInJlbW90ZS1jYW5kaWRhdGVcIn0sYz10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0czt0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3ZhcltlLHQsbl09YXJndW1lbnRzO3JldHVybiBjLmFwcGx5KHRoaXMsW2V8fG51bGxdKS50aGVuKGZ1bmN0aW9uKGUpe2lmKHIudmVyc2lvbjw1MyYmIXQpdHJ5e2UuZm9yRWFjaChmdW5jdGlvbihlKXtlLnR5cGU9b1tlLnR5cGVdfHxlLnR5cGV9KX1jYXRjaChuKXtpZihcIlR5cGVFcnJvclwiIT09bi5uYW1lKXRocm93IG47ZS5mb3JFYWNoKGZ1bmN0aW9uKHQscil7ZS5zZXQocixPYmplY3QuYXNzaWduKHt9LHQse3R5cGU6b1t0LnR5cGVdfHx0LnR5cGV9KSl9KX1yZXR1cm4gZX0pLnRoZW4odCxuKX19fWZ1bmN0aW9uIHAoZSl7aWYoXCJvYmplY3RcIj09PWEoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24mJmUuUlRDUnRwU2VuZGVyJiYhKGUuUlRDUnRwU2VuZGVyJiZcImdldFN0YXRzXCJpbiBlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzO3QmJihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxyPXQuYXBwbHkodGhpcyxbXSk7cmV0dXJuIHIuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5fcGM9ZX0pLHJ9KTt2YXIgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztyJiYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oKXt2YXIgZT1yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZS5fcGM9dGhpcyxlfSksZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhY2s/dGhpcy5fcGMuZ2V0U3RhdHModGhpcy50cmFjayk6UHJvbWlzZS5yZXNvbHZlKG5ldyBNYXApfX19ZnVuY3Rpb24gdSh0KXtpZihcIm9iamVjdFwiPT09YSh0KSYmdC5SVENQZWVyQ29ubmVjdGlvbiYmdC5SVENSdHBTZW5kZXImJiEodC5SVENSdHBTZW5kZXImJlwiZ2V0U3RhdHNcImluIHQuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKSl7dmFyIHI9dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzO3ImJih0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ci5hcHBseSh0aGlzLFtdKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0Ll9wYz1lfSksdH0pLGUud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQodCxcInRyYWNrXCIsZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVjZWl2ZXIuX3BjPWUuc3JjRWxlbWVudCxlfSksdC5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHModGhpcy50cmFjayl9fX1mdW5jdGlvbiBmKHQpeyF0LlJUQ1BlZXJDb25uZWN0aW9ufHxcInJlbW92ZVN0cmVhbVwiaW4gdC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGV8fCh0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24odCl7dmFyIHI9dGhpcztlLmRlcHJlY2F0ZWQoXCJyZW1vdmVTdHJlYW1cIixcInJlbW92ZVRyYWNrXCIpLHRoaXMuZ2V0U2VuZGVycygpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS50cmFjayYmdC5nZXRUcmFja3MoKS5pbmNsdWRlcyhlLnRyYWNrKSYmci5yZW1vdmVUcmFjayhlKX0pfSl9ZnVuY3Rpb24gQyhlKXtlLkRhdGFDaGFubmVsJiYhZS5SVENEYXRhQ2hhbm5lbCYmKGUuUlRDRGF0YUNoYW5uZWw9ZS5EYXRhQ2hhbm5lbCl9ZnVuY3Rpb24gZChlKXtpZihcIm9iamVjdFwiPT09YShlKSYmZS5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhbnNjZWl2ZXI7dCYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYW5zY2VpdmVyPWZ1bmN0aW9uKCl7dGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXM9W107dmFyIGU9YXJndW1lbnRzWzFdLHI9ZSYmXCJzZW5kRW5jb2RpbmdzXCJpbiBlO3ImJmUuc2VuZEVuY29kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKFwicmlkXCJpbiBlKXtpZighL15bYS16MC05XXswLDE2fSQvaS50ZXN0KGUucmlkKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBSSUQgdmFsdWUgcHJvdmlkZWQuXCIpfWlmKFwic2NhbGVSZXNvbHV0aW9uRG93bkJ5XCJpbiBlJiYhKHBhcnNlRmxvYXQoZS5zY2FsZVJlc29sdXRpb25Eb3duQnkpPj0xKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInNjYWxlX3Jlc29sdXRpb25fZG93bl9ieSBtdXN0IGJlID49IDEuMFwiKTtpZihcIm1heEZyYW1lcmF0ZVwiaW4gZSYmIShwYXJzZUZsb2F0KGUubWF4RnJhbWVyYXRlKT49MCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJtYXhfZnJhbWVyYXRlIG11c3QgYmUgPj0gMC4wXCIpfSk7dmFyIG49dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYocil7dmFye3NlbmRlcjpvfT1uLGk9by5nZXRQYXJhbWV0ZXJzKCk7XCJlbmNvZGluZ3NcImluIGl8fChpLmVuY29kaW5ncz1lLnNlbmRFbmNvZGluZ3MsdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMucHVzaChvLnNldFBhcmFtZXRlcnMoaSkuY2F0Y2goZnVuY3Rpb24oKXt9KSkpfXJldHVybiBufSl9fWZ1bmN0aW9uIHkoZSl7aWYoXCJvYmplY3RcIj09PWEoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLHI9dGhpcztyZXR1cm4gdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMmJnRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzLmxlbmd0aD9Qcm9taXNlLmFsbCh0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcykudGhlbihmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KHIsZSl9KS5maW5hbGx5KGZ1bmN0aW9uKCl7ci5zZXRQYXJhbWV0ZXJzUHJvbWlzZXM9W119KTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fWZ1bmN0aW9uIGwoZSl7aWYoXCJvYmplY3RcIj09PWEoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUFuc3dlcjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXI9ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMscj10aGlzO3JldHVybiB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcyYmdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMubGVuZ3RoP1Byb21pc2UuYWxsKHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkocixlKX0pLmZpbmFsbHkoZnVuY3Rpb24oKXtyLnNldFBhcmFtZXRlcnNQcm9taXNlcz1bXX0pOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCIsXCIuL2dldHVzZXJtZWRpYVwiOlwiR3pTdlwiLFwiLi9nZXRkaXNwbGF5bWVkaWFcIjpcIlV1R1VcIn1dLFwidDFsTFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1Mb2NhbFN0cmVhbXNBUEk9bixleHBvcnRzLnNoaW1SZW1vdGVTdHJlYW1zQVBJPWksZXhwb3J0cy5zaGltQ2FsbGJhY2tzQVBJPWEsZXhwb3J0cy5zaGltR2V0VXNlck1lZGlhPXMsZXhwb3J0cy5zaGltQ29uc3RyYWludHM9YyxleHBvcnRzLnNoaW1SVENJY2VTZXJ2ZXJVcmxzPWQsZXhwb3J0cy5zaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyPWYsZXhwb3J0cy5zaGltQ3JlYXRlT2ZmZXJMZWdhY3k9cDt2YXIgZT1yKHJlcXVpcmUoXCIuLi91dGlsc1wiKSk7ZnVuY3Rpb24gdCgpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIHQ9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiByKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIHI9dCgpO2lmKHImJnIuaGFzKGUpKXJldHVybiByLmdldChlKTt2YXIgbz17fSxuPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIGkgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSl7dmFyIGE9bj9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsaSk6bnVsbDthJiYoYS5nZXR8fGEuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkobyxpLGEpOm9baV09ZVtpXX1yZXR1cm4gby5kZWZhdWx0PWUsciYmci5zZXQoZSxvKSxvfWZ1bmN0aW9uIG8oZSl7cmV0dXJuKG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIG4oZSl7aWYoXCJvYmplY3RcIj09PW8oZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe2lmKFwiZ2V0TG9jYWxTdHJlYW1zXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbFN0cmVhbXN8fCh0aGlzLl9sb2NhbFN0cmVhbXM9W10pLHRoaXMuX2xvY2FsU3RyZWFtc30pLCEoXCJhZGRTdHJlYW1cImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSl7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciByPXRoaXM7dGhpcy5fbG9jYWxTdHJlYW1zfHwodGhpcy5fbG9jYWxTdHJlYW1zPVtdKSx0aGlzLl9sb2NhbFN0cmVhbXMuaW5jbHVkZXMoZSl8fHRoaXMuX2xvY2FsU3RyZWFtcy5wdXNoKGUpLGUuZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKG8pe3JldHVybiB0LmNhbGwocixvLGUpfSksZS5nZXRWaWRlb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24obyl7cmV0dXJuIHQuY2FsbChyLG8sZSl9KX0sZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSl7dmFyIHI9YXJndW1lbnRzWzFdO3JldHVybiByJiYodGhpcy5fbG9jYWxTdHJlYW1zP3RoaXMuX2xvY2FsU3RyZWFtcy5pbmNsdWRlcyhyKXx8dGhpcy5fbG9jYWxTdHJlYW1zLnB1c2gocik6dGhpcy5fbG9jYWxTdHJlYW1zPVtyXSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fVwicmVtb3ZlU3RyZWFtXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX2xvY2FsU3RyZWFtc3x8KHRoaXMuX2xvY2FsU3RyZWFtcz1bXSk7dmFyIHI9dGhpcy5fbG9jYWxTdHJlYW1zLmluZGV4T2YoZSk7aWYoLTEhPT1yKXt0aGlzLl9sb2NhbFN0cmVhbXMuc3BsaWNlKHIsMSk7dmFyIG89ZS5nZXRUcmFja3MoKTt0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe28uaW5jbHVkZXMoZS50cmFjaykmJnQucmVtb3ZlVHJhY2soZSl9KX19KX19ZnVuY3Rpb24gaShlKXtpZihcIm9iamVjdFwiPT09byhlKSYmZS5SVENQZWVyQ29ubmVjdGlvbiYmKFwiZ2V0UmVtb3RlU3RyZWFtc1wiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGV8fChlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZW1vdGVTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbW90ZVN0cmVhbXM/dGhpcy5fcmVtb3RlU3RyZWFtczpbXX0pLCEoXCJvbmFkZHN0cmVhbVwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwib25hZGRzdHJlYW1cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uYWRkc3RyZWFtfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9vbmFkZHN0cmVhbSYmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFkZHN0cmVhbVwiLHRoaXMuX29uYWRkc3RyZWFtKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuX29uYWRkc3RyZWFtcG9seSkpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImFkZHN0cmVhbVwiLHRoaXMuX29uYWRkc3RyZWFtPWUpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5fb25hZGRzdHJlYW1wb2x5PWZ1bmN0aW9uKGUpe2Uuc3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKHQuX3JlbW90ZVN0cmVhbXN8fCh0Ll9yZW1vdGVTdHJlYW1zPVtdKSwhdC5fcmVtb3RlU3RyZWFtcy5pbmNsdWRlcyhlKSl7dC5fcmVtb3RlU3RyZWFtcy5wdXNoKGUpO3ZhciByPW5ldyBFdmVudChcImFkZHN0cmVhbVwiKTtyLnN0cmVhbT1lLHQuZGlzcGF0Y2hFdmVudChyKX19KX0pfX0pO3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fb25hZGRzdHJlYW1wb2x5fHx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuX29uYWRkc3RyZWFtcG9seT1mdW5jdGlvbih0KXt0LnN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbih0KXtpZihlLl9yZW1vdGVTdHJlYW1zfHwoZS5fcmVtb3RlU3RyZWFtcz1bXSksIShlLl9yZW1vdGVTdHJlYW1zLmluZGV4T2YodCk+PTApKXtlLl9yZW1vdGVTdHJlYW1zLnB1c2godCk7dmFyIHI9bmV3IEV2ZW50KFwiYWRkc3RyZWFtXCIpO3Iuc3RyZWFtPXQsZS5kaXNwYXRjaEV2ZW50KHIpfX0pfSksdC5hcHBseShlLGFyZ3VtZW50cyl9fX1mdW5jdGlvbiBhKGUpe2lmKFwib2JqZWN0XCI9PT1vKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxyPXQuY3JlYXRlT2ZmZXIsbj10LmNyZWF0ZUFuc3dlcixpPXQuc2V0TG9jYWxEZXNjcmlwdGlvbixhPXQuc2V0UmVtb3RlRGVzY3JpcHRpb24scz10LmFkZEljZUNhbmRpZGF0ZTt0LmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKGUsdCl7dmFyIG89YXJndW1lbnRzLmxlbmd0aD49Mj9hcmd1bWVudHNbMl06YXJndW1lbnRzWzBdLG49ci5hcHBseSh0aGlzLFtvXSk7cmV0dXJuIHQ/KG4udGhlbihlLHQpLFByb21pc2UucmVzb2x2ZSgpKTpufSx0LmNyZWF0ZUFuc3dlcj1mdW5jdGlvbihlLHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+PTI/YXJndW1lbnRzWzJdOmFyZ3VtZW50c1swXSxvPW4uYXBwbHkodGhpcyxbcl0pO3JldHVybiB0PyhvLnRoZW4oZSx0KSxQcm9taXNlLnJlc29sdmUoKSk6b307dmFyIGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBvPWkuYXBwbHkodGhpcyxbZV0pO3JldHVybiByPyhvLnRoZW4odCxyKSxQcm9taXNlLnJlc29sdmUoKSk6b307dC5zZXRMb2NhbERlc2NyaXB0aW9uPWMsYz1mdW5jdGlvbihlLHQscil7dmFyIG89YS5hcHBseSh0aGlzLFtlXSk7cmV0dXJuIHI/KG8udGhlbih0LHIpLFByb21pc2UucmVzb2x2ZSgpKTpvfSx0LnNldFJlbW90ZURlc2NyaXB0aW9uPWMsYz1mdW5jdGlvbihlLHQscil7dmFyIG89cy5hcHBseSh0aGlzLFtlXSk7cmV0dXJuIHI/KG8udGhlbih0LHIpLFByb21pc2UucmVzb2x2ZSgpKTpvfSx0LmFkZEljZUNhbmRpZGF0ZT1jfX1mdW5jdGlvbiBzKGUpe3ZhciB0PWUmJmUubmF2aWdhdG9yO2lmKHQubWVkaWFEZXZpY2VzJiZ0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpe3ZhciByPXQubWVkaWFEZXZpY2VzLG89ci5nZXRVc2VyTWVkaWEuYmluZChyKTt0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSl7cmV0dXJuIG8oYyhlKSl9fSF0LmdldFVzZXJNZWRpYSYmdC5tZWRpYURldmljZXMmJnQubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSYmKHQuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUscixvKXt0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoZSkudGhlbihyLG8pfS5iaW5kKHQpKX1mdW5jdGlvbiBjKHQpe3JldHVybiB0JiZ2b2lkIDAhPT10LnZpZGVvP09iamVjdC5hc3NpZ24oe30sdCx7dmlkZW86ZS5jb21wYWN0T2JqZWN0KHQudmlkZW8pfSk6dH1mdW5jdGlvbiBkKHQpe3ZhciByPXQuUlRDUGVlckNvbm5lY3Rpb247dC5SVENQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbih0LG8pe2lmKHQmJnQuaWNlU2VydmVycyl7Zm9yKHZhciBuPVtdLGk9MDtpPHQuaWNlU2VydmVycy5sZW5ndGg7aSsrKXt2YXIgYT10LmljZVNlcnZlcnNbaV07IWEuaGFzT3duUHJvcGVydHkoXCJ1cmxzXCIpJiZhLmhhc093blByb3BlcnR5KFwidXJsXCIpPyhlLmRlcHJlY2F0ZWQoXCJSVENJY2VTZXJ2ZXIudXJsXCIsXCJSVENJY2VTZXJ2ZXIudXJsc1wiKSwoYT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGEpKSkudXJscz1hLnVybCxkZWxldGUgYS51cmwsbi5wdXNoKGEpKTpuLnB1c2godC5pY2VTZXJ2ZXJzW2ldKX10LmljZVNlcnZlcnM9bn1yZXR1cm4gbmV3IHIodCxvKX0sdC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU9ci5wcm90b3R5cGUsXCJnZW5lcmF0ZUNlcnRpZmljYXRlXCJpbiB0LlJUQ1BlZXJDb25uZWN0aW9uJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodC5SVENQZWVyQ29ubmVjdGlvbixcImdlbmVyYXRlQ2VydGlmaWNhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHIuZ2VuZXJhdGVDZXJ0aWZpY2F0ZX19KX1mdW5jdGlvbiBmKGUpe1wib2JqZWN0XCI9PT1vKGUpJiZlLlJUQ1RyYWNrRXZlbnQmJlwicmVjZWl2ZXJcImluIGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUmJiEoXCJ0cmFuc2NlaXZlclwiaW4gZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLFwidHJhbnNjZWl2ZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue3JlY2VpdmVyOnRoaXMucmVjZWl2ZXJ9fX0pfWZ1bmN0aW9uIHAoZSl7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oZSl7aWYoZSl7dm9pZCAwIT09ZS5vZmZlclRvUmVjZWl2ZUF1ZGlvJiYoZS5vZmZlclRvUmVjZWl2ZUF1ZGlvPSEhZS5vZmZlclRvUmVjZWl2ZUF1ZGlvKTt2YXIgcj10aGlzLmdldFRyYW5zY2VpdmVycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuXCJhdWRpb1wiPT09ZS5yZWNlaXZlci50cmFjay5raW5kfSk7ITE9PT1lLm9mZmVyVG9SZWNlaXZlQXVkaW8mJnI/XCJzZW5kcmVjdlwiPT09ci5kaXJlY3Rpb24/ci5zZXREaXJlY3Rpb24/ci5zZXREaXJlY3Rpb24oXCJzZW5kb25seVwiKTpyLmRpcmVjdGlvbj1cInNlbmRvbmx5XCI6XCJyZWN2b25seVwiPT09ci5kaXJlY3Rpb24mJihyLnNldERpcmVjdGlvbj9yLnNldERpcmVjdGlvbihcImluYWN0aXZlXCIpOnIuZGlyZWN0aW9uPVwiaW5hY3RpdmVcIik6ITAhPT1lLm9mZmVyVG9SZWNlaXZlQXVkaW98fHJ8fHRoaXMuYWRkVHJhbnNjZWl2ZXIoXCJhdWRpb1wiKSx2b2lkIDAhPT1lLm9mZmVyVG9SZWNlaXZlVmlkZW8mJihlLm9mZmVyVG9SZWNlaXZlVmlkZW89ISFlLm9mZmVyVG9SZWNlaXZlVmlkZW8pO3ZhciBvPXRoaXMuZ2V0VHJhbnNjZWl2ZXJzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cInZpZGVvXCI9PT1lLnJlY2VpdmVyLnRyYWNrLmtpbmR9KTshMT09PWUub2ZmZXJUb1JlY2VpdmVWaWRlbyYmbz9cInNlbmRyZWN2XCI9PT1vLmRpcmVjdGlvbj9vLnNldERpcmVjdGlvbj9vLnNldERpcmVjdGlvbihcInNlbmRvbmx5XCIpOm8uZGlyZWN0aW9uPVwic2VuZG9ubHlcIjpcInJlY3Zvbmx5XCI9PT1vLmRpcmVjdGlvbiYmKG8uc2V0RGlyZWN0aW9uP28uc2V0RGlyZWN0aW9uKFwiaW5hY3RpdmVcIik6by5kaXJlY3Rpb249XCJpbmFjdGl2ZVwiKTohMCE9PWUub2ZmZXJUb1JlY2VpdmVWaWRlb3x8b3x8dGhpcy5hZGRUcmFuc2NlaXZlcihcInZpZGVvXCIpfXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCJ9XSxcIkdPUUtcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltUlRDSWNlQ2FuZGlkYXRlPWEsZXhwb3J0cy5zaGltTWF4TWVzc2FnZVNpemU9YyxleHBvcnRzLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3I9cyxleHBvcnRzLnNoaW1Db25uZWN0aW9uU3RhdGU9cCxleHBvcnRzLnJlbW92ZUFsbG93RXh0bWFwTWl4ZWQ9dTt2YXIgZT1yKHJlcXVpcmUoXCJzZHBcIikpLHQ9byhyZXF1aXJlKFwiLi91dGlsc1wiKSk7ZnVuY3Rpb24gbigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIG49ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiBvKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIHQ9bigpO2lmKHQmJnQuaGFzKGUpKXJldHVybiB0LmdldChlKTt2YXIgbz17fSxyPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIGkgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSl7dmFyIGE9cj9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsaSk6bnVsbDthJiYoYS5nZXR8fGEuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkobyxpLGEpOm9baV09ZVtpXX1yZXR1cm4gby5kZWZhdWx0PWUsdCYmdC5zZXQoZSxvKSxvfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIGkoZSl7cmV0dXJuKGk9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIGEobil7aWYobi5SVENJY2VDYW5kaWRhdGUmJiEobi5SVENJY2VDYW5kaWRhdGUmJlwiZm91bmRhdGlvblwiaW4gbi5SVENJY2VDYW5kaWRhdGUucHJvdG90eXBlKSl7dmFyIG89bi5SVENJY2VDYW5kaWRhdGU7bi5SVENJY2VDYW5kaWRhdGU9ZnVuY3Rpb24odCl7aWYoXCJvYmplY3RcIj09PWkodCkmJnQuY2FuZGlkYXRlJiYwPT09dC5jYW5kaWRhdGUuaW5kZXhPZihcImE9XCIpJiYoKHQ9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0KSkpLmNhbmRpZGF0ZT10LmNhbmRpZGF0ZS5zdWJzdHIoMikpLHQuY2FuZGlkYXRlJiZ0LmNhbmRpZGF0ZS5sZW5ndGgpe3ZhciBuPW5ldyBvKHQpLHI9ZS5kZWZhdWx0LnBhcnNlQ2FuZGlkYXRlKHQuY2FuZGlkYXRlKSxhPU9iamVjdC5hc3NpZ24obixyKTtyZXR1cm4gYS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57Y2FuZGlkYXRlOmEuY2FuZGlkYXRlLHNkcE1pZDphLnNkcE1pZCxzZHBNTGluZUluZGV4OmEuc2RwTUxpbmVJbmRleCx1c2VybmFtZUZyYWdtZW50OmEudXNlcm5hbWVGcmFnbWVudH19LGF9cmV0dXJuIG5ldyBvKHQpfSxuLlJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGU9by5wcm90b3R5cGUsdC53cmFwUGVlckNvbm5lY3Rpb25FdmVudChuLFwiaWNlY2FuZGlkYXRlXCIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2FuZGlkYXRlJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcImNhbmRpZGF0ZVwiLHt2YWx1ZTpuZXcgbi5SVENJY2VDYW5kaWRhdGUoZS5jYW5kaWRhdGUpLHdyaXRhYmxlOlwiZmFsc2VcIn0pLGV9KX19ZnVuY3Rpb24gYyhuKXtpZihuLlJUQ1BlZXJDb25uZWN0aW9uKXt2YXIgbz10LmRldGVjdEJyb3dzZXIobik7XCJzY3RwXCJpbiBuLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KG4uUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwic2N0cFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fc2N0cD9udWxsOnRoaXMuX3NjdHB9fSk7dmFyIHI9bi5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247bi5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24oKXtpZih0aGlzLl9zY3RwPW51bGwsXCJjaHJvbWVcIj09PW8uYnJvd3NlciYmby52ZXJzaW9uPj03Nil7dmFye3NkcFNlbWFudGljczp0fT10aGlzLmdldENvbmZpZ3VyYXRpb24oKTtcInBsYW4tYlwiPT09dCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzY3RwXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9zY3RwP251bGw6dGhpcy5fc2N0cH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX1pZihmdW5jdGlvbih0KXtpZighdHx8IXQuc2RwKXJldHVybiExO3ZhciBuPWUuZGVmYXVsdC5zcGxpdFNlY3Rpb25zKHQuc2RwKTtyZXR1cm4gbi5zaGlmdCgpLG4uc29tZShmdW5jdGlvbih0KXt2YXIgbj1lLmRlZmF1bHQucGFyc2VNTGluZSh0KTtyZXR1cm4gbiYmXCJhcHBsaWNhdGlvblwiPT09bi5raW5kJiYtMSE9PW4ucHJvdG9jb2wuaW5kZXhPZihcIlNDVFBcIil9KX0oYXJndW1lbnRzWzBdKSl7dmFyIG4saT1mdW5jdGlvbihlKXt2YXIgdD1lLnNkcC5tYXRjaCgvbW96aWxsYS4uLlRISVNfSVNfU0RQQVJUQS0oXFxkKykvKTtpZihudWxsPT09dHx8dC5sZW5ndGg8MilyZXR1cm4tMTt2YXIgbj1wYXJzZUludCh0WzFdLDEwKTtyZXR1cm4gbiE9bj8tMTpufShhcmd1bWVudHNbMF0pLGE9KHA9aSx1PTY1NTM2LFwiZmlyZWZveFwiPT09by5icm93c2VyJiYodT1vLnZlcnNpb248NTc/LTE9PT1wPzE2Mzg0OjIxNDc0ODM2Mzc6by52ZXJzaW9uPDYwPzU3PT09by52ZXJzaW9uPzY1NTM1OjY1NTM2OjIxNDc0ODM2MzcpLHUpLGM9ZnVuY3Rpb24odCxuKXt2YXIgcj02NTUzNjtcImZpcmVmb3hcIj09PW8uYnJvd3NlciYmNTc9PT1vLnZlcnNpb24mJihyPTY1NTM1KTt2YXIgaT1lLmRlZmF1bHQubWF0Y2hQcmVmaXgodC5zZHAsXCJhPW1heC1tZXNzYWdlLXNpemU6XCIpO3JldHVybiBpLmxlbmd0aD4wP3I9cGFyc2VJbnQoaVswXS5zdWJzdHIoMTkpLDEwKTpcImZpcmVmb3hcIj09PW8uYnJvd3NlciYmLTEhPT1uJiYocj0yMTQ3NDgzNjM3KSxyfShhcmd1bWVudHNbMF0saSk7bj0wPT09YSYmMD09PWM/TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOjA9PT1hfHwwPT09Yz9NYXRoLm1heChhLGMpOk1hdGgubWluKGEsYyk7dmFyIHM9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KHMsXCJtYXhNZXNzYWdlU2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbn19KSx0aGlzLl9zY3RwPXN9dmFyIHAsdTtyZXR1cm4gci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX1mdW5jdGlvbiBzKGUpe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24mJlwiY3JlYXRlRGF0YUNoYW5uZWxcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKXt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbDtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbD1mdW5jdGlvbigpe3ZhciBlPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBvKGUsdGhpcyksZX0sdC53cmFwUGVlckNvbm5lY3Rpb25FdmVudChlLFwiZGF0YWNoYW5uZWxcIixmdW5jdGlvbihlKXtyZXR1cm4gbyhlLmNoYW5uZWwsZS50YXJnZXQpLGV9KX1mdW5jdGlvbiBvKGUsdCl7dmFyIG49ZS5zZW5kO2Uuc2VuZD1mdW5jdGlvbigpe3ZhciBvPWFyZ3VtZW50c1swXSxyPW8ubGVuZ3RofHxvLnNpemV8fG8uYnl0ZUxlbmd0aDtpZihcIm9wZW5cIj09PWUucmVhZHlTdGF0ZSYmdC5zY3RwJiZyPnQuc2N0cC5tYXhNZXNzYWdlU2l6ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWVzc2FnZSB0b28gbGFyZ2UgKGNhbiBzZW5kIGEgbWF4aW11bSBvZiBcIit0LnNjdHAubWF4TWVzc2FnZVNpemUrXCIgYnl0ZXMpXCIpO3JldHVybiBuLmFwcGx5KGUsYXJndW1lbnRzKX19fWZ1bmN0aW9uIHAoZSl7aWYoZS5SVENQZWVyQ29ubmVjdGlvbiYmIShcImNvbm5lY3Rpb25TdGF0ZVwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImNvbm5lY3Rpb25TdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57Y29tcGxldGVkOlwiY29ubmVjdGVkXCIsY2hlY2tpbmc6XCJjb25uZWN0aW5nXCJ9W3RoaXMuaWNlQ29ubmVjdGlvblN0YXRlXXx8dGhpcy5pY2VDb25uZWN0aW9uU3RhdGV9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJvbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2V8fG51bGx9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSYmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlKSxkZWxldGUgdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UpLGUmJnRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlPWUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLFtcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49dFtlXTt0W2VdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHl8fCh0aGlzLl9jb25uZWN0aW9uc3RhdGVjaGFuZ2Vwb2x5PWZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0O2lmKHQuX2xhc3RDb25uZWN0aW9uU3RhdGUhPT10LmNvbm5lY3Rpb25TdGF0ZSl7dC5fbGFzdENvbm5lY3Rpb25TdGF0ZT10LmNvbm5lY3Rpb25TdGF0ZTt2YXIgbj1uZXcgRXZlbnQoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixlKTt0LmRpc3BhdGNoRXZlbnQobil9cmV0dXJuIGV9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHkpKSxuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KX19ZnVuY3Rpb24gdShlKXtpZihlLlJUQ1BlZXJDb25uZWN0aW9uKXt2YXIgbj10LmRldGVjdEJyb3dzZXIoZSk7aWYoIShcImNocm9tZVwiPT09bi5icm93c2VyJiZuLnZlcnNpb24+PTcxKSl7dmFyIG89ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuc2RwJiYtMSE9PWUuc2RwLmluZGV4T2YoXCJcXG5hPWV4dG1hcC1hbGxvdy1taXhlZFwiKSYmKGUuc2RwPWUuc2RwLnNwbGl0KFwiXFxuXCIpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cImE9ZXh0bWFwLWFsbG93LW1peGVkXCIhPT1lLnRyaW0oKX0pLmpvaW4oXCJcXG5cIikpLG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX19fVxufSx7XCJzZHBcIjpcIllIdmhcIixcIi4vdXRpbHNcIjpcImlTeENcIn1dLFwiS3RsR1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmFkYXB0ZXJGYWN0b3J5PW07dmFyIGU9byhyZXF1aXJlKFwiLi91dGlsc1wiKSkscj1vKHJlcXVpcmUoXCIuL2Nocm9tZS9jaHJvbWVfc2hpbVwiKSksaT1vKHJlcXVpcmUoXCIuL2VkZ2UvZWRnZV9zaGltXCIpKSxzPW8ocmVxdWlyZShcIi4vZmlyZWZveC9maXJlZm94X3NoaW1cIikpLHQ9byhyZXF1aXJlKFwiLi9zYWZhcmkvc2FmYXJpX3NoaW1cIikpLGE9byhyZXF1aXJlKFwiLi9jb21tb25fc2hpbVwiKSk7ZnVuY3Rpb24gbigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIG49ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiBvKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIHI9bigpO2lmKHImJnIuaGFzKGUpKXJldHVybiByLmdldChlKTt2YXIgaT17fSxzPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIHQgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KSl7dmFyIGE9cz9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCk6bnVsbDthJiYoYS5nZXR8fGEuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkoaSx0LGEpOmlbdF09ZVt0XX1yZXR1cm4gaS5kZWZhdWx0PWUsciYmci5zZXQoZSxpKSxpfWZ1bmN0aW9uIG0oKXt2YXJ7d2luZG93Om59PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxvPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7c2hpbUNocm9tZTohMCxzaGltRmlyZWZveDohMCxzaGltRWRnZTohMCxzaGltU2FmYXJpOiEwfSxtPWUubG9nLGg9ZS5kZXRlY3RCcm93c2VyKG4pLGQ9e2Jyb3dzZXJEZXRhaWxzOmgsY29tbW9uU2hpbTphLGV4dHJhY3RWZXJzaW9uOmUuZXh0cmFjdFZlcnNpb24sZGlzYWJsZUxvZzplLmRpc2FibGVMb2csZGlzYWJsZVdhcm5pbmdzOmUuZGlzYWJsZVdhcm5pbmdzfTtzd2l0Y2goaC5icm93c2VyKXtjYXNlXCJjaHJvbWVcIjppZighcnx8IXIuc2hpbVBlZXJDb25uZWN0aW9ufHwhby5zaGltQ2hyb21lKXJldHVybiBtKFwiQ2hyb21lIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLlwiKSxkO20oXCJhZGFwdGVyLmpzIHNoaW1taW5nIGNocm9tZS5cIiksZC5icm93c2VyU2hpbT1yLHIuc2hpbUdldFVzZXJNZWRpYShuKSxyLnNoaW1NZWRpYVN0cmVhbShuKSxyLnNoaW1QZWVyQ29ubmVjdGlvbihuKSxyLnNoaW1PblRyYWNrKG4pLHIuc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2sobiksci5zaGltR2V0U2VuZGVyc1dpdGhEdG1mKG4pLHIuc2hpbUdldFN0YXRzKG4pLHIuc2hpbVNlbmRlclJlY2VpdmVyR2V0U3RhdHMobiksci5maXhOZWdvdGlhdGlvbk5lZWRlZChuKSxhLnNoaW1SVENJY2VDYW5kaWRhdGUobiksYS5zaGltQ29ubmVjdGlvblN0YXRlKG4pLGEuc2hpbU1heE1lc3NhZ2VTaXplKG4pLGEuc2hpbVNlbmRUaHJvd1R5cGVFcnJvcihuKSxhLnJlbW92ZUFsbG93RXh0bWFwTWl4ZWQobik7YnJlYWs7Y2FzZVwiZmlyZWZveFwiOmlmKCFzfHwhcy5zaGltUGVlckNvbm5lY3Rpb258fCFvLnNoaW1GaXJlZm94KXJldHVybiBtKFwiRmlyZWZveCBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS5cIiksZDttKFwiYWRhcHRlci5qcyBzaGltbWluZyBmaXJlZm94LlwiKSxkLmJyb3dzZXJTaGltPXMscy5zaGltR2V0VXNlck1lZGlhKG4pLHMuc2hpbVBlZXJDb25uZWN0aW9uKG4pLHMuc2hpbU9uVHJhY2sobikscy5zaGltUmVtb3ZlU3RyZWFtKG4pLHMuc2hpbVNlbmRlckdldFN0YXRzKG4pLHMuc2hpbVJlY2VpdmVyR2V0U3RhdHMobikscy5zaGltUlRDRGF0YUNoYW5uZWwobikscy5zaGltQWRkVHJhbnNjZWl2ZXIobikscy5zaGltQ3JlYXRlT2ZmZXIobikscy5zaGltQ3JlYXRlQW5zd2VyKG4pLGEuc2hpbVJUQ0ljZUNhbmRpZGF0ZShuKSxhLnNoaW1Db25uZWN0aW9uU3RhdGUobiksYS5zaGltTWF4TWVzc2FnZVNpemUobiksYS5zaGltU2VuZFRocm93VHlwZUVycm9yKG4pO2JyZWFrO2Nhc2VcImVkZ2VcIjppZighaXx8IWkuc2hpbVBlZXJDb25uZWN0aW9ufHwhby5zaGltRWRnZSlyZXR1cm4gbShcIk1TIGVkZ2Ugc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpLGQ7bShcImFkYXB0ZXIuanMgc2hpbW1pbmcgZWRnZS5cIiksZC5icm93c2VyU2hpbT1pLGkuc2hpbUdldFVzZXJNZWRpYShuKSxpLnNoaW1HZXREaXNwbGF5TWVkaWEobiksaS5zaGltUGVlckNvbm5lY3Rpb24obiksaS5zaGltUmVwbGFjZVRyYWNrKG4pLGEuc2hpbU1heE1lc3NhZ2VTaXplKG4pLGEuc2hpbVNlbmRUaHJvd1R5cGVFcnJvcihuKTticmVhaztjYXNlXCJzYWZhcmlcIjppZighdHx8IW8uc2hpbVNhZmFyaSlyZXR1cm4gbShcIlNhZmFyaSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS5cIiksZDttKFwiYWRhcHRlci5qcyBzaGltbWluZyBzYWZhcmkuXCIpLGQuYnJvd3NlclNoaW09dCx0LnNoaW1SVENJY2VTZXJ2ZXJVcmxzKG4pLHQuc2hpbUNyZWF0ZU9mZmVyTGVnYWN5KG4pLHQuc2hpbUNhbGxiYWNrc0FQSShuKSx0LnNoaW1Mb2NhbFN0cmVhbXNBUEkobiksdC5zaGltUmVtb3RlU3RyZWFtc0FQSShuKSx0LnNoaW1UcmFja0V2ZW50VHJhbnNjZWl2ZXIobiksdC5zaGltR2V0VXNlck1lZGlhKG4pLGEuc2hpbVJUQ0ljZUNhbmRpZGF0ZShuKSxhLnNoaW1NYXhNZXNzYWdlU2l6ZShuKSxhLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3IobiksYS5yZW1vdmVBbGxvd0V4dG1hcE1peGVkKG4pO2JyZWFrO2RlZmF1bHQ6bShcIlVuc3VwcG9ydGVkIGJyb3dzZXIhXCIpfXJldHVybiBkfVxufSx7XCIuL3V0aWxzXCI6XCJpU3hDXCIsXCIuL2Nocm9tZS9jaHJvbWVfc2hpbVwiOlwidUk1WFwiLFwiLi9lZGdlL2VkZ2Vfc2hpbVwiOlwiWFJpY1wiLFwiLi9maXJlZm94L2ZpcmVmb3hfc2hpbVwiOlwiRnpkclwiLFwiLi9zYWZhcmkvc2FmYXJpX3NoaW1cIjpcInQxbExcIixcIi4vY29tbW9uX3NoaW1cIjpcIkdPUUtcIn1dLFwidEkxWFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBlPXJlcXVpcmUoXCIuL2FkYXB0ZXJfZmFjdG9yeS5qc1wiKSxyPSgwLGUuYWRhcHRlckZhY3RvcnkpKHt3aW5kb3c6d2luZG93fSksdD1yO2V4cG9ydHMuZGVmYXVsdD10O1xufSx7XCIuL2FkYXB0ZXJfZmFjdG9yeS5qc1wiOlwiS3RsR1wifV0sXCJzWHRWXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciB0PWUocmVxdWlyZShcIndlYnJ0Yy1hZGFwdGVyXCIpKTtleHBvcnRzLndlYlJUQ0FkYXB0ZXI9dC5kZWZhdWx0O1xufSx7XCJ3ZWJydGMtYWRhcHRlclwiOlwidEkxWFwifV0sXCJJMzFmXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPXJlcXVpcmUoXCIuL2FkYXB0ZXJcIik7ZXhwb3J0cy5TdXBwb3J0cz1uZXcoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5pc0lPUz1bXCJpUGFkXCIsXCJpUGhvbmVcIixcImlQb2RcIl0uaW5jbHVkZXMobmF2aWdhdG9yLnBsYXRmb3JtKSx0aGlzLnN1cHBvcnRlZEJyb3dzZXJzPVtcImZpcmVmb3hcIixcImNocm9tZVwiLFwic2FmYXJpXCJdLHRoaXMubWluRmlyZWZveFZlcnNpb249NTksdGhpcy5taW5DaHJvbWVWZXJzaW9uPTcyLHRoaXMubWluU2FmYXJpVmVyc2lvbj02MDV9cmV0dXJuIGUucHJvdG90eXBlLmlzV2ViUlRDU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFJUQ1BlZXJDb25uZWN0aW9ufSxlLnByb3RvdHlwZS5pc0Jyb3dzZXJTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXt2YXIgcj10aGlzLmdldEJyb3dzZXIoKSxlPXRoaXMuZ2V0VmVyc2lvbigpO3JldHVybiEhdGhpcy5zdXBwb3J0ZWRCcm93c2Vycy5pbmNsdWRlcyhyKSYmKFwiY2hyb21lXCI9PT1yP2U+PXRoaXMubWluQ2hyb21lVmVyc2lvbjpcImZpcmVmb3hcIj09PXI/ZT49dGhpcy5taW5GaXJlZm94VmVyc2lvbjpcInNhZmFyaVwiPT09ciYmKCF0aGlzLmlzSU9TJiZlPj10aGlzLm1pblNhZmFyaVZlcnNpb24pKX0sZS5wcm90b3R5cGUuZ2V0QnJvd3Nlcj1mdW5jdGlvbigpe3JldHVybiByLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3Nlcn0sZS5wcm90b3R5cGUuZ2V0VmVyc2lvbj1mdW5jdGlvbigpe3JldHVybiByLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMudmVyc2lvbnx8MH0sZS5wcm90b3R5cGUuaXNVbmlmaWVkUGxhblN1cHBvcnRlZD1mdW5jdGlvbigpe3ZhciBlLGk9dGhpcy5nZXRCcm93c2VyKCksdD1yLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMudmVyc2lvbnx8MDtpZihcImNocm9tZVwiPT09aSYmdDw3MilyZXR1cm4hMTtpZihcImZpcmVmb3hcIj09PWkmJnQ+PTU5KXJldHVybiEwO2lmKCEod2luZG93LlJUQ1J0cFRyYW5zY2VpdmVyJiZcImN1cnJlbnREaXJlY3Rpb25cImluIFJUQ1J0cFRyYW5zY2VpdmVyLnByb3RvdHlwZSkpcmV0dXJuITE7dmFyIG89ITE7dHJ5eyhlPW5ldyBSVENQZWVyQ29ubmVjdGlvbikuYWRkVHJhbnNjZWl2ZXIoXCJhdWRpb1wiKSxvPSEwfWNhdGNoKG4pe31maW5hbGx5e2UmJmUuY2xvc2UoKX1yZXR1cm4gb30sZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlN1cHBvcnRzOiBcXG4gICAgYnJvd3NlcjpcIit0aGlzLmdldEJyb3dzZXIoKStcIiBcXG4gICAgdmVyc2lvbjpcIit0aGlzLmdldFZlcnNpb24oKStcIiBcXG4gICAgaXNJT1M6XCIrdGhpcy5pc0lPUytcIiBcXG4gICAgaXNXZWJSVENTdXBwb3J0ZWQ6XCIrdGhpcy5pc1dlYlJUQ1N1cHBvcnRlZCgpK1wiIFxcbiAgICBpc0Jyb3dzZXJTdXBwb3J0ZWQ6XCIrdGhpcy5pc0Jyb3dzZXJTdXBwb3J0ZWQoKStcIiBcXG4gICAgaXNVbmlmaWVkUGxhblN1cHBvcnRlZDpcIit0aGlzLmlzVW5pZmllZFBsYW5TdXBwb3J0ZWQoKX0sZX0oKSk7XG59LHtcIi4vYWRhcHRlclwiOlwic1h0VlwifV0sXCJCSFhmXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciByPXRoaXMmJnRoaXMuX19pbXBvcnRTdGFyfHxmdW5jdGlvbihyKXtpZihyJiZyLl9fZXNNb2R1bGUpcmV0dXJuIHI7dmFyIHQ9e307aWYobnVsbCE9cilmb3IodmFyIGUgaW4gcilPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChyLGUpJiYodFtlXT1yW2VdKTtyZXR1cm4gdC5kZWZhdWx0PXIsdH07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHQ9cihyZXF1aXJlKFwicGVlcmpzLWpzLWJpbmFyeXBhY2tcIikpLGU9cmVxdWlyZShcIi4vc3VwcG9ydHNcIiksbz17aWNlU2VydmVyczpbe3VybHM6XCJzdHVuOnN0dW4ubC5nb29nbGUuY29tOjE5MzAyXCJ9LHt1cmxzOlwidHVybjowLnBlZXJqcy5jb206MzQ3OFwiLHVzZXJuYW1lOlwicGVlcmpzXCIsY3JlZGVudGlhbDpcInBlZXJqc3BcIn1dLHNkcFNlbWFudGljczpcInVuaWZpZWQtcGxhblwifTtleHBvcnRzLnV0aWw9bmV3KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcigpe3RoaXMuQ0xPVURfSE9TVD1cIjAucGVlcmpzLmNvbVwiLHRoaXMuQ0xPVURfUE9SVD00NDMsdGhpcy5jaHVua2VkQnJvd3NlcnM9e0Nocm9tZToxLGNocm9tZToxfSx0aGlzLmNodW5rZWRNVFU9MTYzMDAsdGhpcy5kZWZhdWx0Q29uZmlnPW8sdGhpcy5icm93c2VyPWUuU3VwcG9ydHMuZ2V0QnJvd3NlcigpLHRoaXMuYnJvd3NlclZlcnNpb249ZS5TdXBwb3J0cy5nZXRWZXJzaW9uKCksdGhpcy5zdXBwb3J0cz1mdW5jdGlvbigpe3ZhciByLHQ9e2Jyb3dzZXI6ZS5TdXBwb3J0cy5pc0Jyb3dzZXJTdXBwb3J0ZWQoKSx3ZWJSVEM6ZS5TdXBwb3J0cy5pc1dlYlJUQ1N1cHBvcnRlZCgpLGF1ZGlvVmlkZW86ITEsZGF0YTohMSxiaW5hcnlCbG9iOiExLHJlbGlhYmxlOiExfTtpZighdC53ZWJSVEMpcmV0dXJuIHQ7dHJ5e3I9bmV3IFJUQ1BlZXJDb25uZWN0aW9uKG8pLHQuYXVkaW9WaWRlbz0hMDt2YXIgbj12b2lkIDA7dHJ5e249ci5jcmVhdGVEYXRhQ2hhbm5lbChcIl9QRUVSSlNURVNUXCIse29yZGVyZWQ6ITB9KSx0LmRhdGE9ITAsdC5yZWxpYWJsZT0hIW4ub3JkZXJlZDt0cnl7bi5iaW5hcnlUeXBlPVwiYmxvYlwiLHQuYmluYXJ5QmxvYj0hZS5TdXBwb3J0cy5pc0lPU31jYXRjaChhKXt9fWNhdGNoKGEpe31maW5hbGx5e24mJm4uY2xvc2UoKX19Y2F0Y2goYSl7fWZpbmFsbHl7ciYmci5jbG9zZSgpfXJldHVybiB0fSgpLHRoaXMucGFjaz10LnBhY2ssdGhpcy51bnBhY2s9dC51bnBhY2ssdGhpcy5fZGF0YUNvdW50PTF9cmV0dXJuIHIucHJvdG90eXBlLm5vb3A9ZnVuY3Rpb24oKXt9LHIucHJvdG90eXBlLnZhbGlkYXRlSWQ9ZnVuY3Rpb24ocil7cmV0dXJuIXJ8fC9eW0EtWmEtejAtOV0rKD86WyBfLV1bQS1aYS16MC05XSspKiQvLnRlc3Qocil9LHIucHJvdG90eXBlLmNodW5rPWZ1bmN0aW9uKHIpe2Zvcih2YXIgdD1bXSxlPXIuc2l6ZSxvPU1hdGguY2VpbChlL2V4cG9ydHMudXRpbC5jaHVua2VkTVRVKSxuPTAsYT0wO2E8ZTspe3ZhciBpPU1hdGgubWluKGUsYStleHBvcnRzLnV0aWwuY2h1bmtlZE1UVSkscz1yLnNsaWNlKGEsaSksdT17X19wZWVyRGF0YTp0aGlzLl9kYXRhQ291bnQsbjpuLGRhdGE6cyx0b3RhbDpvfTt0LnB1c2godSksYT1pLG4rK31yZXR1cm4gdGhpcy5fZGF0YUNvdW50KyssdH0sci5wcm90b3R5cGUuYmxvYlRvQXJyYXlCdWZmZXI9ZnVuY3Rpb24ocix0KXt2YXIgZT1uZXcgRmlsZVJlYWRlcjtyZXR1cm4gZS5vbmxvYWQ9ZnVuY3Rpb24ocil7ci50YXJnZXQmJnQoci50YXJnZXQucmVzdWx0KX0sZS5yZWFkQXNBcnJheUJ1ZmZlcihyKSxlfSxyLnByb3RvdHlwZS5iaW5hcnlTdHJpbmdUb0FycmF5QnVmZmVyPWZ1bmN0aW9uKHIpe2Zvcih2YXIgdD1uZXcgVWludDhBcnJheShyLmxlbmd0aCksZT0wO2U8ci5sZW5ndGg7ZSsrKXRbZV09MjU1JnIuY2hhckNvZGVBdChlKTtyZXR1cm4gdC5idWZmZXJ9LHIucHJvdG90eXBlLnJhbmRvbVRva2VuPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyKX0sci5wcm90b3R5cGUuaXNTZWN1cmU9ZnVuY3Rpb24oKXtyZXR1cm5cImh0dHBzOlwiPT09bG9jYXRpb24ucHJvdG9jb2x9LHJ9KCkpO1xufSx7XCJwZWVyanMtanMtYmluYXJ5cGFja1wiOlwia2RQcFwiLFwiLi9zdXBwb3J0c1wiOlwiSTMxZlwifV0sXCJKSmxTXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdD1cIn5cIjtmdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIHIoZSx0LG4pe3RoaXMuZm49ZSx0aGlzLmNvbnRleHQ9dCx0aGlzLm9uY2U9bnx8ITF9ZnVuY3Rpb24gbyhlLG4sbyxzLGkpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG8pdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7dmFyIGM9bmV3IHIobyxzfHxlLGkpLGY9dD90K246bjtyZXR1cm4gZS5fZXZlbnRzW2ZdP2UuX2V2ZW50c1tmXS5mbj9lLl9ldmVudHNbZl09W2UuX2V2ZW50c1tmXSxjXTplLl9ldmVudHNbZl0ucHVzaChjKTooZS5fZXZlbnRzW2ZdPWMsZS5fZXZlbnRzQ291bnQrKyksZX1mdW5jdGlvbiBzKGUsdCl7MD09LS1lLl9ldmVudHNDb3VudD9lLl9ldmVudHM9bmV3IG46ZGVsZXRlIGUuX2V2ZW50c1t0XX1mdW5jdGlvbiBpKCl7dGhpcy5fZXZlbnRzPW5ldyBuLHRoaXMuX2V2ZW50c0NvdW50PTB9T2JqZWN0LmNyZWF0ZSYmKG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCksKG5ldyBuKS5fX3Byb3RvX198fCh0PSExKSksaS5wcm90b3R5cGUuZXZlbnROYW1lcz1mdW5jdGlvbigpe3ZhciBuLHIsbz1bXTtpZigwPT09dGhpcy5fZXZlbnRzQ291bnQpcmV0dXJuIG87Zm9yKHIgaW4gbj10aGlzLl9ldmVudHMpZS5jYWxsKG4scikmJm8ucHVzaCh0P3Iuc2xpY2UoMSk6cik7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/by5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhuKSk6b30saS5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciBuPXQ/dCtlOmUscj10aGlzLl9ldmVudHNbbl07aWYoIXIpcmV0dXJuW107aWYoci5mbilyZXR1cm5bci5mbl07Zm9yKHZhciBvPTAscz1yLmxlbmd0aCxpPW5ldyBBcnJheShzKTtvPHM7bysrKWlbb109cltvXS5mbjtyZXR1cm4gaX0saS5wcm90b3R5cGUubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlKXt2YXIgbj10P3QrZTplLHI9dGhpcy5fZXZlbnRzW25dO3JldHVybiByP3IuZm4/MTpyLmxlbmd0aDowfSxpLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUsbixyLG8scyxpKXt2YXIgYz10P3QrZTplO2lmKCF0aGlzLl9ldmVudHNbY10pcmV0dXJuITE7dmFyIGYsdSxhPXRoaXMuX2V2ZW50c1tjXSxsPWFyZ3VtZW50cy5sZW5ndGg7aWYoYS5mbil7c3dpdGNoKGEub25jZSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGEuZm4sdm9pZCAwLCEwKSxsKXtjYXNlIDE6cmV0dXJuIGEuZm4uY2FsbChhLmNvbnRleHQpLCEwO2Nhc2UgMjpyZXR1cm4gYS5mbi5jYWxsKGEuY29udGV4dCxuKSwhMDtjYXNlIDM6cmV0dXJuIGEuZm4uY2FsbChhLmNvbnRleHQsbixyKSwhMDtjYXNlIDQ6cmV0dXJuIGEuZm4uY2FsbChhLmNvbnRleHQsbixyLG8pLCEwO2Nhc2UgNTpyZXR1cm4gYS5mbi5jYWxsKGEuY29udGV4dCxuLHIsbyxzKSwhMDtjYXNlIDY6cmV0dXJuIGEuZm4uY2FsbChhLmNvbnRleHQsbixyLG8scyxpKSwhMH1mb3IodT0xLGY9bmV3IEFycmF5KGwtMSk7dTxsO3UrKylmW3UtMV09YXJndW1lbnRzW3VdO2EuZm4uYXBwbHkoYS5jb250ZXh0LGYpfWVsc2V7dmFyIHYsaD1hLmxlbmd0aDtmb3IodT0wO3U8aDt1Kyspc3dpdGNoKGFbdV0ub25jZSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGFbdV0uZm4sdm9pZCAwLCEwKSxsKXtjYXNlIDE6YVt1XS5mbi5jYWxsKGFbdV0uY29udGV4dCk7YnJlYWs7Y2FzZSAyOmFbdV0uZm4uY2FsbChhW3VdLmNvbnRleHQsbik7YnJlYWs7Y2FzZSAzOmFbdV0uZm4uY2FsbChhW3VdLmNvbnRleHQsbixyKTticmVhaztjYXNlIDQ6YVt1XS5mbi5jYWxsKGFbdV0uY29udGV4dCxuLHIsbyk7YnJlYWs7ZGVmYXVsdDppZighZilmb3Iodj0xLGY9bmV3IEFycmF5KGwtMSk7djxsO3YrKylmW3YtMV09YXJndW1lbnRzW3ZdO2FbdV0uZm4uYXBwbHkoYVt1XS5jb250ZXh0LGYpfX1yZXR1cm4hMH0saS5wcm90b3R5cGUub249ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBvKHRoaXMsZSx0LG4sITEpfSxpLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbyh0aGlzLGUsdCxuLCEwKX0saS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSxuLHIsbyl7dmFyIGk9dD90K2U6ZTtpZighdGhpcy5fZXZlbnRzW2ldKXJldHVybiB0aGlzO2lmKCFuKXJldHVybiBzKHRoaXMsaSksdGhpczt2YXIgYz10aGlzLl9ldmVudHNbaV07aWYoYy5mbiljLmZuIT09bnx8byYmIWMub25jZXx8ciYmYy5jb250ZXh0IT09cnx8cyh0aGlzLGkpO2Vsc2V7Zm9yKHZhciBmPTAsdT1bXSxhPWMubGVuZ3RoO2Y8YTtmKyspKGNbZl0uZm4hPT1ufHxvJiYhY1tmXS5vbmNlfHxyJiZjW2ZdLmNvbnRleHQhPT1yKSYmdS5wdXNoKGNbZl0pO3UubGVuZ3RoP3RoaXMuX2V2ZW50c1tpXT0xPT09dS5sZW5ndGg/dVswXTp1OnModGhpcyxpKX1yZXR1cm4gdGhpc30saS5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciByO3JldHVybiBlPyhyPXQ/dCtlOmUsdGhpcy5fZXZlbnRzW3JdJiZzKHRoaXMscikpOih0aGlzLl9ldmVudHM9bmV3IG4sdGhpcy5fZXZlbnRzQ291bnQ9MCksdGhpc30saS5wcm90b3R5cGUub2ZmPWkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyLGkucHJvdG90eXBlLmFkZExpc3RlbmVyPWkucHJvdG90eXBlLm9uLGkucHJlZml4ZWQ9dCxpLkV2ZW50RW1pdHRlcj1pLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJihtb2R1bGUuZXhwb3J0cz1pKTtcbn0se31dLFwiV09zOVwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgcj10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24ocixlKXt2YXIgbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnJbU3ltYm9sLml0ZXJhdG9yXTtpZighbylyZXR1cm4gcjt2YXIgdCxuLGw9by5jYWxsKHIpLGk9W107dHJ5e2Zvcig7KHZvaWQgMD09PWV8fGUtLSA+MCkmJiEodD1sLm5leHQoKSkuZG9uZTspaS5wdXNoKHQudmFsdWUpfWNhdGNoKHMpe249e2Vycm9yOnN9fWZpbmFsbHl7dHJ5e3QmJiF0LmRvbmUmJihvPWwucmV0dXJuKSYmby5jYWxsKGwpfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gaX0sZT10aGlzJiZ0aGlzLl9fc3ByZWFkfHxmdW5jdGlvbigpe2Zvcih2YXIgZT1bXSxvPTA7bzxhcmd1bWVudHMubGVuZ3RoO28rKyllPWUuY29uY2F0KHIoYXJndW1lbnRzW29dKSk7cmV0dXJuIGV9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvLHQ9XCJQZWVySlM6IFwiOyFmdW5jdGlvbihyKXtyW3IuRGlzYWJsZWQ9MF09XCJEaXNhYmxlZFwiLHJbci5FcnJvcnM9MV09XCJFcnJvcnNcIixyW3IuV2FybmluZ3M9Ml09XCJXYXJuaW5nc1wiLHJbci5BbGw9M109XCJBbGxcIn0obz1leHBvcnRzLkxvZ0xldmVsfHwoZXhwb3J0cy5Mb2dMZXZlbD17fSkpO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcigpe3RoaXMuX2xvZ0xldmVsPW8uRGlzYWJsZWR9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImxvZ0xldmVsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2dMZXZlbH0sc2V0OmZ1bmN0aW9uKHIpe3RoaXMuX2xvZ0xldmVsPXJ9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksci5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKCl7Zm9yKHZhciByPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXJbdF09YXJndW1lbnRzW3RdO3RoaXMuX2xvZ0xldmVsPj1vLkFsbCYmdGhpcy5fcHJpbnQuYXBwbHkodGhpcyxlKFtvLkFsbF0scikpfSxyLnByb3RvdHlwZS53YXJuPWZ1bmN0aW9uKCl7Zm9yKHZhciByPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXJbdF09YXJndW1lbnRzW3RdO3RoaXMuX2xvZ0xldmVsPj1vLldhcm5pbmdzJiZ0aGlzLl9wcmludC5hcHBseSh0aGlzLGUoW28uV2FybmluZ3NdLHIpKX0sci5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oKXtmb3IodmFyIHI9W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspclt0XT1hcmd1bWVudHNbdF07dGhpcy5fbG9nTGV2ZWw+PW8uRXJyb3JzJiZ0aGlzLl9wcmludC5hcHBseSh0aGlzLGUoW28uRXJyb3JzXSxyKSl9LHIucHJvdG90eXBlLnNldExvZ0Z1bmN0aW9uPWZ1bmN0aW9uKHIpe3RoaXMuX3ByaW50PXJ9LHIucHJvdG90eXBlLl9wcmludD1mdW5jdGlvbihyKXtmb3IodmFyIG49W10sbD0xO2w8YXJndW1lbnRzLmxlbmd0aDtsKyspbltsLTFdPWFyZ3VtZW50c1tsXTt2YXIgaT1lKFt0XSxuKTtmb3IodmFyIHMgaW4gaSlpW3NdaW5zdGFuY2VvZiBFcnJvciYmKGlbc109XCIoXCIraVtzXS5uYW1lK1wiKSBcIitpW3NdLm1lc3NhZ2UpO3I+PW8uQWxsP2NvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsZShpKSk6cj49by5XYXJuaW5ncz9jb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSxlKFtcIldBUk5JTkdcIl0saSkpOnI+PW8uRXJyb3JzJiZjb25zb2xlLmVycm9yLmFwcGx5KGNvbnNvbGUsZShbXCJFUlJPUlwiXSxpKSl9LHJ9KCk7ZXhwb3J0cy5kZWZhdWx0PW5ldyBuO1xufSx7fV0sXCJaUllmXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlLHIsbixvLHQsYSxpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGZ1bmN0aW9uKGUpe2UuT3Blbj1cIm9wZW5cIixlLlN0cmVhbT1cInN0cmVhbVwiLGUuRGF0YT1cImRhdGFcIixlLkNsb3NlPVwiY2xvc2VcIixlLkVycm9yPVwiZXJyb3JcIixlLkljZVN0YXRlQ2hhbmdlZD1cImljZVN0YXRlQ2hhbmdlZFwifShlPWV4cG9ydHMuQ29ubmVjdGlvbkV2ZW50VHlwZXx8KGV4cG9ydHMuQ29ubmVjdGlvbkV2ZW50VHlwZT17fSkpLGZ1bmN0aW9uKGUpe2UuRGF0YT1cImRhdGFcIixlLk1lZGlhPVwibWVkaWFcIn0ocj1leHBvcnRzLkNvbm5lY3Rpb25UeXBlfHwoZXhwb3J0cy5Db25uZWN0aW9uVHlwZT17fSkpLGZ1bmN0aW9uKGUpe2UuT3Blbj1cIm9wZW5cIixlLkNsb3NlPVwiY2xvc2VcIixlLkNvbm5lY3Rpb249XCJjb25uZWN0aW9uXCIsZS5DYWxsPVwiY2FsbFwiLGUuRGlzY29ubmVjdGVkPVwiZGlzY29ubmVjdGVkXCIsZS5FcnJvcj1cImVycm9yXCJ9KG49ZXhwb3J0cy5QZWVyRXZlbnRUeXBlfHwoZXhwb3J0cy5QZWVyRXZlbnRUeXBlPXt9KSksZnVuY3Rpb24oZSl7ZS5Ccm93c2VySW5jb21wYXRpYmxlPVwiYnJvd3Nlci1pbmNvbXBhdGlibGVcIixlLkRpc2Nvbm5lY3RlZD1cImRpc2Nvbm5lY3RlZFwiLGUuSW52YWxpZElEPVwiaW52YWxpZC1pZFwiLGUuSW52YWxpZEtleT1cImludmFsaWQta2V5XCIsZS5OZXR3b3JrPVwibmV0d29ya1wiLGUuUGVlclVuYXZhaWxhYmxlPVwicGVlci11bmF2YWlsYWJsZVwiLGUuU3NsVW5hdmFpbGFibGU9XCJzc2wtdW5hdmFpbGFibGVcIixlLlNlcnZlckVycm9yPVwic2VydmVyLWVycm9yXCIsZS5Tb2NrZXRFcnJvcj1cInNvY2tldC1lcnJvclwiLGUuU29ja2V0Q2xvc2VkPVwic29ja2V0LWNsb3NlZFwiLGUuVW5hdmFpbGFibGVJRD1cInVuYXZhaWxhYmxlLWlkXCIsZS5XZWJSVEM9XCJ3ZWJydGNcIn0obz1leHBvcnRzLlBlZXJFcnJvclR5cGV8fChleHBvcnRzLlBlZXJFcnJvclR5cGU9e30pKSxmdW5jdGlvbihlKXtlLkJpbmFyeT1cImJpbmFyeVwiLGUuQmluYXJ5VVRGOD1cImJpbmFyeS11dGY4XCIsZS5KU09OPVwianNvblwifSh0PWV4cG9ydHMuU2VyaWFsaXphdGlvblR5cGV8fChleHBvcnRzLlNlcmlhbGl6YXRpb25UeXBlPXt9KSksZnVuY3Rpb24oZSl7ZS5NZXNzYWdlPVwibWVzc2FnZVwiLGUuRGlzY29ubmVjdGVkPVwiZGlzY29ubmVjdGVkXCIsZS5FcnJvcj1cImVycm9yXCIsZS5DbG9zZT1cImNsb3NlXCJ9KGE9ZXhwb3J0cy5Tb2NrZXRFdmVudFR5cGV8fChleHBvcnRzLlNvY2tldEV2ZW50VHlwZT17fSkpLGZ1bmN0aW9uKGUpe2UuSGVhcnRiZWF0PVwiSEVBUlRCRUFUXCIsZS5DYW5kaWRhdGU9XCJDQU5ESURBVEVcIixlLk9mZmVyPVwiT0ZGRVJcIixlLkFuc3dlcj1cIkFOU1dFUlwiLGUuT3Blbj1cIk9QRU5cIixlLkVycm9yPVwiRVJST1JcIixlLklkVGFrZW49XCJJRC1UQUtFTlwiLGUuSW52YWxpZEtleT1cIklOVkFMSUQtS0VZXCIsZS5MZWF2ZT1cIkxFQVZFXCIsZS5FeHBpcmU9XCJFWFBJUkVcIn0oaT1leHBvcnRzLlNlcnZlck1lc3NhZ2VUeXBlfHwoZXhwb3J0cy5TZXJ2ZXJNZXNzYWdlVHlwZT17fSkpO1xufSx7fV0sXCJ3Smx2XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsbil7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShuKSYmKGVbbl09dFtuXSl9KSh0LG4pfTtyZXR1cm4gZnVuY3Rpb24odCxuKXtmdW5jdGlvbiBzKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxuKSx0LnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihzLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgcyl9fSgpLHQ9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIG49XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIW4pcmV0dXJuIGU7dmFyIHMsbyxyPW4uY2FsbChlKSxpPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKHM9ci5uZXh0KCkpLmRvbmU7KWkucHVzaChzLnZhbHVlKX1jYXRjaChjKXtvPXtlcnJvcjpjfX1maW5hbGx5e3RyeXtzJiYhcy5kb25lJiYobj1yLnJldHVybikmJm4uY2FsbChyKX1maW5hbGx5e2lmKG8pdGhyb3cgby5lcnJvcn19cmV0dXJuIGl9LG49dGhpcyYmdGhpcy5fX3NwcmVhZHx8ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspZT1lLmNvbmNhdCh0KGFyZ3VtZW50c1tuXSkpO3JldHVybiBlfSxzPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLG49dCYmZVt0XSxzPTA7aWYobilyZXR1cm4gbi5jYWxsKGUpO2lmKGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZzPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtzKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0P1wiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIjpcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIil9LG89dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9cmVxdWlyZShcImV2ZW50ZW1pdHRlcjNcIiksaT1vKHJlcXVpcmUoXCIuL2xvZ2dlclwiKSksYz1yZXF1aXJlKFwiLi9lbnVtc1wiKSxhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG8oZSxuLHMsbyxyLGkpe3ZvaWQgMD09PWkmJihpPTVlMyk7dmFyIGM9dC5jYWxsKHRoaXMpfHx0aGlzO2MucGluZ0ludGVydmFsPWksYy5fZGlzY29ubmVjdGVkPSEwLGMuX21lc3NhZ2VzUXVldWU9W107dmFyIGE9ZT9cIndzczovL1wiOlwid3M6Ly9cIjtyZXR1cm4gYy5fYmFzZVVybD1hK24rXCI6XCIrcytvK1wicGVlcmpzP2tleT1cIityLGN9cmV0dXJuIGUobyx0KSxvLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7dGhpcy5faWQ9ZTt2YXIgcz10aGlzLl9iYXNlVXJsK1wiJmlkPVwiK2UrXCImdG9rZW49XCIrdDshdGhpcy5fc29ja2V0JiZ0aGlzLl9kaXNjb25uZWN0ZWQmJih0aGlzLl9zb2NrZXQ9bmV3IFdlYlNvY2tldChzKSx0aGlzLl9kaXNjb25uZWN0ZWQ9ITEsdGhpcy5fc29ja2V0Lm9ubWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgdDt0cnl7dD1KU09OLnBhcnNlKGUuZGF0YSksaS5kZWZhdWx0LmxvZyhcIlNlcnZlciBtZXNzYWdlIHJlY2VpdmVkOlwiLHQpfWNhdGNoKHMpe3JldHVybiB2b2lkIGkuZGVmYXVsdC5sb2coXCJJbnZhbGlkIHNlcnZlciBtZXNzYWdlXCIsZS5kYXRhKX1uLmVtaXQoYy5Tb2NrZXRFdmVudFR5cGUuTWVzc2FnZSx0KX0sdGhpcy5fc29ja2V0Lm9uY2xvc2U9ZnVuY3Rpb24oZSl7bi5fZGlzY29ubmVjdGVkfHwoaS5kZWZhdWx0LmxvZyhcIlNvY2tldCBjbG9zZWQuXCIsZSksbi5fY2xlYW51cCgpLG4uX2Rpc2Nvbm5lY3RlZD0hMCxuLmVtaXQoYy5Tb2NrZXRFdmVudFR5cGUuRGlzY29ubmVjdGVkKSl9LHRoaXMuX3NvY2tldC5vbm9wZW49ZnVuY3Rpb24oKXtuLl9kaXNjb25uZWN0ZWR8fChuLl9zZW5kUXVldWVkTWVzc2FnZXMoKSxpLmRlZmF1bHQubG9nKFwiU29ja2V0IG9wZW5cIiksbi5fc2NoZWR1bGVIZWFydGJlYXQoKSl9KX0sby5wcm90b3R5cGUuX3NjaGVkdWxlSGVhcnRiZWF0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl93c1BpbmdUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fc2VuZEhlYXJ0YmVhdCgpfSx0aGlzLnBpbmdJbnRlcnZhbCl9LG8ucHJvdG90eXBlLl9zZW5kSGVhcnRiZWF0PWZ1bmN0aW9uKCl7aWYodGhpcy5fd3NPcGVuKCkpe3ZhciBlPUpTT04uc3RyaW5naWZ5KHt0eXBlOmMuU2VydmVyTWVzc2FnZVR5cGUuSGVhcnRiZWF0fSk7dGhpcy5fc29ja2V0LnNlbmQoZSksdGhpcy5fc2NoZWR1bGVIZWFydGJlYXQoKX1lbHNlIGkuZGVmYXVsdC5sb2coXCJDYW5ub3Qgc2VuZCBoZWFydGJlYXQsIGJlY2F1c2Ugc29ja2V0IGNsb3NlZFwiKX0sby5wcm90b3R5cGUuX3dzT3Blbj1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fc29ja2V0JiYxPT09dGhpcy5fc29ja2V0LnJlYWR5U3RhdGV9LG8ucHJvdG90eXBlLl9zZW5kUXVldWVkTWVzc2FnZXM9ZnVuY3Rpb24oKXt2YXIgZSx0LG89bih0aGlzLl9tZXNzYWdlc1F1ZXVlKTt0aGlzLl9tZXNzYWdlc1F1ZXVlPVtdO3RyeXtmb3IodmFyIHI9cyhvKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSl7dmFyIGM9aS52YWx1ZTt0aGlzLnNlbmQoYyl9fWNhdGNoKGEpe2U9e2Vycm9yOmF9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJih0PXIucmV0dXJuKSYmdC5jYWxsKHIpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX19LG8ucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2Rpc2Nvbm5lY3RlZClpZih0aGlzLl9pZClpZihlLnR5cGUpe2lmKHRoaXMuX3dzT3BlbigpKXt2YXIgdD1KU09OLnN0cmluZ2lmeShlKTt0aGlzLl9zb2NrZXQuc2VuZCh0KX19ZWxzZSB0aGlzLmVtaXQoYy5Tb2NrZXRFdmVudFR5cGUuRXJyb3IsXCJJbnZhbGlkIG1lc3NhZ2VcIik7ZWxzZSB0aGlzLl9tZXNzYWdlc1F1ZXVlLnB1c2goZSl9LG8ucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5fZGlzY29ubmVjdGVkfHwodGhpcy5fY2xlYW51cCgpLHRoaXMuX2Rpc2Nvbm5lY3RlZD0hMCl9LG8ucHJvdG90eXBlLl9jbGVhbnVwPWZ1bmN0aW9uKCl7dGhpcy5fc29ja2V0JiYodGhpcy5fc29ja2V0Lm9ub3Blbj10aGlzLl9zb2NrZXQub25tZXNzYWdlPXRoaXMuX3NvY2tldC5vbmNsb3NlPW51bGwsdGhpcy5fc29ja2V0LmNsb3NlKCksdGhpcy5fc29ja2V0PXZvaWQgMCksY2xlYXJUaW1lb3V0KHRoaXMuX3dzUGluZ1RpbWVyKX0sb30oci5FdmVudEVtaXR0ZXIpO2V4cG9ydHMuU29ja2V0PWE7XG59LHtcImV2ZW50ZW1pdHRlcjNcIjpcIkpKbFNcIixcIi4vbG9nZ2VyXCI6XCJXT3M5XCIsXCIuL2VudW1zXCI6XCJaUllmXCJ9XSxcIkhDZFhcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIG4sdD0xLG89YXJndW1lbnRzLmxlbmd0aDt0PG87dCsrKWZvcih2YXIgaSBpbiBuPWFyZ3VtZW50c1t0XSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobixpKSYmKGVbaV09bltpXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG49dGhpcyYmdGhpcy5fX2F3YWl0ZXJ8fGZ1bmN0aW9uKGUsbix0LG8pe3JldHVybiBuZXcodHx8KHQ9UHJvbWlzZSkpKGZ1bmN0aW9uKGkscil7ZnVuY3Rpb24gYyhlKXt0cnl7cyhvLm5leHQoZSkpfWNhdGNoKG4pe3Iobil9fWZ1bmN0aW9uIGEoZSl7dHJ5e3Moby50aHJvdyhlKSl9Y2F0Y2gobil7cihuKX19ZnVuY3Rpb24gcyhlKXt2YXIgbjtlLmRvbmU/aShlLnZhbHVlKToobj1lLnZhbHVlLG4gaW5zdGFuY2VvZiB0P246bmV3IHQoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKGMsYSl9cygobz1vLmFwcGx5KGUsbnx8W10pKS5uZXh0KCkpfSl9LHQ9dGhpcyYmdGhpcy5fX2dlbmVyYXRvcnx8ZnVuY3Rpb24oZSxuKXt2YXIgdCxvLGkscixjPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZigxJmlbMF0pdGhyb3cgaVsxXTtyZXR1cm4gaVsxXX0sdHJ5czpbXSxvcHM6W119O3JldHVybiByPXtuZXh0OmEoMCksdGhyb3c6YSgxKSxyZXR1cm46YSgyKX0sXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiYocltTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxyO2Z1bmN0aW9uIGEocil7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihyKXtpZih0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO2Zvcig7YzspdHJ5e2lmKHQ9MSxvJiYoaT0yJnJbMF0/by5yZXR1cm46clswXT9vLnRocm93fHwoKGk9by5yZXR1cm4pJiZpLmNhbGwobyksMCk6by5uZXh0KSYmIShpPWkuY2FsbChvLHJbMV0pKS5kb25lKXJldHVybiBpO3N3aXRjaChvPTAsaSYmKHI9WzImclswXSxpLnZhbHVlXSksclswXSl7Y2FzZSAwOmNhc2UgMTppPXI7YnJlYWs7Y2FzZSA0OnJldHVybiBjLmxhYmVsKysse3ZhbHVlOnJbMV0sZG9uZTohMX07Y2FzZSA1OmMubGFiZWwrKyxvPXJbMV0scj1bMF07Y29udGludWU7Y2FzZSA3OnI9Yy5vcHMucG9wKCksYy50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoIShpPShpPWMudHJ5cykubGVuZ3RoPjAmJmlbaS5sZW5ndGgtMV0pJiYoNj09PXJbMF18fDI9PT1yWzBdKSl7Yz0wO2NvbnRpbnVlfWlmKDM9PT1yWzBdJiYoIWl8fHJbMV0+aVswXSYmclsxXTxpWzNdKSl7Yy5sYWJlbD1yWzFdO2JyZWFrfWlmKDY9PT1yWzBdJiZjLmxhYmVsPGlbMV0pe2MubGFiZWw9aVsxXSxpPXI7YnJlYWt9aWYoaSYmYy5sYWJlbDxpWzJdKXtjLmxhYmVsPWlbMl0sYy5vcHMucHVzaChyKTticmVha31pWzJdJiZjLm9wcy5wb3AoKSxjLnRyeXMucG9wKCk7Y29udGludWV9cj1uLmNhbGwoZSxjKX1jYXRjaChhKXtyPVs2LGFdLG89MH1maW5hbGx5e3Q9aT0wfWlmKDUmclswXSl0aHJvdyByWzFdO3JldHVybnt2YWx1ZTpyWzBdP3JbMV06dm9pZCAwLGRvbmU6ITB9fShbcixhXSl9fX0sbz10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1yZXF1aXJlKFwiLi91dGlsXCIpLHI9byhyZXF1aXJlKFwiLi9sb2dnZXJcIikpLGM9cmVxdWlyZShcIi4vZW51bXNcIiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIG8oZSl7dGhpcy5jb25uZWN0aW9uPWV9cmV0dXJuIG8ucHJvdG90eXBlLnN0YXJ0Q29ubmVjdGlvbj1mdW5jdGlvbihlKXt2YXIgbj10aGlzLl9zdGFydFBlZXJDb25uZWN0aW9uKCk7aWYodGhpcy5jb25uZWN0aW9uLnBlZXJDb25uZWN0aW9uPW4sdGhpcy5jb25uZWN0aW9uLnR5cGU9PT1jLkNvbm5lY3Rpb25UeXBlLk1lZGlhJiZlLl9zdHJlYW0mJnRoaXMuX2FkZFRyYWNrc1RvQ29ubmVjdGlvbihlLl9zdHJlYW0sbiksZS5vcmlnaW5hdG9yKXtpZih0aGlzLmNvbm5lY3Rpb24udHlwZT09PWMuQ29ubmVjdGlvblR5cGUuRGF0YSl7dmFyIHQ9dGhpcy5jb25uZWN0aW9uLG89e29yZGVyZWQ6ISFlLnJlbGlhYmxlfSxpPW4uY3JlYXRlRGF0YUNoYW5uZWwodC5sYWJlbCxvKTt0LmluaXRpYWxpemUoaSl9dGhpcy5fbWFrZU9mZmVyKCl9ZWxzZSB0aGlzLmhhbmRsZVNEUChcIk9GRkVSXCIsZS5zZHApfSxvLnByb3RvdHlwZS5fc3RhcnRQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbigpe3IuZGVmYXVsdC5sb2coXCJDcmVhdGluZyBSVENQZWVyQ29ubmVjdGlvbi5cIik7dmFyIGU9bmV3IFJUQ1BlZXJDb25uZWN0aW9uKHRoaXMuY29ubmVjdGlvbi5wcm92aWRlci5vcHRpb25zLmNvbmZpZyk7cmV0dXJuIHRoaXMuX3NldHVwTGlzdGVuZXJzKGUpLGV9LG8ucHJvdG90eXBlLl9zZXR1cExpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgbj10aGlzLHQ9dGhpcy5jb25uZWN0aW9uLnBlZXIsbz10aGlzLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkLGE9dGhpcy5jb25uZWN0aW9uLnR5cGUscz10aGlzLmNvbm5lY3Rpb24ucHJvdmlkZXI7ci5kZWZhdWx0LmxvZyhcIkxpc3RlbmluZyBmb3IgSUNFIGNhbmRpZGF0ZXMuXCIpLGUub25pY2VjYW5kaWRhdGU9ZnVuY3Rpb24oZSl7ZS5jYW5kaWRhdGUmJmUuY2FuZGlkYXRlLmNhbmRpZGF0ZSYmKHIuZGVmYXVsdC5sb2coXCJSZWNlaXZlZCBJQ0UgY2FuZGlkYXRlcyBmb3IgXCIrdCtcIjpcIixlLmNhbmRpZGF0ZSkscy5zb2NrZXQuc2VuZCh7dHlwZTpjLlNlcnZlck1lc3NhZ2VUeXBlLkNhbmRpZGF0ZSxwYXlsb2FkOntjYW5kaWRhdGU6ZS5jYW5kaWRhdGUsdHlwZTphLGNvbm5lY3Rpb25JZDpvfSxkc3Q6dH0pKX0sZS5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3N3aXRjaChlLmljZUNvbm5lY3Rpb25TdGF0ZSl7Y2FzZVwiZmFpbGVkXCI6ci5kZWZhdWx0LmxvZyhcImljZUNvbm5lY3Rpb25TdGF0ZSBpcyBmYWlsZWQsIGNsb3NpbmcgY29ubmVjdGlvbnMgdG8gXCIrdCksbi5jb25uZWN0aW9uLmVtaXQoYy5Db25uZWN0aW9uRXZlbnRUeXBlLkVycm9yLG5ldyBFcnJvcihcIk5lZ290aWF0aW9uIG9mIGNvbm5lY3Rpb24gdG8gXCIrdCtcIiBmYWlsZWQuXCIpKSxuLmNvbm5lY3Rpb24uY2xvc2UoKTticmVhaztjYXNlXCJjbG9zZWRcIjpyLmRlZmF1bHQubG9nKFwiaWNlQ29ubmVjdGlvblN0YXRlIGlzIGNsb3NlZCwgY2xvc2luZyBjb25uZWN0aW9ucyB0byBcIit0KSxuLmNvbm5lY3Rpb24uZW1pdChjLkNvbm5lY3Rpb25FdmVudFR5cGUuRXJyb3IsbmV3IEVycm9yKFwiQ29ubmVjdGlvbiB0byBcIit0K1wiIGNsb3NlZC5cIikpLG4uY29ubmVjdGlvbi5jbG9zZSgpO2JyZWFrO2Nhc2VcImRpc2Nvbm5lY3RlZFwiOnIuZGVmYXVsdC5sb2coXCJpY2VDb25uZWN0aW9uU3RhdGUgY2hhbmdlZCB0byBkaXNjb25uZWN0ZWQgb24gdGhlIGNvbm5lY3Rpb24gd2l0aCBcIit0KTticmVhaztjYXNlXCJjb21wbGV0ZWRcIjplLm9uaWNlY2FuZGlkYXRlPWkudXRpbC5ub29wfW4uY29ubmVjdGlvbi5lbWl0KGMuQ29ubmVjdGlvbkV2ZW50VHlwZS5JY2VTdGF0ZUNoYW5nZWQsZS5pY2VDb25uZWN0aW9uU3RhdGUpfSxyLmRlZmF1bHQubG9nKFwiTGlzdGVuaW5nIGZvciBkYXRhIGNoYW5uZWxcIiksZS5vbmRhdGFjaGFubmVsPWZ1bmN0aW9uKGUpe3IuZGVmYXVsdC5sb2coXCJSZWNlaXZlZCBkYXRhIGNoYW5uZWxcIik7dmFyIG49ZS5jaGFubmVsO3MuZ2V0Q29ubmVjdGlvbih0LG8pLmluaXRpYWxpemUobil9LHIuZGVmYXVsdC5sb2coXCJMaXN0ZW5pbmcgZm9yIHJlbW90ZSBzdHJlYW1cIiksZS5vbnRyYWNrPWZ1bmN0aW9uKGUpe3IuZGVmYXVsdC5sb2coXCJSZWNlaXZlZCByZW1vdGUgc3RyZWFtXCIpO3ZhciBpPWUuc3RyZWFtc1swXSxhPXMuZ2V0Q29ubmVjdGlvbih0LG8pO2lmKGEudHlwZT09PWMuQ29ubmVjdGlvblR5cGUuTWVkaWEpe3ZhciBkPWE7bi5fYWRkU3RyZWFtVG9NZWRpYUNvbm5lY3Rpb24oaSxkKX19fSxvLnByb3RvdHlwZS5jbGVhbnVwPWZ1bmN0aW9uKCl7ci5kZWZhdWx0LmxvZyhcIkNsZWFuaW5nIHVwIFBlZXJDb25uZWN0aW9uIHRvIFwiK3RoaXMuY29ubmVjdGlvbi5wZWVyKTt2YXIgZT10aGlzLmNvbm5lY3Rpb24ucGVlckNvbm5lY3Rpb247aWYoZSl7dGhpcy5jb25uZWN0aW9uLnBlZXJDb25uZWN0aW9uPW51bGwsZS5vbmljZWNhbmRpZGF0ZT1lLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWUub25kYXRhY2hhbm5lbD1lLm9udHJhY2s9ZnVuY3Rpb24oKXt9O3ZhciBuPVwiY2xvc2VkXCIhPT1lLnNpZ25hbGluZ1N0YXRlLHQ9ITE7aWYodGhpcy5jb25uZWN0aW9uLnR5cGU9PT1jLkNvbm5lY3Rpb25UeXBlLkRhdGEpe3ZhciBvPXRoaXMuY29ubmVjdGlvbi5kYXRhQ2hhbm5lbDtvJiYodD0hIW8ucmVhZHlTdGF0ZSYmXCJjbG9zZWRcIiE9PW8ucmVhZHlTdGF0ZSl9KG58fHQpJiZlLmNsb3NlKCl9fSxvLnByb3RvdHlwZS5fbWFrZU9mZmVyPWZ1bmN0aW9uKCl7cmV0dXJuIG4odGhpcyx2b2lkIDAsUHJvbWlzZSxmdW5jdGlvbigpe3ZhciBuLG8sYSxzLGQsbCx1O3JldHVybiB0KHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpuPXRoaXMuY29ubmVjdGlvbi5wZWVyQ29ubmVjdGlvbixvPXRoaXMuY29ubmVjdGlvbi5wcm92aWRlcix0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSw3LCw4XSksWzQsbi5jcmVhdGVPZmZlcih0aGlzLmNvbm5lY3Rpb24ub3B0aW9ucy5jb25zdHJhaW50cyldO2Nhc2UgMjphPXQuc2VudCgpLHIuZGVmYXVsdC5sb2coXCJDcmVhdGVkIG9mZmVyLlwiKSx0aGlzLmNvbm5lY3Rpb24ub3B0aW9ucy5zZHBUcmFuc2Zvcm0mJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuY29ubmVjdGlvbi5vcHRpb25zLnNkcFRyYW5zZm9ybSYmKGEuc2RwPXRoaXMuY29ubmVjdGlvbi5vcHRpb25zLnNkcFRyYW5zZm9ybShhLnNkcCl8fGEuc2RwKSx0LmxhYmVsPTM7Y2FzZSAzOnJldHVybiB0LnRyeXMucHVzaChbMyw1LCw2XSksWzQsbi5zZXRMb2NhbERlc2NyaXB0aW9uKGEpXTtjYXNlIDQ6cmV0dXJuIHQuc2VudCgpLHIuZGVmYXVsdC5sb2coXCJTZXQgbG9jYWxEZXNjcmlwdGlvbjpcIixhLFwiZm9yOlwiK3RoaXMuY29ubmVjdGlvbi5wZWVyKSxzPXtzZHA6YSx0eXBlOnRoaXMuY29ubmVjdGlvbi50eXBlLGNvbm5lY3Rpb25JZDp0aGlzLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkLG1ldGFkYXRhOnRoaXMuY29ubmVjdGlvbi5tZXRhZGF0YSxicm93c2VyOmkudXRpbC5icm93c2VyfSx0aGlzLmNvbm5lY3Rpb24udHlwZT09PWMuQ29ubmVjdGlvblR5cGUuRGF0YSYmKGQ9dGhpcy5jb25uZWN0aW9uLHM9ZShlKHt9LHMpLHtsYWJlbDpkLmxhYmVsLHJlbGlhYmxlOmQucmVsaWFibGUsc2VyaWFsaXphdGlvbjpkLnNlcmlhbGl6YXRpb259KSksby5zb2NrZXQuc2VuZCh7dHlwZTpjLlNlcnZlck1lc3NhZ2VUeXBlLk9mZmVyLHBheWxvYWQ6cyxkc3Q6dGhpcy5jb25uZWN0aW9uLnBlZXJ9KSxbMyw2XTtjYXNlIDU6cmV0dXJuXCJPcGVyYXRpb25FcnJvcjogRmFpbGVkIHRvIHNldCBsb2NhbCBvZmZlciBzZHA6IENhbGxlZCBpbiB3cm9uZyBzdGF0ZToga0hhdmVSZW1vdGVPZmZlclwiIT0obD10LnNlbnQoKSkmJihvLmVtaXRFcnJvcihjLlBlZXJFcnJvclR5cGUuV2ViUlRDLGwpLHIuZGVmYXVsdC5sb2coXCJGYWlsZWQgdG8gc2V0TG9jYWxEZXNjcmlwdGlvbiwgXCIsbCkpLFszLDZdO2Nhc2UgNjpyZXR1cm5bMyw4XTtjYXNlIDc6cmV0dXJuIHU9dC5zZW50KCksby5lbWl0RXJyb3IoYy5QZWVyRXJyb3JUeXBlLldlYlJUQyx1KSxyLmRlZmF1bHQubG9nKFwiRmFpbGVkIHRvIGNyZWF0ZU9mZmVyLCBcIix1KSxbMyw4XTtjYXNlIDg6cmV0dXJuWzJdfX0pfSl9LG8ucHJvdG90eXBlLl9tYWtlQW5zd2VyPWZ1bmN0aW9uKCl7cmV0dXJuIG4odGhpcyx2b2lkIDAsUHJvbWlzZSxmdW5jdGlvbigpe3ZhciBlLG4sbyxhLHM7cmV0dXJuIHQodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOmU9dGhpcy5jb25uZWN0aW9uLnBlZXJDb25uZWN0aW9uLG49dGhpcy5jb25uZWN0aW9uLnByb3ZpZGVyLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDcsLDhdKSxbNCxlLmNyZWF0ZUFuc3dlcigpXTtjYXNlIDI6bz10LnNlbnQoKSxyLmRlZmF1bHQubG9nKFwiQ3JlYXRlZCBhbnN3ZXIuXCIpLHRoaXMuY29ubmVjdGlvbi5vcHRpb25zLnNkcFRyYW5zZm9ybSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5jb25uZWN0aW9uLm9wdGlvbnMuc2RwVHJhbnNmb3JtJiYoby5zZHA9dGhpcy5jb25uZWN0aW9uLm9wdGlvbnMuc2RwVHJhbnNmb3JtKG8uc2RwKXx8by5zZHApLHQubGFiZWw9MztjYXNlIDM6cmV0dXJuIHQudHJ5cy5wdXNoKFszLDUsLDZdKSxbNCxlLnNldExvY2FsRGVzY3JpcHRpb24obyldO2Nhc2UgNDpyZXR1cm4gdC5zZW50KCksci5kZWZhdWx0LmxvZyhcIlNldCBsb2NhbERlc2NyaXB0aW9uOlwiLG8sXCJmb3I6XCIrdGhpcy5jb25uZWN0aW9uLnBlZXIpLG4uc29ja2V0LnNlbmQoe3R5cGU6Yy5TZXJ2ZXJNZXNzYWdlVHlwZS5BbnN3ZXIscGF5bG9hZDp7c2RwOm8sdHlwZTp0aGlzLmNvbm5lY3Rpb24udHlwZSxjb25uZWN0aW9uSWQ6dGhpcy5jb25uZWN0aW9uLmNvbm5lY3Rpb25JZCxicm93c2VyOmkudXRpbC5icm93c2VyfSxkc3Q6dGhpcy5jb25uZWN0aW9uLnBlZXJ9KSxbMyw2XTtjYXNlIDU6cmV0dXJuIGE9dC5zZW50KCksbi5lbWl0RXJyb3IoYy5QZWVyRXJyb3JUeXBlLldlYlJUQyxhKSxyLmRlZmF1bHQubG9nKFwiRmFpbGVkIHRvIHNldExvY2FsRGVzY3JpcHRpb24sIFwiLGEpLFszLDZdO2Nhc2UgNjpyZXR1cm5bMyw4XTtjYXNlIDc6cmV0dXJuIHM9dC5zZW50KCksbi5lbWl0RXJyb3IoYy5QZWVyRXJyb3JUeXBlLldlYlJUQyxzKSxyLmRlZmF1bHQubG9nKFwiRmFpbGVkIHRvIGNyZWF0ZSBhbnN3ZXIsIFwiLHMpLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19fSl9KX0sby5wcm90b3R5cGUuaGFuZGxlU0RQPWZ1bmN0aW9uKGUsbyl7cmV0dXJuIG4odGhpcyx2b2lkIDAsUHJvbWlzZSxmdW5jdGlvbigpe3ZhciBuLGksYSxzO3JldHVybiB0KHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpvPW5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obyksbj10aGlzLmNvbm5lY3Rpb24ucGVlckNvbm5lY3Rpb24saT10aGlzLmNvbm5lY3Rpb24ucHJvdmlkZXIsci5kZWZhdWx0LmxvZyhcIlNldHRpbmcgcmVtb3RlIGRlc2NyaXB0aW9uXCIsbyksYT10aGlzLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDUsLDZdKSxbNCxuLnNldFJlbW90ZURlc2NyaXB0aW9uKG8pXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLHIuZGVmYXVsdC5sb2coXCJTZXQgcmVtb3RlRGVzY3JpcHRpb246XCIrZStcIiBmb3I6XCIrdGhpcy5jb25uZWN0aW9uLnBlZXIpLFwiT0ZGRVJcIiE9PWU/WzMsNF06WzQsYS5fbWFrZUFuc3dlcigpXTtjYXNlIDM6dC5zZW50KCksdC5sYWJlbD00O2Nhc2UgNDpyZXR1cm5bMyw2XTtjYXNlIDU6cmV0dXJuIHM9dC5zZW50KCksaS5lbWl0RXJyb3IoYy5QZWVyRXJyb3JUeXBlLldlYlJUQyxzKSxyLmRlZmF1bHQubG9nKFwiRmFpbGVkIHRvIHNldFJlbW90ZURlc2NyaXB0aW9uLCBcIixzKSxbMyw2XTtjYXNlIDY6cmV0dXJuWzJdfX0pfSl9LG8ucHJvdG90eXBlLmhhbmRsZUNhbmRpZGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbih0aGlzLHZvaWQgMCxQcm9taXNlLGZ1bmN0aW9uKCl7dmFyIG4sbyxpLGEscyxkO3JldHVybiB0KHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyLmRlZmF1bHQubG9nKFwiaGFuZGxlQ2FuZGlkYXRlOlwiLGUpLG49ZS5jYW5kaWRhdGUsbz1lLnNkcE1MaW5lSW5kZXgsaT1lLnNkcE1pZCxhPXRoaXMuY29ubmVjdGlvbi5wZWVyQ29ubmVjdGlvbixzPXRoaXMuY29ubmVjdGlvbi5wcm92aWRlcix0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSwzLCw0XSksWzQsYS5hZGRJY2VDYW5kaWRhdGUobmV3IFJUQ0ljZUNhbmRpZGF0ZSh7c2RwTWlkOmksc2RwTUxpbmVJbmRleDpvLGNhbmRpZGF0ZTpufSkpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLHIuZGVmYXVsdC5sb2coXCJBZGRlZCBJQ0UgY2FuZGlkYXRlIGZvcjpcIit0aGlzLmNvbm5lY3Rpb24ucGVlciksWzMsNF07Y2FzZSAzOnJldHVybiBkPXQuc2VudCgpLHMuZW1pdEVycm9yKGMuUGVlckVycm9yVHlwZS5XZWJSVEMsZCksci5kZWZhdWx0LmxvZyhcIkZhaWxlZCB0byBoYW5kbGVDYW5kaWRhdGUsIFwiLGQpLFszLDRdO2Nhc2UgNDpyZXR1cm5bMl19fSl9KX0sby5wcm90b3R5cGUuX2FkZFRyYWNrc1RvQ29ubmVjdGlvbj1mdW5jdGlvbihlLG4pe2lmKHIuZGVmYXVsdC5sb2coXCJhZGQgdHJhY2tzIGZyb20gc3RyZWFtIFwiK2UuaWQrXCIgdG8gcGVlciBjb25uZWN0aW9uXCIpLCFuLmFkZFRyYWNrKXJldHVybiByLmRlZmF1bHQuZXJyb3IoXCJZb3VyIGJyb3dzZXIgZG9lcyd0IHN1cHBvcnQgUlRDUGVlckNvbm5lY3Rpb24jYWRkVHJhY2suIElnbm9yZWQuXCIpO2UuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0KXtuLmFkZFRyYWNrKHQsZSl9KX0sby5wcm90b3R5cGUuX2FkZFN0cmVhbVRvTWVkaWFDb25uZWN0aW9uPWZ1bmN0aW9uKGUsbil7ci5kZWZhdWx0LmxvZyhcImFkZCBzdHJlYW0gXCIrZS5pZCtcIiB0byBtZWRpYSBjb25uZWN0aW9uIFwiK24uY29ubmVjdGlvbklkKSxuLmFkZFN0cmVhbShlKX0sb30oKTtleHBvcnRzLk5lZ290aWF0b3I9YTtcbn0se1wiLi91dGlsXCI6XCJCSFhmXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwiLFwiLi9lbnVtc1wiOlwiWlJZZlwifV0sXCJ0UUZLXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciB0PXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBlPXJlcXVpcmUoXCJldmVudGVtaXR0ZXIzXCIpLHI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcih0LHIsbil7dmFyIG89ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLnBlZXI9dCxvLnByb3ZpZGVyPXIsby5vcHRpb25zPW4sby5fb3Blbj0hMSxvLm1ldGFkYXRhPW4ubWV0YWRhdGEsb31yZXR1cm4gdChyLGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcIm9wZW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wZW59LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSkscn0oZS5FdmVudEVtaXR0ZXIpO2V4cG9ydHMuQmFzZUNvbm5lY3Rpb249cjtcbn0se1wiZXZlbnRlbWl0dGVyM1wiOlwiSkpsU1wifV0sXCJkYkhQXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsbyl7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBvIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShvKSYmKGVbb109dFtvXSl9KSh0LG8pfTtyZXR1cm4gZnVuY3Rpb24odCxvKXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxvKSx0LnByb3RvdHlwZT1udWxsPT09bz9PYmplY3QuY3JlYXRlKG8pOihyLnByb3RvdHlwZT1vLnByb3RvdHlwZSxuZXcgcil9fSgpLHQ9dGhpcyYmdGhpcy5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtyZXR1cm4odD1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQsbz0xLHI9YXJndW1lbnRzLmxlbmd0aDtvPHI7bysrKWZvcih2YXIgbiBpbiB0PWFyZ3VtZW50c1tvXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG89dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Isbz10JiZlW3RdLHI9MDtpZihvKXJldHVybiBvLmNhbGwoZSk7aWYoZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJnI+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW3IrK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/XCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiOlwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKX0scj10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yZXF1aXJlKFwiLi91dGlsXCIpLGk9cihyZXF1aXJlKFwiLi9sb2dnZXJcIikpLGE9cmVxdWlyZShcIi4vbmVnb3RpYXRvclwiKSxzPXJlcXVpcmUoXCIuL2VudW1zXCIpLGw9cmVxdWlyZShcIi4vYmFzZWNvbm5lY3Rpb25cIiksYz1mdW5jdGlvbihyKXtmdW5jdGlvbiBsKGUsdCxvKXt2YXIgaT1yLmNhbGwodGhpcyxlLHQsbyl8fHRoaXM7cmV0dXJuIGkuX2xvY2FsU3RyZWFtPWkub3B0aW9ucy5fc3RyZWFtLGkuY29ubmVjdGlvbklkPWkub3B0aW9ucy5jb25uZWN0aW9uSWR8fGwuSURfUFJFRklYK24udXRpbC5yYW5kb21Ub2tlbigpLGkuX25lZ290aWF0b3I9bmV3IGEuTmVnb3RpYXRvcihpKSxpLl9sb2NhbFN0cmVhbSYmaS5fbmVnb3RpYXRvci5zdGFydENvbm5lY3Rpb24oe19zdHJlYW06aS5fbG9jYWxTdHJlYW0sb3JpZ2luYXRvcjohMH0pLGl9cmV0dXJuIGUobCxyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobC5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBzLkNvbm5lY3Rpb25UeXBlLk1lZGlhfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZSxcImxvY2FsU3RyZWFtXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbFN0cmVhbX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobC5wcm90b3R5cGUsXCJyZW1vdGVTdHJlYW1cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbW90ZVN0cmVhbX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxsLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7aS5kZWZhdWx0LmxvZyhcIlJlY2VpdmluZyBzdHJlYW1cIixlKSx0aGlzLl9yZW1vdGVTdHJlYW09ZSxyLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxzLkNvbm5lY3Rpb25FdmVudFR5cGUuU3RyZWFtLGUpfSxsLnByb3RvdHlwZS5oYW5kbGVNZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0PWUudHlwZSxvPWUucGF5bG9hZDtzd2l0Y2goZS50eXBlKXtjYXNlIHMuU2VydmVyTWVzc2FnZVR5cGUuQW5zd2VyOnRoaXMuX25lZ290aWF0b3IuaGFuZGxlU0RQKHQsby5zZHApLHRoaXMuX29wZW49ITA7YnJlYWs7Y2FzZSBzLlNlcnZlck1lc3NhZ2VUeXBlLkNhbmRpZGF0ZTp0aGlzLl9uZWdvdGlhdG9yLmhhbmRsZUNhbmRpZGF0ZShvLmNhbmRpZGF0ZSk7YnJlYWs7ZGVmYXVsdDppLmRlZmF1bHQud2FybihcIlVucmVjb2duaXplZCBtZXNzYWdlIHR5cGU6XCIrdCtcIiBmcm9tIHBlZXI6XCIrdGhpcy5wZWVyKX19LGwucHJvdG90eXBlLmFuc3dlcj1mdW5jdGlvbihlLHIpe3ZhciBuLGE7aWYodm9pZCAwPT09ciYmKHI9e30pLHRoaXMuX2xvY2FsU3RyZWFtKWkuZGVmYXVsdC53YXJuKFwiTG9jYWwgc3RyZWFtIGFscmVhZHkgZXhpc3RzIG9uIHRoaXMgTWVkaWFDb25uZWN0aW9uLiBBcmUgeW91IGFuc3dlcmluZyBhIGNhbGwgdHdpY2U/XCIpO2Vsc2V7dGhpcy5fbG9jYWxTdHJlYW09ZSxyJiZyLnNkcFRyYW5zZm9ybSYmKHRoaXMub3B0aW9ucy5zZHBUcmFuc2Zvcm09ci5zZHBUcmFuc2Zvcm0pLHRoaXMuX25lZ290aWF0b3Iuc3RhcnRDb25uZWN0aW9uKHQodCh7fSx0aGlzLm9wdGlvbnMuX3BheWxvYWQpLHtfc3RyZWFtOmV9KSk7dmFyIHM9dGhpcy5wcm92aWRlci5fZ2V0TWVzc2FnZXModGhpcy5jb25uZWN0aW9uSWQpO3RyeXtmb3IodmFyIGw9byhzKSxjPWwubmV4dCgpOyFjLmRvbmU7Yz1sLm5leHQoKSl7dmFyIHA9Yy52YWx1ZTt0aGlzLmhhbmRsZU1lc3NhZ2UocCl9fWNhdGNoKHUpe249e2Vycm9yOnV9fWZpbmFsbHl7dHJ5e2MmJiFjLmRvbmUmJihhPWwucmV0dXJuKSYmYS5jYWxsKGwpfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX10aGlzLl9vcGVuPSEwfX0sbC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLl9uZWdvdGlhdG9yJiYodGhpcy5fbmVnb3RpYXRvci5jbGVhbnVwKCksdGhpcy5fbmVnb3RpYXRvcj1udWxsKSx0aGlzLl9sb2NhbFN0cmVhbT1udWxsLHRoaXMuX3JlbW90ZVN0cmVhbT1udWxsLHRoaXMucHJvdmlkZXImJih0aGlzLnByb3ZpZGVyLl9yZW1vdmVDb25uZWN0aW9uKHRoaXMpLHRoaXMucHJvdmlkZXI9bnVsbCksdGhpcy5vcHRpb25zJiZ0aGlzLm9wdGlvbnMuX3N0cmVhbSYmKHRoaXMub3B0aW9ucy5fc3RyZWFtPW51bGwpLHRoaXMub3BlbiYmKHRoaXMuX29wZW49ITEsci5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMscy5Db25uZWN0aW9uRXZlbnRUeXBlLkNsb3NlKSl9LGwuSURfUFJFRklYPVwibWNfXCIsbH0obC5CYXNlQ29ubmVjdGlvbik7ZXhwb3J0cy5NZWRpYUNvbm5lY3Rpb249Yztcbn0se1wiLi91dGlsXCI6XCJCSFhmXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwiLFwiLi9uZWdvdGlhdG9yXCI6XCJIQ2RYXCIsXCIuL2VudW1zXCI6XCJaUllmXCIsXCIuL2Jhc2Vjb25uZWN0aW9uXCI6XCJ0UUZLXCJ9XSxcIkdHcDZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxyKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKX0pKHQscil9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG8oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG8ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBvKX19KCksdD10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1yZXF1aXJlKFwiZXZlbnRlbWl0dGVyM1wiKSxvPXQocmVxdWlyZShcIi4vbG9nZ2VyXCIpKSxuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoKXt2YXIgZT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGUuZmlsZVJlYWRlcj1uZXcgRmlsZVJlYWRlcixlLl9xdWV1ZT1bXSxlLl9wcm9jZXNzaW5nPSExLGUuZmlsZVJlYWRlci5vbmxvYWQ9ZnVuY3Rpb24odCl7ZS5fcHJvY2Vzc2luZz0hMSx0LnRhcmdldCYmZS5lbWl0KFwiZG9uZVwiLHQudGFyZ2V0LnJlc3VsdCksZS5kb05leHRUYXNrKCl9LGUuZmlsZVJlYWRlci5vbmVycm9yPWZ1bmN0aW9uKHQpe28uZGVmYXVsdC5lcnJvcihcIkVuY29kaW5nUXVldWUgZXJyb3I6XCIsdCksZS5fcHJvY2Vzc2luZz0hMSxlLmRlc3Ryb3koKSxlLmVtaXQoXCJlcnJvclwiLHQpfSxlfXJldHVybiBlKHIsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwicXVldWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3F1ZXVlfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVldWUubGVuZ3RofSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInByb2Nlc3NpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb2Nlc3Npbmd9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksci5wcm90b3R5cGUuZW5xdWU9ZnVuY3Rpb24oZSl7dGhpcy5xdWV1ZS5wdXNoKGUpLHRoaXMucHJvY2Vzc2luZ3x8dGhpcy5kb05leHRUYXNrKCl9LHIucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmZpbGVSZWFkZXIuYWJvcnQoKSx0aGlzLl9xdWV1ZT1bXX0sci5wcm90b3R5cGUuZG9OZXh0VGFzaz1mdW5jdGlvbigpezAhPT10aGlzLnNpemUmJih0aGlzLnByb2Nlc3Npbmd8fCh0aGlzLl9wcm9jZXNzaW5nPSEwLHRoaXMuZmlsZVJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcih0aGlzLnF1ZXVlLnNoaWZ0KCkpKSl9LHJ9KHIuRXZlbnRFbWl0dGVyKTtleHBvcnRzLkVuY29kaW5nUXVldWU9bjtcbn0se1wiZXZlbnRlbWl0dGVyM1wiOlwiSkpsU1wiLFwiLi9sb2dnZXJcIjpcIldPczlcIn1dLFwiR0JUUVwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LG4pe3JldHVybihlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJihlW25dPXRbbl0pfSkodCxuKX07cmV0dXJuIGZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsbiksdC5wcm90b3R5cGU9bnVsbD09PW4/T2JqZWN0LmNyZWF0ZShuKTooaS5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IGkpfX0oKSx0PXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLG49dCYmZVt0XSxpPTA7aWYobilyZXR1cm4gbi5jYWxsKGUpO2lmKGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0P1wiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIjpcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIil9LG49dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9cmVxdWlyZShcIi4vdXRpbFwiKSxvPW4ocmVxdWlyZShcIi4vbG9nZ2VyXCIpKSxyPXJlcXVpcmUoXCIuL25lZ290aWF0b3JcIiksYT1yZXF1aXJlKFwiLi9lbnVtc1wiKSxzPXJlcXVpcmUoXCIuL2Jhc2Vjb25uZWN0aW9uXCIpLHU9cmVxdWlyZShcIi4vZW5jb2RpbmdRdWV1ZVwiKSxsPWZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHMoZSx0LGwpe3ZhciBmPW4uY2FsbCh0aGlzLGUsdCxsKXx8dGhpcztyZXR1cm4gZi5zdHJpbmdpZnk9SlNPTi5zdHJpbmdpZnksZi5wYXJzZT1KU09OLnBhcnNlLGYuX2J1ZmZlcj1bXSxmLl9idWZmZXJTaXplPTAsZi5fYnVmZmVyaW5nPSExLGYuX2NodW5rZWREYXRhPXt9LGYuX2VuY29kaW5nUXVldWU9bmV3IHUuRW5jb2RpbmdRdWV1ZSxmLmNvbm5lY3Rpb25JZD1mLm9wdGlvbnMuY29ubmVjdGlvbklkfHxzLklEX1BSRUZJWCtpLnV0aWwucmFuZG9tVG9rZW4oKSxmLmxhYmVsPWYub3B0aW9ucy5sYWJlbHx8Zi5jb25uZWN0aW9uSWQsZi5zZXJpYWxpemF0aW9uPWYub3B0aW9ucy5zZXJpYWxpemF0aW9ufHxhLlNlcmlhbGl6YXRpb25UeXBlLkJpbmFyeSxmLnJlbGlhYmxlPSEhZi5vcHRpb25zLnJlbGlhYmxlLGYuX2VuY29kaW5nUXVldWUub24oXCJkb25lXCIsZnVuY3Rpb24oZSl7Zi5fYnVmZmVyZWRTZW5kKGUpfSksZi5fZW5jb2RpbmdRdWV1ZS5vbihcImVycm9yXCIsZnVuY3Rpb24oKXtvLmRlZmF1bHQuZXJyb3IoXCJEQyNcIitmLmNvbm5lY3Rpb25JZCtcIjogRXJyb3Igb2NjdXJlZCBpbiBlbmNvZGluZyBmcm9tIGJsb2IgdG8gYXJyYXlidWZmZXIsIGNsb3NlIERDXCIpLGYuY2xvc2UoKX0pLGYuX25lZ290aWF0b3I9bmV3IHIuTmVnb3RpYXRvcihmKSxmLl9uZWdvdGlhdG9yLnN0YXJ0Q29ubmVjdGlvbihmLm9wdGlvbnMuX3BheWxvYWR8fHtvcmlnaW5hdG9yOiEwfSksZn1yZXR1cm4gZShzLG4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuQ29ubmVjdGlvblR5cGUuRGF0YX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJkYXRhQ2hhbm5lbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGN9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLFwiYnVmZmVyU2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyU2l6ZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxzLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKGUpe3RoaXMuX2RjPWUsdGhpcy5fY29uZmlndXJlRGF0YUNoYW5uZWwoKX0scy5wcm90b3R5cGUuX2NvbmZpZ3VyZURhdGFDaGFubmVsPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpLnV0aWwuc3VwcG9ydHMuYmluYXJ5QmxvYiYmIWkudXRpbC5zdXBwb3J0cy5yZWxpYWJsZXx8KHRoaXMuZGF0YUNoYW5uZWwuYmluYXJ5VHlwZT1cImFycmF5YnVmZmVyXCIpLHRoaXMuZGF0YUNoYW5uZWwub25vcGVuPWZ1bmN0aW9uKCl7by5kZWZhdWx0LmxvZyhcIkRDI1wiK2UuY29ubmVjdGlvbklkK1wiIGRjIGNvbm5lY3Rpb24gc3VjY2Vzc1wiKSxlLl9vcGVuPSEwLGUuZW1pdChhLkNvbm5lY3Rpb25FdmVudFR5cGUuT3Blbil9LHRoaXMuZGF0YUNoYW5uZWwub25tZXNzYWdlPWZ1bmN0aW9uKHQpe28uZGVmYXVsdC5sb2coXCJEQyNcIitlLmNvbm5lY3Rpb25JZCtcIiBkYyBvbm1lc3NhZ2U6XCIsdC5kYXRhKSxlLl9oYW5kbGVEYXRhTWVzc2FnZSh0KX0sdGhpcy5kYXRhQ2hhbm5lbC5vbmNsb3NlPWZ1bmN0aW9uKCl7by5kZWZhdWx0LmxvZyhcIkRDI1wiK2UuY29ubmVjdGlvbklkK1wiIGRjIGNsb3NlZCBmb3I6XCIsZS5wZWVyKSxlLmNsb3NlKCl9fSxzLnByb3RvdHlwZS5faGFuZGxlRGF0YU1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxvPWUuZGF0YSxyPW8uY29uc3RydWN0b3Iscz1vO2lmKHRoaXMuc2VyaWFsaXphdGlvbj09PWEuU2VyaWFsaXphdGlvblR5cGUuQmluYXJ5fHx0aGlzLnNlcmlhbGl6YXRpb249PT1hLlNlcmlhbGl6YXRpb25UeXBlLkJpbmFyeVVURjgpe2lmKHI9PT1CbG9iKXJldHVybiB2b2lkIGkudXRpbC5ibG9iVG9BcnJheUJ1ZmZlcihvLGZ1bmN0aW9uKGUpe3ZhciBuPWkudXRpbC51bnBhY2soZSk7dC5lbWl0KGEuQ29ubmVjdGlvbkV2ZW50VHlwZS5EYXRhLG4pfSk7aWYocj09PUFycmF5QnVmZmVyKXM9aS51dGlsLnVucGFjayhvKTtlbHNlIGlmKHI9PT1TdHJpbmcpe3ZhciB1PWkudXRpbC5iaW5hcnlTdHJpbmdUb0FycmF5QnVmZmVyKG8pO3M9aS51dGlsLnVucGFjayh1KX19ZWxzZSB0aGlzLnNlcmlhbGl6YXRpb249PT1hLlNlcmlhbGl6YXRpb25UeXBlLkpTT04mJihzPXRoaXMucGFyc2UobykpO3MuX19wZWVyRGF0YT90aGlzLl9oYW5kbGVDaHVuayhzKTpuLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxhLkNvbm5lY3Rpb25FdmVudFR5cGUuRGF0YSxzKX0scy5wcm90b3R5cGUuX2hhbmRsZUNodW5rPWZ1bmN0aW9uKGUpe3ZhciB0PWUuX19wZWVyRGF0YSxuPXRoaXMuX2NodW5rZWREYXRhW3RdfHx7ZGF0YTpbXSxjb3VudDowLHRvdGFsOmUudG90YWx9O2lmKG4uZGF0YVtlLm5dPWUuZGF0YSxuLmNvdW50KyssdGhpcy5fY2h1bmtlZERhdGFbdF09bixuLnRvdGFsPT09bi5jb3VudCl7ZGVsZXRlIHRoaXMuX2NodW5rZWREYXRhW3RdO3ZhciBpPW5ldyBCbG9iKG4uZGF0YSk7dGhpcy5faGFuZGxlRGF0YU1lc3NhZ2Uoe2RhdGE6aX0pfX0scy5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLl9idWZmZXI9W10sdGhpcy5fYnVmZmVyU2l6ZT0wLHRoaXMuX2NodW5rZWREYXRhPXt9LHRoaXMuX25lZ290aWF0b3ImJih0aGlzLl9uZWdvdGlhdG9yLmNsZWFudXAoKSx0aGlzLl9uZWdvdGlhdG9yPW51bGwpLHRoaXMucHJvdmlkZXImJih0aGlzLnByb3ZpZGVyLl9yZW1vdmVDb25uZWN0aW9uKHRoaXMpLHRoaXMucHJvdmlkZXI9bnVsbCksdGhpcy5kYXRhQ2hhbm5lbCYmKHRoaXMuZGF0YUNoYW5uZWwub25vcGVuPW51bGwsdGhpcy5kYXRhQ2hhbm5lbC5vbm1lc3NhZ2U9bnVsbCx0aGlzLmRhdGFDaGFubmVsLm9uY2xvc2U9bnVsbCx0aGlzLl9kYz1udWxsKSx0aGlzLl9lbmNvZGluZ1F1ZXVlJiYodGhpcy5fZW5jb2RpbmdRdWV1ZS5kZXN0cm95KCksdGhpcy5fZW5jb2RpbmdRdWV1ZS5yZW1vdmVBbGxMaXN0ZW5lcnMoKSx0aGlzLl9lbmNvZGluZ1F1ZXVlPW51bGwpLHRoaXMub3BlbiYmKHRoaXMuX29wZW49ITEsbi5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsYS5Db25uZWN0aW9uRXZlbnRUeXBlLkNsb3NlKSl9LHMucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLm9wZW4paWYodGhpcy5zZXJpYWxpemF0aW9uPT09YS5TZXJpYWxpemF0aW9uVHlwZS5KU09OKXRoaXMuX2J1ZmZlcmVkU2VuZCh0aGlzLnN0cmluZ2lmeShlKSk7ZWxzZSBpZih0aGlzLnNlcmlhbGl6YXRpb249PT1hLlNlcmlhbGl6YXRpb25UeXBlLkJpbmFyeXx8dGhpcy5zZXJpYWxpemF0aW9uPT09YS5TZXJpYWxpemF0aW9uVHlwZS5CaW5hcnlVVEY4KXt2YXIgbz1pLnV0aWwucGFjayhlKTtpZighdCYmby5zaXplPmkudXRpbC5jaHVua2VkTVRVKXJldHVybiB2b2lkIHRoaXMuX3NlbmRDaHVua3Mobyk7aS51dGlsLnN1cHBvcnRzLmJpbmFyeUJsb2I/dGhpcy5fYnVmZmVyZWRTZW5kKG8pOnRoaXMuX2VuY29kaW5nUXVldWUuZW5xdWUobyl9ZWxzZSB0aGlzLl9idWZmZXJlZFNlbmQoZSk7ZWxzZSBuLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxhLkNvbm5lY3Rpb25FdmVudFR5cGUuRXJyb3IsbmV3IEVycm9yKFwiQ29ubmVjdGlvbiBpcyBub3Qgb3Blbi4gWW91IHNob3VsZCBsaXN0ZW4gZm9yIHRoZSBgb3BlbmAgZXZlbnQgYmVmb3JlIHNlbmRpbmcgbWVzc2FnZXMuXCIpKX0scy5wcm90b3R5cGUuX2J1ZmZlcmVkU2VuZD1mdW5jdGlvbihlKXshdGhpcy5fYnVmZmVyaW5nJiZ0aGlzLl90cnlTZW5kKGUpfHwodGhpcy5fYnVmZmVyLnB1c2goZSksdGhpcy5fYnVmZmVyU2l6ZT10aGlzLl9idWZmZXIubGVuZ3RoKX0scy5wcm90b3R5cGUuX3RyeVNlbmQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdGhpcy5vcGVuKXJldHVybiExO2lmKHRoaXMuZGF0YUNoYW5uZWwuYnVmZmVyZWRBbW91bnQ+cy5NQVhfQlVGRkVSRURfQU1PVU5UKXJldHVybiB0aGlzLl9idWZmZXJpbmc9ITAsc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2J1ZmZlcmluZz0hMSx0Ll90cnlCdWZmZXIoKX0sNTApLCExO3RyeXt0aGlzLmRhdGFDaGFubmVsLnNlbmQoZSl9Y2F0Y2gobil7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIkRDIzpcIit0aGlzLmNvbm5lY3Rpb25JZCtcIiBFcnJvciB3aGVuIHNlbmRpbmc6XCIsbiksdGhpcy5fYnVmZmVyaW5nPSEwLHRoaXMuY2xvc2UoKSwhMX1yZXR1cm4hMH0scy5wcm90b3R5cGUuX3RyeUJ1ZmZlcj1mdW5jdGlvbigpe2lmKHRoaXMub3BlbiYmMCE9PXRoaXMuX2J1ZmZlci5sZW5ndGgpe3ZhciBlPXRoaXMuX2J1ZmZlclswXTt0aGlzLl90cnlTZW5kKGUpJiYodGhpcy5fYnVmZmVyLnNoaWZ0KCksdGhpcy5fYnVmZmVyU2l6ZT10aGlzLl9idWZmZXIubGVuZ3RoLHRoaXMuX3RyeUJ1ZmZlcigpKX19LHMucHJvdG90eXBlLl9zZW5kQ2h1bmtzPWZ1bmN0aW9uKGUpe3ZhciBuLHIsYT1pLnV0aWwuY2h1bmsoZSk7by5kZWZhdWx0LmxvZyhcIkRDI1wiK3RoaXMuY29ubmVjdGlvbklkK1wiIFRyeSB0byBzZW5kIFwiK2EubGVuZ3RoK1wiIGNodW5rcy4uLlwiKTt0cnl7Zm9yKHZhciBzPXQoYSksdT1zLm5leHQoKTshdS5kb25lO3U9cy5uZXh0KCkpe3ZhciBsPXUudmFsdWU7dGhpcy5zZW5kKGwsITApfX1jYXRjaChmKXtuPXtlcnJvcjpmfX1maW5hbGx5e3RyeXt1JiYhdS5kb25lJiYocj1zLnJldHVybikmJnIuY2FsbChzKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19fSxzLnByb3RvdHlwZS5oYW5kbGVNZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZDtzd2l0Y2goZS50eXBlKXtjYXNlIGEuU2VydmVyTWVzc2FnZVR5cGUuQW5zd2VyOnRoaXMuX25lZ290aWF0b3IuaGFuZGxlU0RQKGUudHlwZSx0LnNkcCk7YnJlYWs7Y2FzZSBhLlNlcnZlck1lc3NhZ2VUeXBlLkNhbmRpZGF0ZTp0aGlzLl9uZWdvdGlhdG9yLmhhbmRsZUNhbmRpZGF0ZSh0LmNhbmRpZGF0ZSk7YnJlYWs7ZGVmYXVsdDpvLmRlZmF1bHQud2FybihcIlVucmVjb2duaXplZCBtZXNzYWdlIHR5cGU6XCIsZS50eXBlLFwiZnJvbSBwZWVyOlwiLHRoaXMucGVlcil9fSxzLklEX1BSRUZJWD1cImRjX1wiLHMuTUFYX0JVRkZFUkVEX0FNT1VOVD04Mzg4NjA4LHN9KHMuQmFzZUNvbm5lY3Rpb24pO2V4cG9ydHMuRGF0YUNvbm5lY3Rpb249bDtcbn0se1wiLi91dGlsXCI6XCJCSFhmXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwiLFwiLi9uZWdvdGlhdG9yXCI6XCJIQ2RYXCIsXCIuL2VudW1zXCI6XCJaUllmXCIsXCIuL2Jhc2Vjb25uZWN0aW9uXCI6XCJ0UUZLXCIsXCIuL2VuY29kaW5nUXVldWVcIjpcIkdHcDZcIn1dLFwiaW43TFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgdD10aGlzJiZ0aGlzLl9fYXdhaXRlcnx8ZnVuY3Rpb24odCxlLHIsbyl7cmV0dXJuIG5ldyhyfHwocj1Qcm9taXNlKSkoZnVuY3Rpb24obixzKXtmdW5jdGlvbiBpKHQpe3RyeXthKG8ubmV4dCh0KSl9Y2F0Y2goZSl7cyhlKX19ZnVuY3Rpb24gdSh0KXt0cnl7YShvLnRocm93KHQpKX1jYXRjaChlKXtzKGUpfX1mdW5jdGlvbiBhKHQpe3ZhciBlO3QuZG9uZT9uKHQudmFsdWUpOihlPXQudmFsdWUsZSBpbnN0YW5jZW9mIHI/ZTpuZXcgcihmdW5jdGlvbih0KXt0KGUpfSkpLnRoZW4oaSx1KX1hKChvPW8uYXBwbHkodCxlfHxbXSkpLm5leHQoKSl9KX0sZT10aGlzJiZ0aGlzLl9fZ2VuZXJhdG9yfHxmdW5jdGlvbih0LGUpe3ZhciByLG8sbixzLGk9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmblswXSl0aHJvdyBuWzFdO3JldHVybiBuWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIHM9e25leHQ6dSgwKSx0aHJvdzp1KDEpLHJldHVybjp1KDIpfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJihzW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHM7ZnVuY3Rpb24gdShzKXtyZXR1cm4gZnVuY3Rpb24odSl7cmV0dXJuIGZ1bmN0aW9uKHMpe2lmKHIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7Zm9yKDtpOyl0cnl7aWYocj0xLG8mJihuPTImc1swXT9vLnJldHVybjpzWzBdP28udGhyb3d8fCgobj1vLnJldHVybikmJm4uY2FsbChvKSwwKTpvLm5leHQpJiYhKG49bi5jYWxsKG8sc1sxXSkpLmRvbmUpcmV0dXJuIG47c3dpdGNoKG89MCxuJiYocz1bMiZzWzBdLG4udmFsdWVdKSxzWzBdKXtjYXNlIDA6Y2FzZSAxOm49czticmVhaztjYXNlIDQ6cmV0dXJuIGkubGFiZWwrKyx7dmFsdWU6c1sxXSxkb25lOiExfTtjYXNlIDU6aS5sYWJlbCsrLG89c1sxXSxzPVswXTtjb250aW51ZTtjYXNlIDc6cz1pLm9wcy5wb3AoKSxpLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKG49KG49aS50cnlzKS5sZW5ndGg+MCYmbltuLmxlbmd0aC0xXSkmJig2PT09c1swXXx8Mj09PXNbMF0pKXtpPTA7Y29udGludWV9aWYoMz09PXNbMF0mJighbnx8c1sxXT5uWzBdJiZzWzFdPG5bM10pKXtpLmxhYmVsPXNbMV07YnJlYWt9aWYoNj09PXNbMF0mJmkubGFiZWw8blsxXSl7aS5sYWJlbD1uWzFdLG49czticmVha31pZihuJiZpLmxhYmVsPG5bMl0pe2kubGFiZWw9blsyXSxpLm9wcy5wdXNoKHMpO2JyZWFrfW5bMl0mJmkub3BzLnBvcCgpLGkudHJ5cy5wb3AoKTtjb250aW51ZX1zPWUuY2FsbCh0LGkpfWNhdGNoKHUpe3M9WzYsdV0sbz0wfWZpbmFsbHl7cj1uPTB9aWYoNSZzWzBdKXRocm93IHNbMV07cmV0dXJue3ZhbHVlOnNbMF0/c1sxXTp2b2lkIDAsZG9uZTohMH19KFtzLHVdKX19fSxyPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXJlcXVpcmUoXCIuL3V0aWxcIiksbj1yKHJlcXVpcmUoXCIuL2xvZ2dlclwiKSkscz1mdW5jdGlvbigpe2Z1bmN0aW9uIHIodCl7dGhpcy5fb3B0aW9ucz10fXJldHVybiByLnByb3RvdHlwZS5fYnVpbGRVcmw9ZnVuY3Rpb24odCl7dmFyIGU9KHRoaXMuX29wdGlvbnMuc2VjdXJlP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIikrdGhpcy5fb3B0aW9ucy5ob3N0K1wiOlwiK3RoaXMuX29wdGlvbnMucG9ydCt0aGlzLl9vcHRpb25zLnBhdGgrdGhpcy5fb3B0aW9ucy5rZXkrXCIvXCIrdDtyZXR1cm4gZSs9XCI/dHM9XCIrKG5ldyBEYXRlKS5nZXRUaW1lKCkrTWF0aC5yYW5kb20oKX0sci5wcm90b3R5cGUucmV0cmlldmVJZD1mdW5jdGlvbigpe3JldHVybiB0KHRoaXMsdm9pZCAwLFByb21pc2UsZnVuY3Rpb24oKXt2YXIgdCxyLHMsaTtyZXR1cm4gZSh0aGlzLGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6dD10aGlzLl9idWlsZFVybChcImlkXCIpLGUubGFiZWw9MTtjYXNlIDE6cmV0dXJuIGUudHJ5cy5wdXNoKFsxLDMsLDRdKSxbNCxmZXRjaCh0KV07Y2FzZSAyOmlmKDIwMCE9PShyPWUuc2VudCgpKS5zdGF0dXMpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IuIFN0YXR1czpcIityLnN0YXR1cyk7cmV0dXJuWzIsci50ZXh0KCldO2Nhc2UgMzp0aHJvdyBzPWUuc2VudCgpLG4uZGVmYXVsdC5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgSURcIixzKSxpPVwiXCIsXCIvXCI9PT10aGlzLl9vcHRpb25zLnBhdGgmJnRoaXMuX29wdGlvbnMuaG9zdCE9PW8udXRpbC5DTE9VRF9IT1NUJiYoaT1cIiBJZiB5b3UgcGFzc2VkIGluIGEgYHBhdGhgIHRvIHlvdXIgc2VsZi1ob3N0ZWQgUGVlclNlcnZlciwgeW91J2xsIGFsc28gbmVlZCB0byBwYXNzIGluIHRoYXQgc2FtZSBwYXRoIHdoZW4gY3JlYXRpbmcgYSBuZXcgUGVlci5cIiksbmV3IEVycm9yKFwiQ291bGQgbm90IGdldCBhbiBJRCBmcm9tIHRoZSBzZXJ2ZXIuXCIraSk7Y2FzZSA0OnJldHVyblsyXX19KX0pfSxyLnByb3RvdHlwZS5saXN0QWxsUGVlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCxQcm9taXNlLGZ1bmN0aW9uKCl7dmFyIHQscixzLGk7cmV0dXJuIGUodGhpcyxmdW5jdGlvbihlKXtzd2l0Y2goZS5sYWJlbCl7Y2FzZSAwOnQ9dGhpcy5fYnVpbGRVcmwoXCJwZWVyc1wiKSxlLmxhYmVsPTE7Y2FzZSAxOnJldHVybiBlLnRyeXMucHVzaChbMSwzLCw0XSksWzQsZmV0Y2godCldO2Nhc2UgMjppZigyMDAhPT0ocj1lLnNlbnQoKSkuc3RhdHVzKXtpZig0MDE9PT1yLnN0YXR1cyl0aHJvdyBzPVwiXCIscz10aGlzLl9vcHRpb25zLmhvc3Q9PT1vLnV0aWwuQ0xPVURfSE9TVD9cIkl0IGxvb2tzIGxpa2UgeW91J3JlIHVzaW5nIHRoZSBjbG91ZCBzZXJ2ZXIuIFlvdSBjYW4gZW1haWwgdGVhbUBwZWVyanMuY29tIHRvIGVuYWJsZSBwZWVyIGxpc3RpbmcgZm9yIHlvdXIgQVBJIGtleS5cIjpcIllvdSBuZWVkIHRvIGVuYWJsZSBgYWxsb3dfZGlzY292ZXJ5YCBvbiB5b3VyIHNlbGYtaG9zdGVkIFBlZXJTZXJ2ZXIgdG8gdXNlIHRoaXMgZmVhdHVyZS5cIixuZXcgRXJyb3IoXCJJdCBkb2Vzbid0IGxvb2sgbGlrZSB5b3UgaGF2ZSBwZXJtaXNzaW9uIHRvIGxpc3QgcGVlcnMgSURzLiBcIitzKTt0aHJvdyBuZXcgRXJyb3IoXCJFcnJvci4gU3RhdHVzOlwiK3Iuc3RhdHVzKX1yZXR1cm5bMixyLmpzb24oKV07Y2FzZSAzOnRocm93IGk9ZS5zZW50KCksbi5kZWZhdWx0LmVycm9yKFwiRXJyb3IgcmV0cmlldmluZyBsaXN0IHBlZXJzXCIsaSksbmV3IEVycm9yKFwiQ291bGQgbm90IGdldCBsaXN0IHBlZXJzIGZyb20gdGhlIHNlcnZlci5cIitpKTtjYXNlIDQ6cmV0dXJuWzJdfX0pfSl9LHJ9KCk7ZXhwb3J0cy5BUEk9cztcbn0se1wiLi91dGlsXCI6XCJCSFhmXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwifV0sXCJIeHBkXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsbil7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShuKSYmKGVbbl09dFtuXSl9KSh0LG4pfTtyZXR1cm4gZnVuY3Rpb24odCxuKXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxuKSx0LnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihyLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgcil9fSgpLHQ9dGhpcyYmdGhpcy5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtyZXR1cm4odD1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQsbj0xLHI9YXJndW1lbnRzLmxlbmd0aDtuPHI7bisrKWZvcih2YXIgbyBpbiB0PWFyZ3VtZW50c1tuXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxvKSYmKGVbb109dFtvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG49dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Isbj10JiZlW3RdLHI9MDtpZihuKXJldHVybiBuLmNhbGwoZSk7aWYoZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJnI+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW3IrK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/XCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiOlwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKX0scj10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighbilyZXR1cm4gZTt2YXIgcixvLGk9bi5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEocj1pLm5leHQoKSkuZG9uZTspcy5wdXNoKHIudmFsdWUpfWNhdGNoKGEpe289e2Vycm9yOmF9fWZpbmFsbHl7dHJ5e3ImJiFyLmRvbmUmJihuPWkucmV0dXJuKSYmbi5jYWxsKGkpfWZpbmFsbHl7aWYobyl0aHJvdyBvLmVycm9yfX1yZXR1cm4gc30sbz10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1yZXF1aXJlKFwiZXZlbnRlbWl0dGVyM1wiKSxzPXJlcXVpcmUoXCIuL3V0aWxcIiksYT1vKHJlcXVpcmUoXCIuL2xvZ2dlclwiKSksYz1yZXF1aXJlKFwiLi9zb2NrZXRcIiksbD1yZXF1aXJlKFwiLi9tZWRpYWNvbm5lY3Rpb25cIiksZD1yZXF1aXJlKFwiLi9kYXRhY29ubmVjdGlvblwiKSx1PXJlcXVpcmUoXCIuL2VudW1zXCIpLHA9cmVxdWlyZShcIi4vYXBpXCIpLGg9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXt9fSgpLGY9ZnVuY3Rpb24obyl7ZnVuY3Rpb24gaShlLG4pe3ZhciByLGM9by5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBjLl9pZD1udWxsLGMuX2xhc3RTZXJ2ZXJJZD1udWxsLGMuX2Rlc3Ryb3llZD0hMSxjLl9kaXNjb25uZWN0ZWQ9ITEsYy5fb3Blbj0hMSxjLl9jb25uZWN0aW9ucz1uZXcgTWFwLGMuX2xvc3RNZXNzYWdlcz1uZXcgTWFwLGUmJmUuY29uc3RydWN0b3I9PU9iamVjdD9uPWU6ZSYmKHI9ZS50b1N0cmluZygpKSxuPXQoe2RlYnVnOjAsaG9zdDpzLnV0aWwuQ0xPVURfSE9TVCxwb3J0OnMudXRpbC5DTE9VRF9QT1JULHBhdGg6XCIvXCIsa2V5OmkuREVGQVVMVF9LRVksdG9rZW46cy51dGlsLnJhbmRvbVRva2VuKCksY29uZmlnOnMudXRpbC5kZWZhdWx0Q29uZmlnfSxuKSxjLl9vcHRpb25zPW4sXCIvXCI9PT1jLl9vcHRpb25zLmhvc3QmJihjLl9vcHRpb25zLmhvc3Q9d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKSxjLl9vcHRpb25zLnBhdGgmJihcIi9cIiE9PWMuX29wdGlvbnMucGF0aFswXSYmKGMuX29wdGlvbnMucGF0aD1cIi9cIitjLl9vcHRpb25zLnBhdGgpLFwiL1wiIT09Yy5fb3B0aW9ucy5wYXRoW2MuX29wdGlvbnMucGF0aC5sZW5ndGgtMV0mJihjLl9vcHRpb25zLnBhdGgrPVwiL1wiKSksdm9pZCAwPT09Yy5fb3B0aW9ucy5zZWN1cmUmJmMuX29wdGlvbnMuaG9zdCE9PXMudXRpbC5DTE9VRF9IT1NUP2MuX29wdGlvbnMuc2VjdXJlPXMudXRpbC5pc1NlY3VyZSgpOmMuX29wdGlvbnMuaG9zdD09cy51dGlsLkNMT1VEX0hPU1QmJihjLl9vcHRpb25zLnNlY3VyZT0hMCksYy5fb3B0aW9ucy5sb2dGdW5jdGlvbiYmYS5kZWZhdWx0LnNldExvZ0Z1bmN0aW9uKGMuX29wdGlvbnMubG9nRnVuY3Rpb24pLGEuZGVmYXVsdC5sb2dMZXZlbD1jLl9vcHRpb25zLmRlYnVnfHwwLGMuX2FwaT1uZXcgcC5BUEkobiksYy5fc29ja2V0PWMuX2NyZWF0ZVNlcnZlckNvbm5lY3Rpb24oKSxzLnV0aWwuc3VwcG9ydHMuYXVkaW9WaWRlb3x8cy51dGlsLnN1cHBvcnRzLmRhdGE/ciYmIXMudXRpbC52YWxpZGF0ZUlkKHIpPyhjLl9kZWxheWVkQWJvcnQodS5QZWVyRXJyb3JUeXBlLkludmFsaWRJRCwnSUQgXCInK3IrJ1wiIGlzIGludmFsaWQnKSxjKToocj9jLl9pbml0aWFsaXplKHIpOmMuX2FwaS5yZXRyaWV2ZUlkKCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gYy5faW5pdGlhbGl6ZShlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBjLl9hYm9ydCh1LlBlZXJFcnJvclR5cGUuU2VydmVyRXJyb3IsZSl9KSxjKTooYy5fZGVsYXllZEFib3J0KHUuUGVlckVycm9yVHlwZS5Ccm93c2VySW5jb21wYXRpYmxlLFwiVGhlIGN1cnJlbnQgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFdlYlJUQ1wiKSxjKX1yZXR1cm4gZShpLG8pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcImlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJvcHRpb25zXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcHRpb25zfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcIm9wZW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wZW59LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwic29ja2V0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb2NrZXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiY29ubmVjdGlvbnNcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGUsdCxvPU9iamVjdC5jcmVhdGUobnVsbCk7dHJ5e2Zvcih2YXIgaT1uKHRoaXMuX2Nvbm5lY3Rpb25zKSxzPWkubmV4dCgpOyFzLmRvbmU7cz1pLm5leHQoKSl7dmFyIGE9cihzLnZhbHVlLDIpLGM9YVswXSxsPWFbMV07b1tjXT1sfX1jYXRjaChkKXtlPXtlcnJvcjpkfX1maW5hbGx5e3RyeXtzJiYhcy5kb25lJiYodD1pLnJldHVybikmJnQuY2FsbChpKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19cmV0dXJuIG99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiZGVzdHJveWVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXN0cm95ZWR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiZGlzY29ubmVjdGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXNjb25uZWN0ZWR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksaS5wcm90b3R5cGUuX2NyZWF0ZVNlcnZlckNvbm5lY3Rpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IGMuU29ja2V0KHRoaXMuX29wdGlvbnMuc2VjdXJlLHRoaXMuX29wdGlvbnMuaG9zdCx0aGlzLl9vcHRpb25zLnBvcnQsdGhpcy5fb3B0aW9ucy5wYXRoLHRoaXMuX29wdGlvbnMua2V5LHRoaXMuX29wdGlvbnMucGluZ0ludGVydmFsKTtyZXR1cm4gdC5vbih1LlNvY2tldEV2ZW50VHlwZS5NZXNzYWdlLGZ1bmN0aW9uKHQpe2UuX2hhbmRsZU1lc3NhZ2UodCl9KSx0Lm9uKHUuU29ja2V0RXZlbnRUeXBlLkVycm9yLGZ1bmN0aW9uKHQpe2UuX2Fib3J0KHUuUGVlckVycm9yVHlwZS5Tb2NrZXRFcnJvcix0KX0pLHQub24odS5Tb2NrZXRFdmVudFR5cGUuRGlzY29ubmVjdGVkLGZ1bmN0aW9uKCl7ZS5kaXNjb25uZWN0ZWR8fChlLmVtaXRFcnJvcih1LlBlZXJFcnJvclR5cGUuTmV0d29yayxcIkxvc3QgY29ubmVjdGlvbiB0byBzZXJ2ZXIuXCIpLGUuZGlzY29ubmVjdCgpKX0pLHQub24odS5Tb2NrZXRFdmVudFR5cGUuQ2xvc2UsZnVuY3Rpb24oKXtlLmRpc2Nvbm5lY3RlZHx8ZS5fYWJvcnQodS5QZWVyRXJyb3JUeXBlLlNvY2tldENsb3NlZCxcIlVuZGVybHlpbmcgc29ja2V0IGlzIGFscmVhZHkgY2xvc2VkLlwiKX0pLHR9LGkucHJvdG90eXBlLl9pbml0aWFsaXplPWZ1bmN0aW9uKGUpe3RoaXMuX2lkPWUsdGhpcy5zb2NrZXQuc3RhcnQoZSx0aGlzLl9vcHRpb25zLnRva2VuKX0saS5wcm90b3R5cGUuX2hhbmRsZU1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQscixvPWUudHlwZSxpPWUucGF5bG9hZCxzPWUuc3JjO3N3aXRjaChvKXtjYXNlIHUuU2VydmVyTWVzc2FnZVR5cGUuT3Blbjp0aGlzLl9sYXN0U2VydmVySWQ9dGhpcy5pZCx0aGlzLl9vcGVuPSEwLHRoaXMuZW1pdCh1LlBlZXJFdmVudFR5cGUuT3Blbix0aGlzLmlkKTticmVhaztjYXNlIHUuU2VydmVyTWVzc2FnZVR5cGUuRXJyb3I6dGhpcy5fYWJvcnQodS5QZWVyRXJyb3JUeXBlLlNlcnZlckVycm9yLGkubXNnKTticmVhaztjYXNlIHUuU2VydmVyTWVzc2FnZVR5cGUuSWRUYWtlbjp0aGlzLl9hYm9ydCh1LlBlZXJFcnJvclR5cGUuVW5hdmFpbGFibGVJRCwnSUQgXCInK3RoaXMuaWQrJ1wiIGlzIHRha2VuJyk7YnJlYWs7Y2FzZSB1LlNlcnZlck1lc3NhZ2VUeXBlLkludmFsaWRLZXk6dGhpcy5fYWJvcnQodS5QZWVyRXJyb3JUeXBlLkludmFsaWRLZXksJ0FQSSBLRVkgXCInK3RoaXMuX29wdGlvbnMua2V5KydcIiBpcyBpbnZhbGlkJyk7YnJlYWs7Y2FzZSB1LlNlcnZlck1lc3NhZ2VUeXBlLkxlYXZlOmEuZGVmYXVsdC5sb2coXCJSZWNlaXZlZCBsZWF2ZSBtZXNzYWdlIGZyb20gXCIrcyksdGhpcy5fY2xlYW51cFBlZXIocyksdGhpcy5fY29ubmVjdGlvbnMuZGVsZXRlKHMpO2JyZWFrO2Nhc2UgdS5TZXJ2ZXJNZXNzYWdlVHlwZS5FeHBpcmU6dGhpcy5lbWl0RXJyb3IodS5QZWVyRXJyb3JUeXBlLlBlZXJVbmF2YWlsYWJsZSxcIkNvdWxkIG5vdCBjb25uZWN0IHRvIHBlZXIgXCIrcyk7YnJlYWs7Y2FzZSB1LlNlcnZlck1lc3NhZ2VUeXBlLk9mZmVyOnZhciBjPWkuY29ubmVjdGlvbklkO2lmKChfPXRoaXMuZ2V0Q29ubmVjdGlvbihzLGMpKSYmKF8uY2xvc2UoKSxhLmRlZmF1bHQud2FybihcIk9mZmVyIHJlY2VpdmVkIGZvciBleGlzdGluZyBDb25uZWN0aW9uIElEOlwiK2MpKSxpLnR5cGU9PT11LkNvbm5lY3Rpb25UeXBlLk1lZGlhKV89bmV3IGwuTWVkaWFDb25uZWN0aW9uKHMsdGhpcyx7Y29ubmVjdGlvbklkOmMsX3BheWxvYWQ6aSxtZXRhZGF0YTppLm1ldGFkYXRhfSksdGhpcy5fYWRkQ29ubmVjdGlvbihzLF8pLHRoaXMuZW1pdCh1LlBlZXJFdmVudFR5cGUuQ2FsbCxfKTtlbHNle2lmKGkudHlwZSE9PXUuQ29ubmVjdGlvblR5cGUuRGF0YSlyZXR1cm4gdm9pZCBhLmRlZmF1bHQud2FybihcIlJlY2VpdmVkIG1hbGZvcm1lZCBjb25uZWN0aW9uIHR5cGU6XCIraS50eXBlKTtfPW5ldyBkLkRhdGFDb25uZWN0aW9uKHMsdGhpcyx7Y29ubmVjdGlvbklkOmMsX3BheWxvYWQ6aSxtZXRhZGF0YTppLm1ldGFkYXRhLGxhYmVsOmkubGFiZWwsc2VyaWFsaXphdGlvbjppLnNlcmlhbGl6YXRpb24scmVsaWFibGU6aS5yZWxpYWJsZX0pLHRoaXMuX2FkZENvbm5lY3Rpb24ocyxfKSx0aGlzLmVtaXQodS5QZWVyRXZlbnRUeXBlLkNvbm5lY3Rpb24sXyl9dmFyIHA9dGhpcy5fZ2V0TWVzc2FnZXMoYyk7dHJ5e2Zvcih2YXIgaD1uKHApLGY9aC5uZXh0KCk7IWYuZG9uZTtmPWgubmV4dCgpKXt2YXIgeT1mLnZhbHVlO18uaGFuZGxlTWVzc2FnZSh5KX19Y2F0Y2godil7dD17ZXJyb3I6dn19ZmluYWxseXt0cnl7ZiYmIWYuZG9uZSYmKHI9aC5yZXR1cm4pJiZyLmNhbGwoaCl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fWJyZWFrO2RlZmF1bHQ6aWYoIWkpcmV0dXJuIHZvaWQgYS5kZWZhdWx0Lndhcm4oXCJZb3UgcmVjZWl2ZWQgYSBtYWxmb3JtZWQgbWVzc2FnZSBmcm9tIFwiK3MrXCIgb2YgdHlwZSBcIitvKTt2YXIgXztjPWkuY29ubmVjdGlvbklkOyhfPXRoaXMuZ2V0Q29ubmVjdGlvbihzLGMpKSYmXy5wZWVyQ29ubmVjdGlvbj9fLmhhbmRsZU1lc3NhZ2UoZSk6Yz90aGlzLl9zdG9yZU1lc3NhZ2UoYyxlKTphLmRlZmF1bHQud2FybihcIllvdSByZWNlaXZlZCBhbiB1bnJlY29nbml6ZWQgbWVzc2FnZTpcIixlKX19LGkucHJvdG90eXBlLl9zdG9yZU1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXt0aGlzLl9sb3N0TWVzc2FnZXMuaGFzKGUpfHx0aGlzLl9sb3N0TWVzc2FnZXMuc2V0KGUsW10pLHRoaXMuX2xvc3RNZXNzYWdlcy5nZXQoZSkucHVzaCh0KX0saS5wcm90b3R5cGUuX2dldE1lc3NhZ2VzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2xvc3RNZXNzYWdlcy5nZXQoZSk7cmV0dXJuIHQ/KHRoaXMuX2xvc3RNZXNzYWdlcy5kZWxldGUoZSksdCk6W119LGkucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10JiYodD17fSksdGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuIGEuZGVmYXVsdC53YXJuKFwiWW91IGNhbm5vdCBjb25uZWN0IHRvIGEgbmV3IFBlZXIgYmVjYXVzZSB5b3UgY2FsbGVkIC5kaXNjb25uZWN0KCkgb24gdGhpcyBQZWVyIGFuZCBlbmRlZCB5b3VyIGNvbm5lY3Rpb24gd2l0aCB0aGUgc2VydmVyLiBZb3UgY2FuIGNyZWF0ZSBhIG5ldyBQZWVyIHRvIHJlY29ubmVjdCwgb3IgY2FsbCByZWNvbm5lY3Qgb24gdGhpcyBwZWVyIGlmIHlvdSBiZWxpZXZlIGl0cyBJRCB0byBzdGlsbCBiZSBhdmFpbGFibGUuXCIpLHZvaWQgdGhpcy5lbWl0RXJyb3IodS5QZWVyRXJyb3JUeXBlLkRpc2Nvbm5lY3RlZCxcIkNhbm5vdCBjb25uZWN0IHRvIG5ldyBQZWVyIGFmdGVyIGRpc2Nvbm5lY3RpbmcgZnJvbSBzZXJ2ZXIuXCIpO3ZhciBuPW5ldyBkLkRhdGFDb25uZWN0aW9uKGUsdGhpcyx0KTtyZXR1cm4gdGhpcy5fYWRkQ29ubmVjdGlvbihlLG4pLG59LGkucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0LG4pe2lmKHZvaWQgMD09PW4mJihuPXt9KSx0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4gYS5kZWZhdWx0Lndhcm4oXCJZb3UgY2Fubm90IGNvbm5lY3QgdG8gYSBuZXcgUGVlciBiZWNhdXNlIHlvdSBjYWxsZWQgLmRpc2Nvbm5lY3QoKSBvbiB0aGlzIFBlZXIgYW5kIGVuZGVkIHlvdXIgY29ubmVjdGlvbiB3aXRoIHRoZSBzZXJ2ZXIuIFlvdSBjYW4gY3JlYXRlIGEgbmV3IFBlZXIgdG8gcmVjb25uZWN0LlwiKSx2b2lkIHRoaXMuZW1pdEVycm9yKHUuUGVlckVycm9yVHlwZS5EaXNjb25uZWN0ZWQsXCJDYW5ub3QgY29ubmVjdCB0byBuZXcgUGVlciBhZnRlciBkaXNjb25uZWN0aW5nIGZyb20gc2VydmVyLlwiKTtpZih0KXtuLl9zdHJlYW09dDt2YXIgcj1uZXcgbC5NZWRpYUNvbm5lY3Rpb24oZSx0aGlzLG4pO3JldHVybiB0aGlzLl9hZGRDb25uZWN0aW9uKGUscikscn1hLmRlZmF1bHQuZXJyb3IoXCJUbyBjYWxsIGEgcGVlciwgeW91IG11c3QgcHJvdmlkZSBhIHN0cmVhbSBmcm9tIHlvdXIgYnJvd3NlcidzIGBnZXRVc2VyTWVkaWFgLlwiKX0saS5wcm90b3R5cGUuX2FkZENvbm5lY3Rpb249ZnVuY3Rpb24oZSx0KXthLmRlZmF1bHQubG9nKFwiYWRkIGNvbm5lY3Rpb24gXCIrdC50eXBlK1wiOlwiK3QuY29ubmVjdGlvbklkK1wiIHRvIHBlZXJJZDpcIitlKSx0aGlzLl9jb25uZWN0aW9ucy5oYXMoZSl8fHRoaXMuX2Nvbm5lY3Rpb25zLnNldChlLFtdKSx0aGlzLl9jb25uZWN0aW9ucy5nZXQoZSkucHVzaCh0KX0saS5wcm90b3R5cGUuX3JlbW92ZUNvbm5lY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29ubmVjdGlvbnMuZ2V0KGUucGVlcik7aWYodCl7dmFyIG49dC5pbmRleE9mKGUpOy0xIT09biYmdC5zcGxpY2UobiwxKX10aGlzLl9sb3N0TWVzc2FnZXMuZGVsZXRlKGUuY29ubmVjdGlvbklkKX0saS5wcm90b3R5cGUuZ2V0Q29ubmVjdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByLG8saT10aGlzLl9jb25uZWN0aW9ucy5nZXQoZSk7aWYoIWkpcmV0dXJuIG51bGw7dHJ5e2Zvcih2YXIgcz1uKGkpLGE9cy5uZXh0KCk7IWEuZG9uZTthPXMubmV4dCgpKXt2YXIgYz1hLnZhbHVlO2lmKGMuY29ubmVjdGlvbklkPT09dClyZXR1cm4gY319Y2F0Y2gobCl7cj17ZXJyb3I6bH19ZmluYWxseXt0cnl7YSYmIWEuZG9uZSYmKG89cy5yZXR1cm4pJiZvLmNhbGwocyl9ZmluYWxseXtpZihyKXRocm93IHIuZXJyb3J9fXJldHVybiBudWxsfSxpLnByb3RvdHlwZS5fZGVsYXllZEFib3J0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5fYWJvcnQoZSx0KX0sMCl9LGkucHJvdG90eXBlLl9hYm9ydD1mdW5jdGlvbihlLHQpe2EuZGVmYXVsdC5lcnJvcihcIkFib3J0aW5nIVwiKSx0aGlzLmVtaXRFcnJvcihlLHQpLHRoaXMuX2xhc3RTZXJ2ZXJJZD90aGlzLmRpc2Nvbm5lY3QoKTp0aGlzLmRlc3Ryb3koKX0saS5wcm90b3R5cGUuZW1pdEVycm9yPWZ1bmN0aW9uKGUsdCl7dmFyIG47YS5kZWZhdWx0LmVycm9yKFwiRXJyb3I6XCIsdCksKG49XCJzdHJpbmdcIj09dHlwZW9mIHQ/bmV3IEVycm9yKHQpOnQpLnR5cGU9ZSx0aGlzLmVtaXQodS5QZWVyRXZlbnRUeXBlLkVycm9yLG4pfSxpLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95ZWR8fChhLmRlZmF1bHQubG9nKFwiRGVzdHJveSBwZWVyIHdpdGggSUQ6XCIrdGhpcy5pZCksdGhpcy5kaXNjb25uZWN0KCksdGhpcy5fY2xlYW51cCgpLHRoaXMuX2Rlc3Ryb3llZD0hMCx0aGlzLmVtaXQodS5QZWVyRXZlbnRUeXBlLkNsb3NlKSl9LGkucHJvdG90eXBlLl9jbGVhbnVwPWZ1bmN0aW9uKCl7dmFyIGUsdDt0cnl7Zm9yKHZhciByPW4odGhpcy5fY29ubmVjdGlvbnMua2V5cygpKSxvPXIubmV4dCgpOyFvLmRvbmU7bz1yLm5leHQoKSl7dmFyIGk9by52YWx1ZTt0aGlzLl9jbGVhbnVwUGVlcihpKSx0aGlzLl9jb25uZWN0aW9ucy5kZWxldGUoaSl9fWNhdGNoKHMpe2U9e2Vycm9yOnN9fWZpbmFsbHl7dHJ5e28mJiFvLmRvbmUmJih0PXIucmV0dXJuKSYmdC5jYWxsKHIpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX10aGlzLnNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoKX0saS5wcm90b3R5cGUuX2NsZWFudXBQZWVyPWZ1bmN0aW9uKGUpe3ZhciB0LHIsbz10aGlzLl9jb25uZWN0aW9ucy5nZXQoZSk7aWYobyl0cnl7Zm9yKHZhciBpPW4obykscz1pLm5leHQoKTshcy5kb25lO3M9aS5uZXh0KCkpe3MudmFsdWUuY2xvc2UoKX19Y2F0Y2goYSl7dD17ZXJyb3I6YX19ZmluYWxseXt0cnl7cyYmIXMuZG9uZSYmKHI9aS5yZXR1cm4pJiZyLmNhbGwoaSl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fX0saS5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe2lmKCF0aGlzLmRpc2Nvbm5lY3RlZCl7dmFyIGU9dGhpcy5pZDthLmRlZmF1bHQubG9nKFwiRGlzY29ubmVjdCBwZWVyIHdpdGggSUQ6XCIrZSksdGhpcy5fZGlzY29ubmVjdGVkPSEwLHRoaXMuX29wZW49ITEsdGhpcy5zb2NrZXQuY2xvc2UoKSx0aGlzLl9sYXN0U2VydmVySWQ9ZSx0aGlzLl9pZD1udWxsLHRoaXMuZW1pdCh1LlBlZXJFdmVudFR5cGUuRGlzY29ubmVjdGVkLGUpfX0saS5wcm90b3R5cGUucmVjb25uZWN0PWZ1bmN0aW9uKCl7aWYodGhpcy5kaXNjb25uZWN0ZWQmJiF0aGlzLmRlc3Ryb3llZClhLmRlZmF1bHQubG9nKFwiQXR0ZW1wdGluZyByZWNvbm5lY3Rpb24gdG8gc2VydmVyIHdpdGggSUQgXCIrdGhpcy5fbGFzdFNlcnZlcklkKSx0aGlzLl9kaXNjb25uZWN0ZWQ9ITEsdGhpcy5faW5pdGlhbGl6ZSh0aGlzLl9sYXN0U2VydmVySWQpO2Vsc2V7aWYodGhpcy5kZXN0cm95ZWQpdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBwZWVyIGNhbm5vdCByZWNvbm5lY3QgdG8gdGhlIHNlcnZlci4gSXQgaGFzIGFscmVhZHkgYmVlbiBkZXN0cm95ZWQuXCIpO2lmKHRoaXMuZGlzY29ubmVjdGVkfHx0aGlzLm9wZW4pdGhyb3cgbmV3IEVycm9yKFwiUGVlciBcIit0aGlzLmlkK1wiIGNhbm5vdCByZWNvbm5lY3QgYmVjYXVzZSBpdCBpcyBub3QgZGlzY29ubmVjdGVkIGZyb20gdGhlIHNlcnZlciFcIik7YS5kZWZhdWx0LmVycm9yKFwiSW4gYSBodXJyeT8gV2UncmUgc3RpbGwgdHJ5aW5nIHRvIG1ha2UgdGhlIGluaXRpYWwgY29ubmVjdGlvbiFcIil9fSxpLnByb3RvdHlwZS5saXN0QWxsUGVlcnM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt2b2lkIDA9PT1lJiYoZT1mdW5jdGlvbihlKXt9KSx0aGlzLl9hcGkubGlzdEFsbFBlZXJzKCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZSh0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9hYm9ydCh1LlBlZXJFcnJvclR5cGUuU2VydmVyRXJyb3IsZSl9KX0saS5ERUZBVUxUX0tFWT1cInBlZXJqc1wiLGl9KGkuRXZlbnRFbWl0dGVyKTtleHBvcnRzLlBlZXI9Zjtcbn0se1wiZXZlbnRlbWl0dGVyM1wiOlwiSkpsU1wiLFwiLi91dGlsXCI6XCJCSFhmXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwiLFwiLi9zb2NrZXRcIjpcIndKbHZcIixcIi4vbWVkaWFjb25uZWN0aW9uXCI6XCJkYkhQXCIsXCIuL2RhdGFjb25uZWN0aW9uXCI6XCJHQlRRXCIsXCIuL2VudW1zXCI6XCJaUllmXCIsXCIuL2FwaVwiOlwiaW43TFwifV0sXCJpVEs2XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBlPXJlcXVpcmUoXCIuL3V0aWxcIikscj1yZXF1aXJlKFwiLi9wZWVyXCIpO2V4cG9ydHMucGVlcmpzPXtQZWVyOnIuUGVlcix1dGlsOmUudXRpbH0sZXhwb3J0cy5kZWZhdWx0PXIuUGVlcix3aW5kb3cucGVlcmpzPWV4cG9ydHMucGVlcmpzLHdpbmRvdy5QZWVyPXIuUGVlcjtcbn0se1wiLi91dGlsXCI6XCJCSFhmXCIsXCIuL3BlZXJcIjpcIkh4cGRcIn1dfSx7fSxbXCJpVEs2XCJdLCBudWxsKVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9L3BlZXJqcy5taW4uanMubWFwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///391\n')},784:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=784,e.exports=t}},__webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var c in t)__webpack_require__.o(t,c)&&!__webpack_require__.o(e,c)&&Object.defineProperty(e,c,{enumerable:!0,get:t[c]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";eval("\n// CONCATENATED MODULE: ./src/util.ts\n/*\n * util.ts\n *\n * Module for misc. utility functions.\n */\nfunction sleep(ms) {\n    return new Promise(r => setTimeout(r, ms));\n}\n/** Checks if any Item in s matches. Then return the element in the set that matched.\n * Returns null if there are no matches.\n */\nfunction anyMatch(s, matchFunc) {\n    for (const e of s) {\n        if (matchFunc(e)) {\n            return e;\n        }\n    }\n    return null;\n}\n\n// EXTERNAL MODULE: ./node_modules/peerjs/dist/peerjs.min.js\nvar peerjs_min = __webpack_require__(391);\nvar peerjs_min_default = /*#__PURE__*/__webpack_require__.n(peerjs_min);\n\n// CONCATENATED MODULE: ./src/p2p.ts\n/*\n * p2p.ts\n *\n * Module for managing P2P communication.\n */\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\nvar MessageType;\n(function (MessageType) {\n    MessageType[MessageType[\"START_GAME\"] = 0] = \"START_GAME\";\n    MessageType[MessageType[\"MOVE\"] = 1] = \"MOVE\";\n    MessageType[MessageType[\"END_TURN\"] = 2] = \"END_TURN\";\n})(MessageType || (MessageType = {}));\nconst localPeer = new (peerjs_min_default())({ debug: 1 });\nlet conn;\n/** Get the broker ID for a Peer connection. */\nfunction getBrokerId(peer) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const id = new Promise((resolve, reject) => {\n            if (peer.id) {\n                resolve(peer.id);\n            }\n            else {\n                peer.on('open', id => {\n                    resolve(id);\n                });\n                peer.on('error', err => {\n                    reject(err);\n                });\n            }\n        });\n        return yield id;\n    });\n}\nfunction addDataConnectionHandlers() {\n    conn.on('error', err => {\n        console.error(err);\n        conn.close();\n    });\n    conn.on('data', (data) => {\n        console.log('rx', data);\n        switch (data.type) {\n            case MessageType.START_GAME:\n                startGame(data.turnPlayer);\n                drawBoard();\n                break;\n            case MessageType.MOVE:\n                makeMove(data.move);\n                drawBoard();\n                break;\n            case MessageType.END_TURN:\n                swapTurns();\n                drawBoard();\n                break;\n        }\n    });\n}\nfunction hostGame() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const id = yield getBrokerId(localPeer);\n        localPeer.on('connection', c => {\n            conn = c;\n            addDataConnectionHandlers();\n            conn.on('open', () => {\n                const msg = { type: MessageType.START_GAME, turnPlayer: Player.REMOTE };\n                console.log('tx', msg);\n                conn.send(msg);\n                startGame(Player.LOCAL);\n                localPeer.disconnect();\n            });\n        });\n        alert(`Game code: ${id}`);\n    });\n}\nfunction joinGame(gameCode) {\n    if (!gameCode)\n        throw new Error('Game code is null');\n    conn = localPeer.connect(gameCode);\n    conn.on('open', () => {\n        localPeer.disconnect();\n    });\n    addDataConnectionHandlers();\n}\nfunction sendEndTurn() {\n    const msg = { type: MessageType.END_TURN };\n    console.log('tx', msg);\n    conn.send(msg);\n}\nfunction sendMove(move) {\n    // Transform move before sending\n    if (move.jumped) {\n        move = {\n            src: { row: 7 - move.src.row, col: 7 - move.src.col },\n            dest: { row: 7 - move.dest.row, col: 7 - move.dest.col },\n            jumped: { row: 7 - move.jumped.row, col: 7 - move.jumped.col }\n        };\n    }\n    else {\n        move = {\n            src: { row: 7 - move.src.row, col: 7 - move.src.col },\n            dest: { row: 7 - move.dest.row, col: 7 - move.dest.col },\n        };\n    }\n    const msg = { type: MessageType.MOVE, move };\n    console.log('tx', msg);\n    conn.send(msg);\n}\n\n// CONCATENATED MODULE: ./src/gameboard.ts\n/**\n * gameboard.ts\n *\n * Module for implementing rendering and maintaining state of the gameboard.\n */\n\n\nconst boardCanvas = document.getElementById('board-canvas');\n/*************\n * CONSTANTS\n *************/\nconst LOCAL_MAN_COLOR = 'black';\nconst LOCAL_KING_COLOR = 'grey';\nconst REMOTE_MAN_COLOR = 'red';\nconst REMOTE_KING_COLOR = 'pink';\nconst DARK_SPACE_COLOR = '#8db596';\nconst LIGHT_SPACE_COLOR = '#bedbbb';\nconst PIECE_SELECTION_BORDER_COLOR = 'red';\nconst FREE_SPACE_SELECTION_BORDER_COLOR = 'blue';\nconst SIDE_LEN = boardCanvas.width / 8;\n/** Enumeration of values that can occupy a space on the board. */\nvar Space;\n(function (Space) {\n    /** A free space */\n    Space[Space[\"FREE\"] = 0] = \"FREE\";\n    /** Local player's man */\n    Space[Space[\"LOCAL_MAN\"] = 1] = \"LOCAL_MAN\";\n    /** Remote player's man */\n    Space[Space[\"REMOTE_MAN\"] = 2] = \"REMOTE_MAN\";\n    /** Local player's king */\n    Space[Space[\"LOCAL_KING\"] = 3] = \"LOCAL_KING\";\n    /** Remote player's king */\n    Space[Space[\"REMOTE_KING\"] = 4] = \"REMOTE_KING\";\n})(Space || (Space = {}));\nvar Player;\n(function (Player) {\n    Player[Player[\"REMOTE\"] = 1] = \"REMOTE\";\n    Player[Player[\"LOCAL\"] = 2] = \"LOCAL\";\n})(Player || (Player = {}));\n/************************\n * STATE INITIALIZATION\n ************************/\nconst O = Space.LOCAL_MAN;\nconst X = Space.REMOTE_MAN;\nconst _ = Space.FREE;\n/** Board state */\nconst board = [\n    [_, X, _, X, _, X, _, X],\n    [X, _, X, _, X, _, X, _],\n    [_, X, _, X, _, X, _, X],\n    [_, _, _, _, _, _, _, _],\n    [_, _, _, _, _, _, _, _],\n    [O, _, O, _, O, _, O, _],\n    [_, O, _, O, _, O, _, O],\n    [O, _, O, _, O, _, O, _],\n];\n/** Graphics context */\nconst _g = boardCanvas.getContext('2d');\nif (!_g)\n    throw new Error('Failed to load graphics 2D context for board canvas');\nconst g = _g;\n/** List of valid moves for currently selected piece. */\nlet validMoves = null;\n/** Current turn player. */\nlet turnPlayer = Player.LOCAL;\n/** Current selected space on the board. */\nlet selectedSpace = null;\n/** True if the player can make another move. Only the piece that moved can move again */\nlet goAgain = false;\n/** True if the game is started */\nlet gameStarted = false;\n/***************\n * FUNCTIONS\n ***************/\n/** Set the state of a space on the board. */\nfunction set(i, v) {\n    board[i.row][i.col] = v;\n}\n/** Get the stat of a space on the board */\nfunction get(i) {\n    return board[i.row][i.col];\n}\nfunction isLocalPiece(space) {\n    return isLocalMan(space) || isLocalKing(space);\n}\nfunction isLocalMan(space) {\n    return isSpaceInsideBoard(space) && get(space) === Space.LOCAL_MAN;\n}\nfunction isLocalKing(space) {\n    return isSpaceInsideBoard(space) && get(space) === Space.LOCAL_KING;\n}\nfunction isRemotePiece(space) {\n    return isRemoteMan(space) || isRemoteKing(space);\n}\nfunction isRemoteMan(space) {\n    return isSpaceInsideBoard(space) && get(space) === Space.REMOTE_MAN;\n}\nfunction isRemoteKing(space) {\n    return isSpaceInsideBoard(space) && get(space) === Space.REMOTE_KING;\n}\nfunction isFree(space) {\n    return isSpaceInsideBoard(space) && get(space) === Space.FREE;\n}\nfunction isIndexEqual(i, j) {\n    return i.row === j.row && i.col === j.col;\n}\nfunction drawPiece(i) {\n    if (isFree(i))\n        return; // Ignore free spaces\n    const [x, y] = [i.col * SIDE_LEN, i.row * SIDE_LEN];\n    const space = get(i);\n    const r = SIDE_LEN / 2 - 4;\n    g.beginPath();\n    g.strokeStyle = 'black';\n    switch (space) {\n        case Space.LOCAL_MAN:\n            g.fillStyle = LOCAL_MAN_COLOR;\n            break;\n        case Space.LOCAL_KING:\n            g.fillStyle = LOCAL_KING_COLOR;\n            break;\n        case Space.REMOTE_MAN:\n            g.fillStyle = REMOTE_MAN_COLOR;\n            break;\n        case Space.REMOTE_KING:\n            g.fillStyle = REMOTE_KING_COLOR;\n            break;\n    }\n    g.ellipse(x + SIDE_LEN / 2, y + SIDE_LEN / 2, r, r, 0, 0, 2 * Math.PI);\n    g.fill();\n    g.stroke();\n}\nfunction highlightSpace(i, color) {\n    g.strokeStyle = color;\n    g.strokeRect(i.col * SIDE_LEN, i.row * SIDE_LEN, SIDE_LEN, SIDE_LEN);\n}\nfunction getClickedSpace(e) {\n    const rect = boardCanvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const i = { row: Math.floor(y / SIDE_LEN), col: Math.floor(x / SIDE_LEN) };\n    console.log('Clicked board space', i);\n    return i;\n}\nfunction tryPromoteToKing(i) {\n    if (isLocalPiece(i) && i.row === 0 && !isLocalKing(i)) {\n        set(i, Space.LOCAL_KING);\n        return true;\n    }\n    else if (isRemotePiece(i) && i.row === 7 && !isRemoteKing(i)) {\n        set(i, Space.REMOTE_KING);\n        return true;\n    }\n    return false;\n}\nfunction checkGameOver() {\n    let localPieceCount = 0;\n    let remotePieceCount = 0;\n    for (let i = 0; i < board.length; i++) {\n        for (let j = 0; j < board[0].length; j++) {\n            const s = { row: i, col: j };\n            if (isLocalPiece(s)) {\n                localPieceCount++;\n            }\n            else if (isRemotePiece(s)) {\n                remotePieceCount++;\n            }\n        }\n    }\n    if (localPieceCount === 0 || allValidMoves(Player.LOCAL).size === 0) {\n        return Player.REMOTE;\n    }\n    else if (remotePieceCount === 0 || allValidMoves(Player.REMOTE).size === 0) {\n        return Player.LOCAL;\n    }\n}\nfunction isSpaceInsideBoard(i) {\n    return i.row >= 0 && i.row < 8 && i.col >= 0 && i.col < 8;\n}\n/** Precondition: i contains a local man */\nfunction validMovesForLocalMan(i) {\n    if (!isLocalMan(i))\n        throw new Error('Illegal state: index must contain local man');\n    const moves = new Set();\n    const left = { row: i.row - 1, col: i.col - 1 };\n    const left2 = { row: i.row - 2, col: i.col - 2 };\n    const right = { row: i.row - 1, col: i.col + 1 };\n    const right2 = { row: i.row - 2, col: i.col + 2 };\n    if (isFree(left))\n        moves.add({ src: i, dest: left });\n    if (isFree(right))\n        moves.add({ src: i, dest: right });\n    if (isRemotePiece(left) && isFree(left2))\n        moves.add({ src: i, dest: left2, jumped: left });\n    if (isRemotePiece(right) && isFree(right2))\n        moves.add({ src: i, dest: right2, jumped: right });\n    return moves;\n}\n/** Precondition: i contains a local king */\nfunction validMovesForLocalKing(i) {\n    if (!isLocalKing(i))\n        throw new Error('Illegal state: index must contain local king');\n    const moves = new Set();\n    const topleft = { row: i.row - 1, col: i.col - 1 };\n    const topleft2 = { row: i.row - 2, col: i.col - 2 };\n    const topright = { row: i.row - 1, col: i.col + 1 };\n    const topright2 = { row: i.row - 2, col: i.col + 2 };\n    const bottomleft = { row: i.row + 1, col: i.col - 1 };\n    const bottomleft2 = { row: i.row + 2, col: i.col - 2 };\n    const bottomright = { row: i.row + 1, col: i.col + 1 };\n    const bottomright2 = { row: i.row + 2, col: i.col + 2 };\n    if (isFree(topleft))\n        moves.add({ src: i, dest: topleft });\n    if (isFree(topright))\n        moves.add({ src: i, dest: topright });\n    if (isFree(bottomleft))\n        moves.add({ src: i, dest: bottomleft });\n    if (isFree(bottomright))\n        moves.add({ src: i, dest: bottomright });\n    if (isRemotePiece(topleft) && isFree(topleft2))\n        moves.add({ src: i, dest: topleft2, jumped: topleft });\n    if (isRemotePiece(topright) && isFree(topright2))\n        moves.add({ src: i, dest: topright2, jumped: topright });\n    if (isRemotePiece(bottomleft) && isFree(bottomleft2))\n        moves.add({ src: i, dest: bottomleft2, jumped: bottomleft });\n    if (isRemotePiece(bottomright) && isFree(bottomright2))\n        moves.add({ src: i, dest: bottomright2, jumped: bottomright });\n    return moves;\n}\n/** Precondition: i contains a remote man */\nfunction validMovesForRemoteMan(i) {\n    if (!isRemoteMan(i))\n        throw new Error('Illegal state: index must contain remote man');\n    const moves = new Set();\n    const left = { row: i.row + 1, col: i.col - 1 };\n    const left2 = { row: i.row + 2, col: i.col - 2 };\n    const right = { row: i.row + 1, col: i.col + 1 };\n    const right2 = { row: i.row + 2, col: i.col + 2 };\n    if (isFree(left))\n        moves.add({ src: i, dest: left });\n    if (isFree(right))\n        moves.add({ src: i, dest: right });\n    if (isLocalPiece(left) && isFree(left2))\n        moves.add({ src: i, dest: left2, jumped: left });\n    if (isLocalPiece(right) && isFree(right2))\n        moves.add({ src: i, dest: right2, jumped: right });\n    return moves;\n}\n/** Precondition: i contains a remote king */\nfunction validMovesForRemoteKing(i) {\n    if (!isRemoteKing(i))\n        throw new Error('Illegal state: index must contain remote king');\n    const moves = new Set();\n    const topleft = { row: i.row - 1, col: i.col - 1 };\n    const topleft2 = { row: i.row - 2, col: i.col - 2 };\n    const topright = { row: i.row - 1, col: i.col + 1 };\n    const topright2 = { row: i.row - 2, col: i.col + 2 };\n    const bottomleft = { row: i.row + 1, col: i.col - 1 };\n    const bottomleft2 = { row: i.row + 2, col: i.col - 2 };\n    const bottomright = { row: i.row + 1, col: i.col + 1 };\n    const bottomright2 = { row: i.row + 2, col: i.col + 2 };\n    if (isFree(topleft))\n        moves.add({ src: i, dest: topleft });\n    if (isFree(topright))\n        moves.add({ src: i, dest: topright });\n    if (isFree(bottomleft))\n        moves.add({ src: i, dest: bottomleft });\n    if (isFree(bottomright))\n        moves.add({ src: i, dest: bottomright });\n    if (isLocalPiece(topleft) && isFree(topleft2))\n        moves.add({ src: i, dest: topleft2, jumped: topleft });\n    if (isLocalPiece(topright) && isFree(topright2))\n        moves.add({ src: i, dest: topright2, jumped: topright });\n    if (isLocalPiece(bottomleft) && isFree(bottomleft2))\n        moves.add({ src: i, dest: bottomleft2, jumped: bottomleft });\n    if (isLocalPiece(bottomright) && isFree(bottomright2))\n        moves.add({ src: i, dest: bottomright2, jumped: bottomright });\n    return moves;\n}\nfunction getValidMoves(i) {\n    if (!isSpaceInsideBoard(i))\n        throw new Error('Index out of bounds');\n    let moves;\n    switch (board[i.row][i.col]) {\n        case Space.LOCAL_MAN:\n            moves = validMovesForLocalMan(i);\n            break;\n        case Space.LOCAL_KING:\n            moves = validMovesForLocalKing(i);\n            break;\n        case Space.REMOTE_MAN:\n            moves = validMovesForRemoteMan(i);\n            break;\n        case Space.REMOTE_KING:\n            moves = validMovesForRemoteKing(i);\n            break;\n        default:\n            return new Set(); // No valid moves for an empty space\n    }\n    // If a piece has jump moves, then those are the only valid moves\n    const jumpMoves = new Set();\n    moves.forEach(m => {\n        if (m.jumped) {\n            jumpMoves.add(m);\n        }\n    });\n    return jumpMoves.size > 0 ? jumpMoves : moves;\n}\n/** Return a Set of all valid moves for player. */\nfunction allValidMoves(p) {\n    const allValidMoveSets = new Set();\n    for (let i = 0; i < board.length; i++) {\n        for (let j = 0; j < board[0].length; j++) {\n            const s = { row: i, col: j };\n            if (p === Player.LOCAL && isLocalPiece(s) || p === Player.REMOTE && isRemotePiece(s)) {\n                allValidMoveSets.add(getValidMoves(s));\n            }\n        }\n    }\n    const allJumpMoves = new Set();\n    const allNonJumpMoves = new Set();\n    allValidMoveSets.forEach(moveSet => {\n        moveSet.forEach(move => {\n            if (move.jumped) {\n                allJumpMoves.add(move);\n            }\n            else {\n                allNonJumpMoves.add(move);\n            }\n        });\n    });\n    // If there are jump moves, those are the only valid moves\n    if (allJumpMoves.size > 0) {\n        return allJumpMoves;\n    }\n    else {\n        return allNonJumpMoves;\n    }\n}\nboardCanvas.addEventListener('click', event => {\n    if (!gameStarted)\n        return;\n    const clickedSpace = getClickedSpace(event);\n    if (goAgain) {\n        if (validMoves) {\n            const move = anyMatch(validMoves, e => isIndexEqual(e.dest, clickedSpace));\n            if (move) {\n                goAgain = !makeMove(move);\n                sendMove(move);\n                if (!goAgain) {\n                    sendEndTurn();\n                    swapTurns();\n                }\n            }\n        }\n    }\n    else if (isFree(clickedSpace) && selectedSpace) {\n        if (validMoves) {\n            const move = anyMatch(validMoves, e => isIndexEqual(e.dest, clickedSpace));\n            if (move) {\n                goAgain = !makeMove(move);\n                sendMove(move);\n                if (!goAgain) {\n                    sendEndTurn();\n                    swapTurns();\n                }\n            }\n            else {\n                selectedSpace = null;\n                validMoves = null;\n            }\n        }\n        else {\n            selectedSpace = null;\n            validMoves = null;\n        }\n    }\n    else {\n        if (anyMatch(allValidMoves(turnPlayer), m => isIndexEqual(m.src, clickedSpace))) {\n            selectedSpace = clickedSpace;\n            validMoves = getValidMoves(selectedSpace);\n        }\n        else {\n            selectedSpace = null;\n            validMoves = null;\n        }\n    }\n    const winner = checkGameOver();\n    drawBoard();\n    if (winner) {\n        const color = winner === Player.LOCAL ? LOCAL_MAN_COLOR : REMOTE_MAN_COLOR;\n        alert(`${color} has won!`);\n    }\n});\nfunction drawBoard() {\n    // g.clearRect(0, 0, boardCanvas.width, boardCanvas.height)\n    for (let i = 0; i < board.length; i++) {\n        for (let j = 0; j < board[i].length; j++) {\n            const currentSpace = { row: i, col: j };\n            const x = j * SIDE_LEN;\n            const y = i * SIDE_LEN;\n            g.fillStyle = (i + j) % 2 ? DARK_SPACE_COLOR : LIGHT_SPACE_COLOR;\n            g.fillRect(x, y, SIDE_LEN, SIDE_LEN);\n            drawPiece(currentSpace);\n        }\n    }\n    if (turnPlayer === Player.LOCAL) {\n        allValidMoves(turnPlayer).forEach(m => {\n            highlightSpace(m.src, PIECE_SELECTION_BORDER_COLOR);\n        });\n        if (selectedSpace) {\n            highlightSpace(selectedSpace, PIECE_SELECTION_BORDER_COLOR);\n            validMoves === null || validMoves === void 0 ? void 0 : validMoves.forEach(m => {\n                highlightSpace(m.dest, FREE_SPACE_SELECTION_BORDER_COLOR);\n            });\n        }\n    }\n}\nfunction startGame(startingPlayer) {\n    turnPlayer = startingPlayer;\n    gameStarted = true;\n}\n/** Make a move. Return true if the turn should end. */\nfunction makeMove(move) {\n    if (move.jumped) {\n        set(move.jumped, Space.FREE);\n        set(move.dest, get(move.src));\n        set(move.src, Space.FREE);\n        if (tryPromoteToKing(move.dest)) {\n            return true;\n        }\n        selectedSpace = move.dest;\n        validMoves = getValidMoves(selectedSpace);\n        return !anyMatch(validMoves, m => !!m.jumped);\n    }\n    else {\n        set(move.dest, get(move.src));\n        set(move.src, Space.FREE);\n        tryPromoteToKing(move.dest);\n        return true;\n    }\n}\nfunction swapTurns() {\n    turnPlayer = (turnPlayer === Player.LOCAL ? Player.REMOTE : Player.LOCAL);\n    selectedSpace = null;\n    validMoves = null;\n    goAgain = false;\n}\n\n// CONCATENATED MODULE: ./src/index.ts\n/*\n * index.ts\n *\n * Entry point for the application.\n */\nvar src_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\nconst createGameBtn = document.getElementById('btn-create-game');\nconst joinGameBtn = document.getElementById('btn-join-game');\n/* btn-create-game click event listener */\ncreateGameBtn.addEventListener('click', (ev) => src_awaiter(void 0, void 0, void 0, function* () {\n    hostGame();\n}));\n/* btn-join-game click event listener */\njoinGameBtn.addEventListener('click', (ev) => src_awaiter(void 0, void 0, void 0, function* () {\n    const gameCode = prompt('Enter a game code');\n    joinGame(gameCode);\n}));\ndrawBoard();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja2Vycy1jbGllbnQvLi9zcmMvdXRpbC50cz8xOGRmIiwid2VicGFjazovL2NoZWNrZXJzLWNsaWVudC8uL3NyYy9wMnAudHM/M2RjNSIsIndlYnBhY2s6Ly9jaGVja2Vycy1jbGllbnQvLi9zcmMvZ2FtZWJvYXJkLnRzPzQ3MjEiLCJ3ZWJwYWNrOi8vY2hlY2tlcnMtY2xpZW50Ly4vc3JjL2luZGV4LnRzP2ZmYjQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztHQUlHO0FBRUksU0FBUyxLQUFLLENBQUMsRUFBVTtJQUM1QixPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUM5QyxDQUFDO0FBRUQ7O0dBRUc7QUFDSSxTQUFTLFFBQVEsQ0FBSSxDQUFTLEVBQUUsU0FBNEI7SUFDL0QsS0FBSyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDZixJQUFJLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUNkLE9BQU8sQ0FBQztTQUNYO0tBQ0o7SUFDRCxPQUFPLElBQUk7QUFDZixDQUFDOzs7Ozs7O0FDcEJEOzs7O0dBSUc7Ozs7Ozs7Ozs7QUFFc0I7QUFDNEQ7QUFFckYsSUFBSyxXQUlKO0FBSkQsV0FBSyxXQUFXO0lBQ1oseURBQVU7SUFDViw2Q0FBSTtJQUNKLHFEQUFRO0FBQ1osQ0FBQyxFQUpJLFdBQVcsS0FBWCxXQUFXLFFBSWY7QUFrQkQsTUFBTSxTQUFTLEdBQUcsSUFBSSxzQkFBSSxDQUFDLEVBQUMsS0FBSyxFQUFFLENBQUMsRUFBQyxDQUFDO0FBQ3RDLElBQUksSUFBeUI7QUFFN0IsK0NBQStDO0FBQy9DLFNBQWUsV0FBVyxDQUFDLElBQVU7O1FBQ2pDLE1BQU0sRUFBRSxHQUFHLElBQUksT0FBTyxDQUFTLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1lBQy9DLElBQUksSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDVCxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQzthQUNuQjtpQkFBTTtnQkFDSCxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTtvQkFDakIsT0FBTyxDQUFDLEVBQUUsQ0FBQztnQkFDZixDQUFDLENBQUM7Z0JBQ0YsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLEVBQUU7b0JBQ25CLE1BQU0sQ0FBQyxHQUFHLENBQUM7Z0JBQ2YsQ0FBQyxDQUFDO2FBQ0w7UUFDTCxDQUFDLENBQUM7UUFDRixPQUFPLE1BQU0sRUFBRTtJQUNuQixDQUFDO0NBQUE7QUFFRCxTQUFTLHlCQUF5QjtJQUM5QixJQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsRUFBRTtRQUNuQixPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztRQUNsQixJQUFJLENBQUMsS0FBSyxFQUFFO0lBQ2hCLENBQUMsQ0FBQztJQUNGLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBUyxFQUFFLEVBQUU7UUFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDO1FBQ3ZCLFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNmLEtBQUssV0FBVyxDQUFDLFVBQVU7Z0JBQ3ZCLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO2dCQUMxQixTQUFTLEVBQUU7Z0JBQ1gsTUFBSztZQUNULEtBQUssV0FBVyxDQUFDLElBQUk7Z0JBQ2pCLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO2dCQUNuQixTQUFTLEVBQUU7Z0JBQ1gsTUFBSztZQUNULEtBQUssV0FBVyxDQUFDLFFBQVE7Z0JBQ3JCLFNBQVMsRUFBRTtnQkFDWCxTQUFTLEVBQUU7Z0JBQ1gsTUFBSztTQUNaO0lBQ0wsQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQUVNLFNBQWUsUUFBUTs7UUFDMUIsTUFBTSxFQUFFLEdBQUcsTUFBTSxXQUFXLENBQUMsU0FBUyxDQUFDO1FBQ3ZDLFNBQVMsQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQyxFQUFFO1lBQzNCLElBQUksR0FBRyxDQUFDO1lBQ1IseUJBQXlCLEVBQUU7WUFDM0IsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO2dCQUNqQixNQUFNLEdBQUcsR0FBRyxFQUFDLElBQUksRUFBRSxXQUFXLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxhQUFhLEVBQUM7Z0JBQ3JFLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQztnQkFDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7Z0JBQ2QsU0FBUyxDQUFDLFlBQVksQ0FBQztnQkFDdkIsU0FBUyxDQUFDLFVBQVUsRUFBRTtZQUMxQixDQUFDLENBQUM7UUFDTixDQUFDLENBQUM7UUFDRixLQUFLLENBQUMsY0FBYyxFQUFFLEVBQUUsQ0FBQztJQUM3QixDQUFDO0NBQUE7QUFFTSxTQUFTLFFBQVEsQ0FBQyxRQUF1QjtJQUM1QyxJQUFJLENBQUMsUUFBUTtRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsbUJBQW1CLENBQUM7SUFDbkQsSUFBSSxHQUFHLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO0lBQ2xDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUNqQixTQUFTLENBQUMsVUFBVSxFQUFFO0lBQzFCLENBQUMsQ0FBQztJQUNGLHlCQUF5QixFQUFFO0FBQy9CLENBQUM7QUFFTSxTQUFTLFdBQVc7SUFDdkIsTUFBTSxHQUFHLEdBQUcsRUFBRSxJQUFJLEVBQUUsV0FBVyxDQUFDLFFBQVEsRUFBRTtJQUMxQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUM7SUFDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7QUFDbEIsQ0FBQztBQUVNLFNBQVMsUUFBUSxDQUFDLElBQVU7SUFDL0IsZ0NBQWdDO0lBQ2hDLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtRQUNiLElBQUksR0FBRztZQUNILEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRTtZQUNqRCxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDcEQsTUFBTSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFO1NBQzdEO0tBQ0o7U0FBTTtRQUNILElBQUksR0FBRztZQUNILEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRTtZQUNqRCxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUU7U0FDdkQ7S0FDSjtJQUNELE1BQU0sR0FBRyxHQUFHLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFO0lBQzVDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQztJQUN0QixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztBQUNsQixDQUFDOzs7QUMzSEQ7Ozs7R0FJRztBQUUrQjtBQUNZO0FBRTlDLE1BQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxj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Q0FBQyxFQUFFO0lBQzNELE1BQU0sU0FBUyxHQUFlLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFDLENBQUMsRUFBRTtJQUM1RCxNQUFNLFVBQVUsR0FBZSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBQyxDQUFDLEVBQUU7SUFDN0QsTUFBTSxXQUFXLEdBQWUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUMsQ0FBQyxFQUFFO0lBQzlELE1BQU0sV0FBVyxHQUFlLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFDLENBQUMsRUFBRTtJQUM5RCxNQUFNLFlBQVksR0FBZSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBQyxDQUFDLEVBQUU7SUFDL0QsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBQyxDQUFDO0lBQ3ZELElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUFFLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUMsQ0FBQztJQUN6RCxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUM7UUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFDLENBQUM7SUFDN0QsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDO1FBQUUsS0FBSyxD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RSxDQUFDO0lBQ2hELFFBQVEsRUFBRTtBQUNkLENBQUMsRUFBQztBQUVGLHdDQUF3QztBQUN4QyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQU0sRUFBRSxFQUFDLEVBQUUsQ0FBQztJQUM5QyxNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsbUJBQW1CLENBQUM7SUFDNUMsUUFBUSxDQUFDLFFBQVEsQ0FBQztBQUN0QixDQUFDLEVBQUM7QUFFRixTQUFTLEVBQUUiLCJmaWxlIjoiODM4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIHV0aWwudHNcbiAqXG4gKiBNb2R1bGUgZm9yIG1pc2MuIHV0aWxpdHkgZnVuY3Rpb25zLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzbGVlcChtczogbnVtYmVyKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCBtcykpXG59XG5cbi8qKiBDaGVja3MgaWYgYW55IEl0ZW0gaW4gcyBtYXRjaGVzLiBUaGVuIHJldHVybiB0aGUgZWxlbWVudCBpbiB0aGUgc2V0IHRoYXQgbWF0Y2hlZC5cbiAqIFJldHVybnMgbnVsbCBpZiB0aGVyZSBhcmUgbm8gbWF0Y2hlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFueU1hdGNoPFQ+KHM6IFNldDxUPiwgbWF0Y2hGdW5jOiAoZTogVCkgPT4gYm9vbGVhbikge1xuICAgIGZvciAoY29uc3QgZSBvZiBzKSB7XG4gICAgICAgIGlmIChtYXRjaEZ1bmMoZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBlXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbn1cbiIsIi8qXG4gKiBwMnAudHNcbiAqXG4gKiBNb2R1bGUgZm9yIG1hbmFnaW5nIFAyUCBjb21tdW5pY2F0aW9uLlxuICovXG5cbmltcG9ydCBQZWVyIGZyb20gJ3BlZXJqcydcbmltcG9ydCB7IFBsYXllciwgTW92ZSwgc3RhcnRHYW1lLCBtYWtlTW92ZSwgZHJhd0JvYXJkLCBzd2FwVHVybnMgfSBmcm9tICcuL2dhbWVib2FyZCdcblxuZW51bSBNZXNzYWdlVHlwZSB7XG4gICAgU1RBUlRfR0FNRSxcbiAgICBNT1ZFLFxuICAgIEVORF9UVVJOXG59XG5cbmludGVyZmFjZSBTdGFydEdhbWVQYXlsb2FkIHtcbiAgICB0eXBlOiBNZXNzYWdlVHlwZS5TVEFSVF9HQU1FXG4gICAgdHVyblBsYXllcjogUGxheWVyXG59XG5cbmludGVyZmFjZSBNb3ZlUGF5bG9hZCB7XG4gICAgdHlwZTogTWVzc2FnZVR5cGUuTU9WRVxuICAgIG1vdmU6IE1vdmVcbn1cblxuaW50ZXJmYWNlIEVuZFR1cm5QYXlsb2FkIHtcbiAgICB0eXBlOiBNZXNzYWdlVHlwZS5FTkRfVFVSTlxufVxuXG50eXBlIFBEVSA9IE1vdmVQYXlsb2FkIHwgRW5kVHVyblBheWxvYWQgfCBTdGFydEdhbWVQYXlsb2FkXG5cbmNvbnN0IGxvY2FsUGVlciA9IG5ldyBQZWVyKHtkZWJ1ZzogMX0pXG5sZXQgY29ubjogUGVlci5EYXRhQ29ubmVjdGlvblxuXG4vKiogR2V0IHRoZSBicm9rZXIgSUQgZm9yIGEgUGVlciBjb25uZWN0aW9uLiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0QnJva2VySWQocGVlcjogUGVlcikge1xuICAgIGNvbnN0IGlkID0gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGlmIChwZWVyLmlkKSB7XG4gICAgICAgICAgICByZXNvbHZlKHBlZXIuaWQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwZWVyLm9uKCdvcGVuJywgaWQgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoaWQpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgcGVlci5vbignZXJyb3InLCBlcnIgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gYXdhaXQgaWRcbn1cblxuZnVuY3Rpb24gYWRkRGF0YUNvbm5lY3Rpb25IYW5kbGVycygpIHtcbiAgICBjb25uLm9uKCdlcnJvcicsIGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgICAgICBjb25uLmNsb3NlKClcbiAgICB9KVxuICAgIGNvbm4ub24oJ2RhdGEnLCAoZGF0YTogUERVKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdyeCcsIGRhdGEpXG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLlNUQVJUX0dBTUU6XG4gICAgICAgICAgICAgICAgc3RhcnRHYW1lKGRhdGEudHVyblBsYXllcilcbiAgICAgICAgICAgICAgICBkcmF3Qm9hcmQoKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLk1PVkU6XG4gICAgICAgICAgICAgICAgbWFrZU1vdmUoZGF0YS5tb3ZlKVxuICAgICAgICAgICAgICAgIGRyYXdCb2FyZCgpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuRU5EX1RVUk46XG4gICAgICAgICAgICAgICAgc3dhcFR1cm5zKClcbiAgICAgICAgICAgICAgICBkcmF3Qm9hcmQoKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaG9zdEdhbWUoKSB7XG4gICAgY29uc3QgaWQgPSBhd2FpdCBnZXRCcm9rZXJJZChsb2NhbFBlZXIpXG4gICAgbG9jYWxQZWVyLm9uKCdjb25uZWN0aW9uJywgYyA9PiB7XG4gICAgICAgIGNvbm4gPSBjXG4gICAgICAgIGFkZERhdGFDb25uZWN0aW9uSGFuZGxlcnMoKVxuICAgICAgICBjb25uLm9uKCdvcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbXNnID0ge3R5cGU6IE1lc3NhZ2VUeXBlLlNUQVJUX0dBTUUsIHR1cm5QbGF5ZXI6IFBsYXllci5SRU1PVEV9XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndHgnLCBtc2cpXG4gICAgICAgICAgICBjb25uLnNlbmQobXNnKVxuICAgICAgICAgICAgc3RhcnRHYW1lKFBsYXllci5MT0NBTClcbiAgICAgICAgICAgIGxvY2FsUGVlci5kaXNjb25uZWN0KClcbiAgICAgICAgfSlcbiAgICB9KVxuICAgIGFsZXJ0KGBHYW1lIGNvZGU6ICR7aWR9YClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGpvaW5HYW1lKGdhbWVDb2RlOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgaWYgKCFnYW1lQ29kZSkgdGhyb3cgbmV3IEVycm9yKCdHYW1lIGNvZGUgaXMgbnVsbCcpXG4gICAgY29ubiA9IGxvY2FsUGVlci5jb25uZWN0KGdhbWVDb2RlKVxuICAgIGNvbm4ub24oJ29wZW4nLCAoKSA9PiB7XG4gICAgICAgIGxvY2FsUGVlci5kaXNjb25uZWN0KClcbiAgICB9KVxuICAgIGFkZERhdGFDb25uZWN0aW9uSGFuZGxlcnMoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VuZEVuZFR1cm4oKSB7XG4gICAgY29uc3QgbXNnID0geyB0eXBlOiBNZXNzYWdlVHlwZS5FTkRfVFVSTiB9XG4gICAgY29uc29sZS5sb2coJ3R4JywgbXNnKVxuICAgIGNvbm4uc2VuZChtc2cpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZW5kTW92ZShtb3ZlOiBNb3ZlKSB7XG4gICAgLy8gVHJhbnNmb3JtIG1vdmUgYmVmb3JlIHNlbmRpbmdcbiAgICBpZiAobW92ZS5qdW1wZWQpIHtcbiAgICAgICAgbW92ZSA9IHtcbiAgICAgICAgICAgIHNyYzogeyByb3c6IDctbW92ZS5zcmMucm93LCBjb2w6IDctbW92ZS5zcmMuY29sIH0sXG4gICAgICAgICAgICBkZXN0OiB7IHJvdzogNy1tb3ZlLmRlc3Qucm93LCBjb2w6IDctbW92ZS5kZXN0LmNvbCB9LFxuICAgICAgICAgICAganVtcGVkOiB7IHJvdzogNy1tb3ZlLmp1bXBlZC5yb3csIGNvbDogNy1tb3ZlLmp1bXBlZC5jb2wgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbW92ZSA9IHtcbiAgICAgICAgICAgIHNyYzogeyByb3c6IDctbW92ZS5zcmMucm93LCBjb2w6IDctbW92ZS5zcmMuY29sIH0sXG4gICAgICAgICAgICBkZXN0OiB7IHJvdzogNy1tb3ZlLmRlc3Qucm93LCBjb2w6IDctbW92ZS5kZXN0LmNvbCB9LFxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG1zZyA9IHsgdHlwZTogTWVzc2FnZVR5cGUuTU9WRSwgbW92ZSB9XG4gICAgY29uc29sZS5sb2coJ3R4JywgbXNnKVxuICAgIGNvbm4uc2VuZChtc2cpXG59XG4iLCIvKipcbiAqIGdhbWVib2FyZC50c1xuICpcbiAqIE1vZHVsZSBmb3IgaW1wbGVtZW50aW5nIHJlbmRlcmluZyBhbmQgbWFpbnRhaW5pbmcgc3RhdGUgb2YgdGhlIGdhbWVib2FyZC5cbiAqL1xuXG5pbXBvcnQgeyBhbnlNYXRjaCB9IGZyb20gXCIuL3V0aWxcIjtcbmltcG9ydCB7IHNlbmRNb3ZlLCBzZW5kRW5kVHVybiB9IGZyb20gXCIuL3AycFwiO1xuXG5jb25zdCBib2FyZENhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib2FyZC1jYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudFxuXG4vKioqKioqKioqKioqKlxuICogQ09OU1RBTlRTXG4gKioqKioqKioqKioqKi9cblxuY29uc3QgTE9DQUxfTUFOX0NPTE9SID0gJ2JsYWNrJ1xuY29uc3QgTE9DQUxfS0lOR19DT0xPUiA9ICdncmV5J1xuY29uc3QgUkVNT1RFX01BTl9DT0xPUiA9ICdyZWQnXG5jb25zdCBSRU1PVEVfS0lOR19DT0xPUiA9ICdwaW5rJ1xuY29uc3QgREFSS19TUEFDRV9DT0xPUiA9ICcjOGRiNTk2J1xuY29uc3QgTElHSFRfU1BBQ0VfQ09MT1IgPSAnI2JlZGJiYidcbmNvbnN0IFBJRUNFX1NFTEVDVElPTl9CT1JERVJfQ09MT1IgPSAncmVkJ1xuY29uc3QgRlJFRV9TUEFDRV9TRUxFQ1RJT05fQk9SREVSX0NPTE9SID0gJ2JsdWUnXG5jb25zdCBTSURFX0xFTiA9IGJvYXJkQ2FudmFzLndpZHRoIC8gOFxuXG4vKiogRW51bWVyYXRpb24gb2YgdmFsdWVzIHRoYXQgY2FuIG9jY3VweSBhIHNwYWNlIG9uIHRoZSBib2FyZC4gKi9cbmV4cG9ydCBlbnVtIFNwYWNlIHtcbiAgICAvKiogQSBmcmVlIHNwYWNlICovXG4gICAgRlJFRSxcbiAgICAvKiogTG9jYWwgcGxheWVyJ3MgbWFuICovXG4gICAgTE9DQUxfTUFOLFxuICAgIC8qKiBSZW1vdGUgcGxheWVyJ3MgbWFuICovXG4gICAgUkVNT1RFX01BTixcbiAgICAvKiogTG9jYWwgcGxheWVyJ3Mga2luZyAqL1xuICAgIExPQ0FMX0tJTkcsXG4gICAgLyoqIFJlbW90ZSBwbGF5ZXIncyBraW5nICovXG4gICAgUkVNT1RFX0tJTkcsXG59XG5cbmV4cG9ydCBlbnVtIFBsYXllciB7XG4gICAgUkVNT1RFID0gMSxcbiAgICBMT0NBTCxcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKlxuICogU1RBVEUgSU5JVElBTElaQVRJT05cbiAqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmV4cG9ydCBjb25zdCBPID0gU3BhY2UuTE9DQUxfTUFOXG5leHBvcnQgY29uc3QgWCA9IFNwYWNlLlJFTU9URV9NQU5cbmV4cG9ydCBjb25zdCBfID0gU3BhY2UuRlJFRVxuXG4vKiogQm9hcmQgc3RhdGUgKi9cbmNvbnN0IGJvYXJkID0gW1xuICAgIFtfLCBYLCBfLCBYLCBfLCBYLCBfLCBYXSxcbiAgICBbWCwgXywgWCwgXywgWCwgXywgWCwgX10sXG4gICAgW18sIFgsIF8sIFgsIF8sIFgsIF8sIFhdLFxuICAgIFtfLCBfLCBfLCBfLCBfLCBfLCBfLCBfXSxcbiAgICBbXywgXywgXywgXywgXywgXywgXywgX10sXG4gICAgW08sIF8sIE8sIF8sIE8sIF8sIE8sIF9dLFxuICAgIFtfLCBPLCBfLCBPLCBfLCBPLCBfLCBPXSxcbiAgICBbTywgXywgTywgXywgTywgXywgTywgX10sXG5dXG5cbi8qKiBHcmFwaGljcyBjb250ZXh0ICovXG5jb25zdCBfZyA9IGJvYXJkQ2FudmFzLmdldENvbnRleHQoJzJkJylcbmlmICghX2cpIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgZ3JhcGhpY3MgMkQgY29udGV4dCBmb3IgYm9hcmQgY2FudmFzJylcbmNvbnN0IGcgPSBfZ1xuXG5leHBvcnQgaW50ZXJmYWNlIEJvYXJkSW5kZXgge1xuICAgIHJvdzogbnVtYmVyXG4gICAgY29sOiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb3ZlIHtcbiAgICAvKiogU291cmNlIG9mIGp1bXAgKi9cbiAgICBzcmM6IEJvYXJkSW5kZXhcbiAgICAvKiogRGVzdGluYXRpb24gb2YganVtcCAqL1xuICAgIGRlc3Q6IEJvYXJkSW5kZXhcbiAgICAvKiogT3B0aW9uYWwgaW5kZXggdGhhdCB3YXMganVtcGVkICovXG4gICAganVtcGVkPzogQm9hcmRJbmRleFxufVxuXG4vKiogTGlzdCBvZiB2YWxpZCBtb3ZlcyBmb3IgY3VycmVudGx5IHNlbGVjdGVkIHBpZWNlLiAqL1xubGV0IHZhbGlkTW92ZXM6IFNldDxNb3ZlPiB8IG51bGwgPSBudWxsXG4vKiogQ3VycmVudCB0dXJuIHBsYXllci4gKi9cbmxldCB0dXJuUGxheWVyID0gUGxheWVyLkxPQ0FMXG4vKiogQ3VycmVudCBzZWxlY3RlZCBzcGFjZSBvbiB0aGUgYm9hcmQuICovXG5sZXQgc2VsZWN0ZWRTcGFjZTogQm9hcmRJbmRleCB8IG51bGwgPSBudWxsXG4vKiogVHJ1ZSBpZiB0aGUgcGxheWVyIGNhbiBtYWtlIGFub3RoZXIgbW92ZS4gT25seSB0aGUgcGllY2UgdGhhdCBtb3ZlZCBjYW4gbW92ZSBhZ2FpbiAqL1xubGV0IGdvQWdhaW46IGJvb2xlYW4gPSBmYWxzZVxuLyoqIFRydWUgaWYgdGhlIGdhbWUgaXMgc3RhcnRlZCAqL1xubGV0IGdhbWVTdGFydGVkOiBib29sZWFuID0gZmFsc2VcblxuLyoqKioqKioqKioqKioqKlxuICogRlVOQ1RJT05TXG4gKioqKioqKioqKioqKioqL1xuXG4vKiogU2V0IHRoZSBzdGF0ZSBvZiBhIHNwYWNlIG9uIHRoZSBib2FyZC4gKi9cbmZ1bmN0aW9uIHNldChpOiBCb2FyZEluZGV4LCB2OiBTcGFjZSkge1xuICAgIGJvYXJkW2kucm93XVtpLmNvbF0gPSB2XG59XG5cbi8qKiBHZXQgdGhlIHN0YXQgb2YgYSBzcGFjZSBvbiB0aGUgYm9hcmQgKi9cbmZ1bmN0aW9uIGdldChpOiBCb2FyZEluZGV4KSB7XG4gICAgcmV0dXJuIGJvYXJkW2kucm93XVtpLmNvbF1cbn1cblxuZnVuY3Rpb24gaXNMb2NhbFBpZWNlKHNwYWNlOiBCb2FyZEluZGV4KSB7XG4gICAgcmV0dXJuIGlzTG9jYWxNYW4oc3BhY2UpIHx8IGlzTG9jYWxLaW5nKHNwYWNlKVxufVxuXG5mdW5jdGlvbiBpc0xvY2FsTWFuKHNwYWNlOiBCb2FyZEluZGV4KSB7XG4gICAgcmV0dXJuIGlzU3BhY2VJbnNpZGVCb2FyZChzcGFjZSkgJiYgZ2V0KHNwYWNlKSA9PT0gU3BhY2UuTE9DQUxfTUFOXG59XG5cbmZ1bmN0aW9uIGlzTG9jYWxLaW5nKHNwYWNlOiBCb2FyZEluZGV4KSB7XG4gICAgcmV0dXJuIGlzU3BhY2VJbnNpZGVCb2FyZChzcGFjZSkgJiYgZ2V0KHNwYWNlKSA9PT0gU3BhY2UuTE9DQUxfS0lOR1xufVxuXG5mdW5jdGlvbiBpc1JlbW90ZVBpZWNlKHNwYWNlOiBCb2FyZEluZGV4KSB7XG4gICAgcmV0dXJuIGlzUmVtb3RlTWFuKHNwYWNlKSB8fCBpc1JlbW90ZUtpbmcoc3BhY2UpXG59XG5cbmZ1bmN0aW9uIGlzUmVtb3RlTWFuKHNwYWNlOiBCb2FyZEluZGV4KSB7XG4gICAgcmV0dXJuIGlzU3BhY2VJbnNpZGVCb2FyZChzcGFjZSkgJiYgZ2V0KHNwYWNlKSA9PT0gU3BhY2UuUkVNT1RFX01BTlxufVxuXG5mdW5jdGlvbiBpc1JlbW90ZUtpbmcoc3BhY2U6IEJvYXJkSW5kZXgpIHtcbiAgICByZXR1cm4gaXNTcGFjZUluc2lkZUJvYXJkKHNwYWNlKSAmJiBnZXQoc3BhY2UpID09PSBTcGFjZS5SRU1PVEVfS0lOR1xufVxuXG5mdW5jdGlvbiBpc0ZyZWUoc3BhY2U6IEJvYXJkSW5kZXgpIHtcbiAgICByZXR1cm4gaXNTcGFjZUluc2lkZUJvYXJkKHNwYWNlKSAmJiBnZXQoc3BhY2UpID09PSBTcGFjZS5GUkVFXG59XG5cbmZ1bmN0aW9uIGlzSW5kZXhFcXVhbChpOiBCb2FyZEluZGV4LCBqOiBCb2FyZEluZGV4KSB7XG4gICAgcmV0dXJuIGkucm93ID09PSBqLnJvdyAmJiBpLmNvbCA9PT0gai5jb2xcbn1cblxuZnVuY3Rpb24gZHJhd1BpZWNlKGk6IEJvYXJkSW5kZXgpIHtcbiAgICBpZiAoaXNGcmVlKGkpKSByZXR1cm4gIC8vIElnbm9yZSBmcmVlIHNwYWNlc1xuICAgIGNvbnN0IFt4LCB5XSA9IFtpLmNvbCpTSURFX0xFTiwgaS5yb3cqU0lERV9MRU5dXG4gICAgY29uc3Qgc3BhY2UgPSBnZXQoaSlcbiAgICBjb25zdCByID0gU0lERV9MRU4vMiAtIDRcbiAgICBnLmJlZ2luUGF0aCgpXG4gICAgZy5zdHJva2VTdHlsZSA9ICdibGFjaydcbiAgICBzd2l0Y2ggKHNwYWNlKSB7XG4gICAgICAgIGNhc2UgU3BhY2UuTE9DQUxfTUFOOlxuICAgICAgICAgICAgZy5maWxsU3R5bGUgPSBMT0NBTF9NQU5fQ09MT1JcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgU3BhY2UuTE9DQUxfS0lORzpcbiAgICAgICAgICAgIGcuZmlsbFN0eWxlID0gTE9DQUxfS0lOR19DT0xPUlxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBTcGFjZS5SRU1PVEVfTUFOOlxuICAgICAgICAgICAgZy5maWxsU3R5bGUgPSBSRU1PVEVfTUFOX0NPTE9SXG4gICAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIFNwYWNlLlJFTU9URV9LSU5HOlxuICAgICAgICAgICAgZy5maWxsU3R5bGUgPSBSRU1PVEVfS0lOR19DT0xPUlxuICAgICAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgZy5lbGxpcHNlKHgrU0lERV9MRU4vMiwgeStTSURFX0xFTi8yLCByLCByLCAwLCAwLCAyKk1hdGguUEkpXG4gICAgZy5maWxsKClcbiAgICBnLnN0cm9rZSgpXG59XG5cbmZ1bmN0aW9uIGhpZ2hsaWdodFNwYWNlKGk6IEJvYXJkSW5kZXgsIGNvbG9yOiBzdHJpbmcpIHtcbiAgICBnLnN0cm9rZVN0eWxlID0gY29sb3JcbiAgICBnLnN0cm9rZVJlY3QoaS5jb2wqU0lERV9MRU4sIGkucm93KlNJREVfTEVOLCBTSURFX0xFTiwgU0lERV9MRU4pXG59XG5cbmZ1bmN0aW9uIGdldENsaWNrZWRTcGFjZShlOiBNb3VzZUV2ZW50KSB7XG4gICAgY29uc3QgcmVjdCA9IGJvYXJkQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgY29uc3QgeCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdFxuICAgIGNvbnN0IHkgPSBlLmNsaWVudFkgLSByZWN0LnRvcFxuICAgIGNvbnN0IGk6IEJvYXJkSW5kZXggPSB7IHJvdzogTWF0aC5mbG9vcih5L1NJREVfTEVOKSwgY29sOiBNYXRoLmZsb29yKHgvU0lERV9MRU4pIH1cbiAgICBjb25zb2xlLmxvZygnQ2xpY2tlZCBib2FyZCBzcGFjZScsIGkpXG4gICAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdHJ5UHJvbW90ZVRvS2luZyhpOiBCb2FyZEluZGV4KSB7XG4gICAgaWYgKGlzTG9jYWxQaWVjZShpKSAmJiBpLnJvdyA9PT0gMCAmJiAhaXNMb2NhbEtpbmcoaSkpIHtcbiAgICAgICAgc2V0KGksIFNwYWNlLkxPQ0FMX0tJTkcpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSBlbHNlIGlmIChpc1JlbW90ZVBpZWNlKGkpICYmIGkucm93ID09PSA3ICYmICFpc1JlbW90ZUtpbmcoaSkpIHtcbiAgICAgICAgc2V0KGksIFNwYWNlLlJFTU9URV9LSU5HKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuZnVuY3Rpb24gY2hlY2tHYW1lT3ZlcigpIHtcbiAgICBsZXQgbG9jYWxQaWVjZUNvdW50ID0gMFxuICAgIGxldCByZW1vdGVQaWVjZUNvdW50ID0gMFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9hcmQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBib2FyZFswXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3QgcyA9IHsgcm93OiBpLCBjb2w6IGogfSBhcyBCb2FyZEluZGV4XG4gICAgICAgICAgICBpZiAoaXNMb2NhbFBpZWNlKHMpKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxQaWVjZUNvdW50KytcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZW1vdGVQaWVjZShzKSkge1xuICAgICAgICAgICAgICAgIHJlbW90ZVBpZWNlQ291bnQrK1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChsb2NhbFBpZWNlQ291bnQgPT09IDAgfHwgYWxsVmFsaWRNb3ZlcyhQbGF5ZXIuTE9DQUwpLnNpemUgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFBsYXllci5SRU1PVEVcbiAgICB9IGVsc2UgaWYgKHJlbW90ZVBpZWNlQ291bnQgPT09IDAgfHwgYWxsVmFsaWRNb3ZlcyhQbGF5ZXIuUkVNT1RFKS5zaXplID09PSAwKSB7XG4gICAgICAgIHJldHVybiBQbGF5ZXIuTE9DQUxcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzU3BhY2VJbnNpZGVCb2FyZChpOiBCb2FyZEluZGV4KSB7XG4gICAgcmV0dXJuIGkucm93ID49IDAgJiYgaS5yb3cgPCA4ICYmIGkuY29sID49IDAgJiYgaS5jb2wgPCA4XG59XG5cbi8qKiBQcmVjb25kaXRpb246IGkgY29udGFpbnMgYSBsb2NhbCBtYW4gKi9cbmZ1bmN0aW9uIHZhbGlkTW92ZXNGb3JMb2NhbE1hbihpOiBCb2FyZEluZGV4KSB7XG4gICAgaWYgKCFpc0xvY2FsTWFuKGkpKSB0aHJvdyBuZXcgRXJyb3IoJ0lsbGVnYWwgc3RhdGU6IGluZGV4IG11c3QgY29udGFpbiBsb2NhbCBtYW4nKVxuICAgIGNvbnN0IG1vdmVzID0gbmV3IFNldDxNb3ZlPigpXG4gICAgY29uc3QgbGVmdDogQm9hcmRJbmRleCA9IHsgcm93OiBpLnJvdy0xLCBjb2w6IGkuY29sLTEgfVxuICAgIGNvbnN0IGxlZnQyOiBCb2FyZEluZGV4ID0geyByb3c6IGkucm93LTIsIGNvbDogaS5jb2wtMiB9XG4gICAgY29uc3QgcmlnaHQ6IEJvYXJkSW5kZXggPSB7IHJvdzogaS5yb3ctMSwgY29sOiBpLmNvbCsxIH1cbiAgICBjb25zdCByaWdodDI6IEJvYXJkSW5kZXggPSB7IHJvdzogaS5yb3ctMiwgY29sOiBpLmNvbCsyIH1cbiAgICBpZiAoaXNGcmVlKGxlZnQpKSBtb3Zlcy5hZGQoe3NyYzogaSwgZGVzdDogbGVmdH0pXG4gICAgaWYgKGlzRnJlZShyaWdodCkpIG1vdmVzLmFkZCh7c3JjOiBpLCBkZXN0OiByaWdodH0pXG4gICAgaWYgKGlzUmVtb3RlUGllY2UobGVmdCkgJiYgaXNGcmVlKGxlZnQyKSkgbW92ZXMuYWRkKHtzcmM6IGksIGRlc3Q6IGxlZnQyLCBqdW1wZWQ6IGxlZnR9KVxuICAgIGlmIChpc1JlbW90ZVBpZWNlKHJpZ2h0KSAmJiBpc0ZyZWUocmlnaHQyKSkgbW92ZXMuYWRkKHtzcmM6IGksIGRlc3Q6IHJpZ2h0MiwganVtcGVkOiByaWdodH0pXG4gICAgcmV0dXJuIG1vdmVzXG59XG5cbi8qKiBQcmVjb25kaXRpb246IGkgY29udGFpbnMgYSBsb2NhbCBraW5nICovXG5mdW5jdGlvbiB2YWxpZE1vdmVzRm9yTG9jYWxLaW5nKGk6IEJvYXJkSW5kZXgpIHtcbiAgICBpZiAoIWlzTG9jYWxLaW5nKGkpKSB0aHJvdyBuZXcgRXJyb3IoJ0lsbGVnYWwgc3RhdGU6IGluZGV4IG11c3QgY29udGFpbiBsb2NhbCBraW5nJylcbiAgICBjb25zdCBtb3ZlcyA9IG5ldyBTZXQ8TW92ZT4oKVxuICAgIGNvbnN0IHRvcGxlZnQ6IEJvYXJkSW5kZXggPSB7IHJvdzogaS5yb3ctMSwgY29sOiBpLmNvbC0xIH1cbiAgICBjb25zdCB0b3BsZWZ0MjogQm9hcmRJbmRleCA9IHsgcm93OiBpLnJvdy0yLCBjb2w6IGkuY29sLTIgfVxuICAgIGNvbnN0IHRvcHJpZ2h0OiBCb2FyZEluZGV4ID0geyByb3c6IGkucm93LTEsIGNvbDogaS5jb2wrMSB9XG4gICAgY29uc3QgdG9wcmlnaHQyOiBCb2FyZEluZGV4ID0geyByb3c6IGkucm93LTIsIGNvbDogaS5jb2wrMiB9XG4gICAgY29uc3QgYm90dG9tbGVmdDogQm9hcmRJbmRleCA9IHsgcm93OiBpLnJvdysxLCBjb2w6IGkuY29sLTEgfVxuICAgIGNvbnN0IGJvdHRvbWxlZnQyOiBCb2FyZEluZGV4ID0geyByb3c6IGkucm93KzIsIGNvbDogaS5jb2wtMiB9XG4gICAgY29uc3QgYm90dG9tcmlnaHQ6IEJvYXJkSW5kZXggPSB7IHJvdzogaS5yb3crMSwgY29sOiBpLmNvbCsxIH1cbiAgICBjb25zdCBib3R0b21yaWdodDI6IEJvYXJkSW5kZXggPSB7IHJvdzogaS5yb3crMiwgY29sOiBpLmNvbCsyIH1cbiAgICBpZiAoaXNGcmVlKHRvcGxlZnQpKSBtb3Zlcy5hZGQoe3NyYzogaSwgZGVzdDogdG9wbGVmdH0pXG4gICAgaWYgKGlzRnJlZSh0b3ByaWdodCkpIG1vdmVzLmFkZCh7c3JjOiBpLCBkZXN0OiB0b3ByaWdodH0pXG4gICAgaWYgKGlzRnJlZShib3R0b21sZWZ0KSkgbW92ZXMuYWRkKHtzcmM6IGksIGRlc3Q6IGJvdHRvbWxlZnR9KVxuICAgIGlmIChpc0ZyZWUoYm90dG9tcmlnaHQpKSBtb3Zlcy5hZGQoe3NyYzogaSwgZGVzdDogYm90dG9tcmlnaHR9KVxuICAgIGlmIChpc1JlbW90ZVBpZWNlKHRvcGxlZnQpICYmIGlzRnJlZSh0b3BsZWZ0MikpIG1vdmVzLmFkZCh7c3JjOiBpLCBkZXN0OiB0b3BsZWZ0MiwganVtcGVkOiB0b3BsZWZ0fSlcbiAgICBpZiAoaXNSZW1vdGVQaWVjZSh0b3ByaWdodCkgJiYgaXNGcmVlKHRvcHJpZ2h0MikpIG1vdmVzLmFkZCh7c3JjOiBpLCBkZXN0OiB0b3ByaWdodDIsIGp1bXBlZDogdG9wcmlnaHR9KVxuICAgIGlmIChpc1JlbW90ZVBpZWNlKGJvdHRvbWxlZnQpICYmIGlzRnJlZShib3R0b21sZWZ0MikpIG1vdmVzLmFkZCh7c3JjOiBpLCBkZXN0OiBib3R0b21sZWZ0MiwganVtcGVkOiBib3R0b21sZWZ0fSlcbiAgICBpZiAoaXNSZW1vdGVQaWVjZShib3R0b21yaWdodCkgJiYgaXNGcmVlKGJvdHRvbXJpZ2h0MikpIG1vdmVzLmFkZCh7c3JjOiBpLCBkZXN0OiBib3R0b21yaWdodDIsIGp1bXBlZDogYm90dG9tcmlnaHR9KVxuICAgIHJldHVybiBtb3Zlc1xufVxuXG4vKiogUHJlY29uZGl0aW9uOiBpIGNvbnRhaW5zIGEgcmVtb3RlIG1hbiAqL1xuZnVuY3Rpb24gdmFsaWRNb3Zlc0ZvclJlbW90ZU1hbihpOiBCb2FyZEluZGV4KSB7XG4gICAgaWYgKCFpc1JlbW90ZU1hbihpKSkgdGhyb3cgbmV3IEVycm9yKCdJbGxlZ2FsIHN0YXRlOiBpbmRleCBtdXN0IGNvbnRhaW4gcmVtb3RlIG1hbicpXG4gICAgY29uc3QgbW92ZXMgPSBuZXcgU2V0PE1vdmU+KClcbiAgICBjb25zdCBsZWZ0OiBCb2FyZEluZGV4ID0geyByb3c6IGkucm93KzEsIGNvbDogaS5jb2wtMSB9XG4gICAgY29uc3QgbGVmdDI6IEJvYXJkSW5kZXggPSB7IHJvdzogaS5yb3crMiwgY29sOiBpLmNvbC0yIH1cbiAgICBjb25zdCByaWdodDogQm9hcmRJbmRleCA9IHsgcm93OiBpLnJvdysxLCBjb2w6IGkuY29sKzEgfVxuICAgIGNvbnN0IHJpZ2h0MjogQm9hcmRJbmRleCA9IHsgcm93OiBpLnJvdysyLCBjb2w6IGkuY29sKzIgfVxuICAgIGlmIChpc0ZyZWUobGVmdCkpIG1vdmVzLmFkZCh7c3JjOiBpLCBkZXN0OiBsZWZ0fSlcbiAgICBpZiAoaXNGcmVlKHJpZ2h0KSkgbW92ZXMuYWRkKHtzcmM6IGksIGRlc3Q6IHJpZ2h0fSlcbiAgICBpZiAoaXNMb2NhbFBpZWNlKGxlZnQpICYmIGlzRnJlZShsZWZ0MikpIG1vdmVzLmFkZCh7c3JjOiBpLCBkZXN0OiBsZWZ0MiwganVtcGVkOiBsZWZ0fSlcbiAgICBpZiAoaXNMb2NhbFBpZWNlKHJpZ2h0KSAmJiBpc0ZyZWUocmlnaHQyKSkgbW92ZXMuYWRkKHtzcmM6IGksIGRlc3Q6IHJpZ2h0MiwganVtcGVkOiByaWdodH0pXG4gICAgcmV0dXJuIG1vdmVzXG59XG5cbi8qKiBQcmVjb25kaXRpb246IGkgY29udGFpbnMgYSByZW1vdGUga2luZyAqL1xuZnVuY3Rpb24gdmFsaWRNb3Zlc0ZvclJlbW90ZUtpbmcoaTogQm9hcmRJbmRleCkge1xuICAgIGlmICghaXNSZW1vdGVLaW5nKGkpKSB0aHJvdyBuZXcgRXJyb3IoJ0lsbGVnYWwgc3RhdGU6IGluZGV4IG11c3QgY29udGFpbiByZW1vdGUga2luZycpXG4gICAgY29uc3QgbW92ZXMgPSBuZXcgU2V0PE1vdmU+KClcbiAgICBjb25zdCB0b3BsZWZ0OiBCb2FyZEluZGV4ID0geyByb3c6IGkucm93LTEsIGNvbDogaS5jb2wtMSB9XG4gICAgY29uc3QgdG9wbGVmdDI6IEJvYXJkSW5kZXggPSB7IHJvdzogaS5yb3ctMiwgY29sOiBpLmNvbC0yIH1cbiAgICBjb25zdCB0b3ByaWdodDogQm9hcmRJbmRleCA9IHsgcm93OiBpLnJvdy0xLCBjb2w6IGkuY29sKzEgfVxuICAgIGNvbnN0IHRvcHJpZ2h0MjogQm9hcmRJbmRleCA9IHsgcm93OiBpLnJvdy0yLCBjb2w6IGkuY29sKzIgfVxuICAgIGNvbnN0IGJvdHRvbWxlZnQ6IEJvYXJkSW5kZXggPSB7IHJvdzogaS5yb3crMSwgY29sOiBpLmNvbC0xIH1cbiAgICBjb25zdCBib3R0b21sZWZ0MjogQm9hcmRJbmRleCA9IHsgcm93OiBpLnJvdysyLCBjb2w6IGkuY29sLTIgfVxuICAgIGNvbnN0IGJvdHRvbXJpZ2h0OiBCb2FyZEluZGV4ID0geyByb3c6IGkucm93KzEsIGNvbDogaS5jb2wrMSB9XG4gICAgY29uc3QgYm90dG9tcmlnaHQyOiBCb2FyZEluZGV4ID0geyByb3c6IGkucm93KzIsIGNvbDogaS5jb2wrMiB9XG4gICAgaWYgKGlzRnJlZSh0b3BsZWZ0KSkgbW92ZXMuYWRkKHtzcmM6IGksIGRlc3Q6IHRvcGxlZnR9KVxuICAgIGlmIChpc0ZyZWUodG9wcmlnaHQpKSBtb3Zlcy5hZGQoe3NyYzogaSwgZGVzdDogdG9wcmlnaHR9KVxuICAgIGlmIChpc0ZyZWUoYm90dG9tbGVmdCkpIG1vdmVzLmFkZCh7c3JjOiBpLCBkZXN0OiBib3R0b21sZWZ0fSlcbiAgICBpZiAoaXNGcmVlKGJvdHRvbXJpZ2h0KSkgbW92ZXMuYWRkKHtzcmM6IGksIGRlc3Q6IGJvdHRvbXJpZ2h0fSlcbiAgICBpZiAoaXNMb2NhbFBpZWNlKHRvcGxlZnQpICYmIGlzRnJlZSh0b3BsZWZ0MikpIG1vdmVzLmFkZCh7c3JjOiBpLCBkZXN0OiB0b3BsZWZ0MiwganVtcGVkOiB0b3BsZWZ0fSlcbiAgICBpZiAoaXNMb2NhbFBpZWNlKHRvcHJpZ2h0KSAmJiBpc0ZyZWUodG9wcmlnaHQyKSkgbW92ZXMuYWRkKHtzcmM6IGksIGRlc3Q6IHRvcHJpZ2h0MiwganVtcGVkOiB0b3ByaWdodH0pXG4gICAgaWYgKGlzTG9jYWxQaWVjZShib3R0b21sZWZ0KSAmJiBpc0ZyZWUoYm90dG9tbGVmdDIpKSBtb3Zlcy5hZGQoe3NyYzogaSwgZGVzdDogYm90dG9tbGVmdDIsIGp1bXBlZDogYm90dG9tbGVmdH0pXG4gICAgaWYgKGlzTG9jYWxQaWVjZShib3R0b21yaWdodCkgJiYgaXNGcmVlKGJvdHRvbXJpZ2h0MikpIG1vdmVzLmFkZCh7c3JjOiBpLCBkZXN0OiBib3R0b21yaWdodDIsIGp1bXBlZDogYm90dG9tcmlnaHR9KVxuICAgIHJldHVybiBtb3Zlc1xufVxuXG5mdW5jdGlvbiBnZXRWYWxpZE1vdmVzKGk6IEJvYXJkSW5kZXgpIHtcbiAgICBpZiAoIWlzU3BhY2VJbnNpZGVCb2FyZChpKSkgdGhyb3cgbmV3IEVycm9yKCdJbmRleCBvdXQgb2YgYm91bmRzJylcbiAgICBsZXQgbW92ZXM6IFNldDxNb3ZlPlxuICAgIHN3aXRjaCAoYm9hcmRbaS5yb3ddW2kuY29sXSkge1xuICAgICAgICBjYXNlIFNwYWNlLkxPQ0FMX01BTjpcbiAgICAgICAgICAgIG1vdmVzID0gdmFsaWRNb3Zlc0ZvckxvY2FsTWFuKGkpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBTcGFjZS5MT0NBTF9LSU5HOlxuICAgICAgICAgICAgbW92ZXMgPSB2YWxpZE1vdmVzRm9yTG9jYWxLaW5nKGkpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBTcGFjZS5SRU1PVEVfTUFOOlxuICAgICAgICAgICAgbW92ZXMgPSB2YWxpZE1vdmVzRm9yUmVtb3RlTWFuKGkpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBTcGFjZS5SRU1PVEVfS0lORzpcbiAgICAgICAgICAgIG1vdmVzID0gdmFsaWRNb3Zlc0ZvclJlbW90ZUtpbmcoaSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTZXQ8TW92ZT4oKSAgLy8gTm8gdmFsaWQgbW92ZXMgZm9yIGFuIGVtcHR5IHNwYWNlXG4gICAgfVxuICAgIC8vIElmIGEgcGllY2UgaGFzIGp1bXAgbW92ZXMsIHRoZW4gdGhvc2UgYXJlIHRoZSBvbmx5IHZhbGlkIG1vdmVzXG4gICAgY29uc3QganVtcE1vdmVzID0gbmV3IFNldDxNb3ZlPigpXG4gICAgbW92ZXMuZm9yRWFjaChtID0+IHtcbiAgICAgICAgaWYgKG0uanVtcGVkKSB7XG4gICAgICAgICAgICBqdW1wTW92ZXMuYWRkKG0pXG4gICAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBqdW1wTW92ZXMuc2l6ZSA+IDAgPyBqdW1wTW92ZXMgOiBtb3Zlc1xufVxuXG4vKiogUmV0dXJuIGEgU2V0IG9mIGFsbCB2YWxpZCBtb3ZlcyBmb3IgcGxheWVyLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFsbFZhbGlkTW92ZXMocDogUGxheWVyKSB7XG4gICAgY29uc3QgYWxsVmFsaWRNb3ZlU2V0cyA9IG5ldyBTZXQ8U2V0PE1vdmU+PigpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2FyZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvYXJkWzBdLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCBzID0geyByb3c6IGksIGNvbDogaiB9IGFzIEJvYXJkSW5kZXhcbiAgICAgICAgICAgIGlmIChwID09PSBQbGF5ZXIuTE9DQUwgJiYgaXNMb2NhbFBpZWNlKHMpIHx8IHAgPT09IFBsYXllci5SRU1PVEUgJiYgaXNSZW1vdGVQaWVjZShzKSkge1xuICAgICAgICAgICAgICAgIGFsbFZhbGlkTW92ZVNldHMuYWRkKGdldFZhbGlkTW92ZXMocykpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWxsSnVtcE1vdmVzID0gbmV3IFNldDxNb3ZlPigpXG4gICAgY29uc3QgYWxsTm9uSnVtcE1vdmVzID0gbmV3IFNldDxNb3ZlPigpXG4gICAgYWxsVmFsaWRNb3ZlU2V0cy5mb3JFYWNoKG1vdmVTZXQgPT4ge1xuICAgICAgICBtb3ZlU2V0LmZvckVhY2gobW92ZSA9PiB7XG4gICAgICAgICAgICBpZiAobW92ZS5qdW1wZWQpIHtcbiAgICAgICAgICAgICAgICBhbGxKdW1wTW92ZXMuYWRkKG1vdmUpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFsbE5vbkp1bXBNb3Zlcy5hZGQobW92ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxuICAgIC8vIElmIHRoZXJlIGFyZSBqdW1wIG1vdmVzLCB0aG9zZSBhcmUgdGhlIG9ubHkgdmFsaWQgbW92ZXNcbiAgICBpZiAoYWxsSnVtcE1vdmVzLnNpemUgPiAwKSB7XG4gICAgICAgIHJldHVybiBhbGxKdW1wTW92ZXNcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYWxsTm9uSnVtcE1vdmVzXG4gICAgfVxufVxuXG5ib2FyZENhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcbiAgICBpZiAoIWdhbWVTdGFydGVkKSByZXR1cm5cbiAgICBjb25zdCBjbGlja2VkU3BhY2UgPSBnZXRDbGlja2VkU3BhY2UoZXZlbnQpXG4gICAgaWYgKGdvQWdhaW4pIHtcbiAgICAgICAgaWYgKHZhbGlkTW92ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vdmUgPSBhbnlNYXRjaCh2YWxpZE1vdmVzLCBlID0+IGlzSW5kZXhFcXVhbChlLmRlc3QsIGNsaWNrZWRTcGFjZSkpXG4gICAgICAgICAgICBpZiAobW92ZSkge1xuICAgICAgICAgICAgICAgIGdvQWdhaW4gPSAhbWFrZU1vdmUobW92ZSlcbiAgICAgICAgICAgICAgICBzZW5kTW92ZShtb3ZlKVxuICAgICAgICAgICAgICAgIGlmICghZ29BZ2Fpbikge1xuICAgICAgICAgICAgICAgICAgICBzZW5kRW5kVHVybigpXG4gICAgICAgICAgICAgICAgICAgIHN3YXBUdXJucygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0ZyZWUoY2xpY2tlZFNwYWNlKSAmJiBzZWxlY3RlZFNwYWNlKSB7XG4gICAgICAgIGlmICh2YWxpZE1vdmVzKSB7XG4gICAgICAgICAgICBjb25zdCBtb3ZlID0gYW55TWF0Y2godmFsaWRNb3ZlcywgZSA9PiBpc0luZGV4RXF1YWwoZS5kZXN0LCBjbGlja2VkU3BhY2UpKVxuICAgICAgICAgICAgaWYgKG1vdmUpIHtcbiAgICAgICAgICAgICAgICBnb0FnYWluID0gIW1ha2VNb3ZlKG1vdmUpXG4gICAgICAgICAgICAgICAgc2VuZE1vdmUobW92ZSlcbiAgICAgICAgICAgICAgICBpZiAoIWdvQWdhaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZEVuZFR1cm4oKVxuICAgICAgICAgICAgICAgICAgICBzd2FwVHVybnMoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRTcGFjZSA9IG51bGxcbiAgICAgICAgICAgICAgICB2YWxpZE1vdmVzID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0ZWRTcGFjZSA9IG51bGxcbiAgICAgICAgICAgIHZhbGlkTW92ZXMgPSBudWxsXG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoYW55TWF0Y2goYWxsVmFsaWRNb3Zlcyh0dXJuUGxheWVyKSwgbSA9PiBpc0luZGV4RXF1YWwobS5zcmMsIGNsaWNrZWRTcGFjZSkpKSB7XG4gICAgICAgICAgICBzZWxlY3RlZFNwYWNlID0gY2xpY2tlZFNwYWNlXG4gICAgICAgICAgICB2YWxpZE1vdmVzID0gZ2V0VmFsaWRNb3ZlcyhzZWxlY3RlZFNwYWNlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0ZWRTcGFjZSA9IG51bGxcbiAgICAgICAgICAgIHZhbGlkTW92ZXMgPSBudWxsXG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgd2lubmVyID0gY2hlY2tHYW1lT3ZlcigpXG4gICAgZHJhd0JvYXJkKClcbiAgICBpZiAod2lubmVyKSB7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gd2lubmVyID09PSBQbGF5ZXIuTE9DQUwgPyBMT0NBTF9NQU5fQ09MT1IgOiBSRU1PVEVfTUFOX0NPTE9SXG4gICAgICAgIGFsZXJ0KGAke2NvbG9yfSBoYXMgd29uIWApXG4gICAgfVxufSlcblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdCb2FyZCgpIHtcbiAgICAvLyBnLmNsZWFyUmVjdCgwLCAwLCBib2FyZENhbnZhcy53aWR0aCwgYm9hcmRDYW52YXMuaGVpZ2h0KVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9hcmQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBib2FyZFtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNwYWNlID0geyByb3c6IGksIGNvbDogaiB9XG4gICAgICAgICAgICBjb25zdCB4ID0gaiAqIFNJREVfTEVOXG4gICAgICAgICAgICBjb25zdCB5ID0gaSAqIFNJREVfTEVOXG4gICAgICAgICAgICBnLmZpbGxTdHlsZSA9IChpICsgaikgJSAyID8gREFSS19TUEFDRV9DT0xPUiA6IExJR0hUX1NQQUNFX0NPTE9SXG4gICAgICAgICAgICBnLmZpbGxSZWN0KHgsIHksIFNJREVfTEVOLCBTSURFX0xFTilcbiAgICAgICAgICAgIGRyYXdQaWVjZShjdXJyZW50U3BhY2UpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHVyblBsYXllciA9PT0gUGxheWVyLkxPQ0FMKSB7XG4gICAgICAgIGFsbFZhbGlkTW92ZXModHVyblBsYXllcikuZm9yRWFjaChtID0+IHtcbiAgICAgICAgICAgIGhpZ2hsaWdodFNwYWNlKG0uc3JjLCBQSUVDRV9TRUxFQ1RJT05fQk9SREVSX0NPTE9SKVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmIChzZWxlY3RlZFNwYWNlKSB7XG4gICAgICAgICAgICBoaWdobGlnaHRTcGFjZShzZWxlY3RlZFNwYWNlLCBQSUVDRV9TRUxFQ1RJT05fQk9SREVSX0NPTE9SKVxuICAgICAgICAgICAgdmFsaWRNb3Zlcz8uZm9yRWFjaChtID0+IHtcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRTcGFjZShtLmRlc3QsIEZSRUVfU1BBQ0VfU0VMRUNUSU9OX0JPUkRFUl9DT0xPUilcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydEdhbWUoc3RhcnRpbmdQbGF5ZXI6IFBsYXllcikge1xuICAgIHR1cm5QbGF5ZXIgPSBzdGFydGluZ1BsYXllclxuICAgIGdhbWVTdGFydGVkID0gdHJ1ZVxufVxuXG4vKiogTWFrZSBhIG1vdmUuIFJldHVybiB0cnVlIGlmIHRoZSB0dXJuIHNob3VsZCBlbmQuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZU1vdmUobW92ZTogTW92ZSk6IGJvb2xlYW4ge1xuICAgIGlmIChtb3ZlLmp1bXBlZCkge1xuICAgICAgICBzZXQobW92ZS5qdW1wZWQsIFNwYWNlLkZSRUUpXG4gICAgICAgIHNldChtb3ZlLmRlc3QsIGdldChtb3ZlLnNyYykpXG4gICAgICAgIHNldChtb3ZlLnNyYywgU3BhY2UuRlJFRSlcbiAgICAgICAgaWYgKHRyeVByb21vdGVUb0tpbmcobW92ZS5kZXN0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgICBzZWxlY3RlZFNwYWNlID0gbW92ZS5kZXN0XG4gICAgICAgIHZhbGlkTW92ZXMgPSBnZXRWYWxpZE1vdmVzKHNlbGVjdGVkU3BhY2UpXG4gICAgICAgIHJldHVybiAhYW55TWF0Y2godmFsaWRNb3ZlcywgbSA9PiAhIW0uanVtcGVkKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHNldChtb3ZlLmRlc3QsIGdldChtb3ZlLnNyYykpXG4gICAgICAgIHNldChtb3ZlLnNyYywgU3BhY2UuRlJFRSlcbiAgICAgICAgdHJ5UHJvbW90ZVRvS2luZyhtb3ZlLmRlc3QpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3dhcFR1cm5zKCkge1xuICAgIHR1cm5QbGF5ZXIgPSAodHVyblBsYXllciA9PT0gUGxheWVyLkxPQ0FMID8gUGxheWVyLlJFTU9URSA6IFBsYXllci5MT0NBTClcbiAgICBzZWxlY3RlZFNwYWNlID0gbnVsbFxuICAgIHZhbGlkTW92ZXMgPSBudWxsXG4gICAgZ29BZ2FpbiA9IGZhbHNlXG59XG4iLCIvKlxuICogaW5kZXgudHNcbiAqXG4gKiBFbnRyeSBwb2ludCBmb3IgdGhlIGFwcGxpY2F0aW9uLlxuICovXG5cbmltcG9ydCB7IGRyYXdCb2FyZCB9IGZyb20gJy4vZ2FtZWJvYXJkJ1xuaW1wb3J0IHsgaG9zdEdhbWUsIGpvaW5HYW1lIH0gZnJvbSAnLi9wMnAnXG5cbmNvbnN0IGNyZWF0ZUdhbWVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWNyZWF0ZS1nYW1lJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbmNvbnN0IGpvaW5HYW1lQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1qb2luLWdhbWUnKSBhcyBIVE1MQnV0dG9uRWxlbWVudFxuXG4vKiBidG4tY3JlYXRlLWdhbWUgY2xpY2sgZXZlbnQgbGlzdGVuZXIgKi9cbmNyZWF0ZUdhbWVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBldiA9PiB7XG4gICAgaG9zdEdhbWUoKVxufSlcblxuLyogYnRuLWpvaW4tZ2FtZSBjbGljayBldmVudCBsaXN0ZW5lciAqL1xuam9pbkdhbWVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBldiA9PiB7XG4gICAgY29uc3QgZ2FtZUNvZGUgPSBwcm9tcHQoJ0VudGVyIGEgZ2FtZSBjb2RlJylcbiAgICBqb2luR2FtZShnYW1lQ29kZSlcbn0pXG5cbmRyYXdCb2FyZCgpXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///838\n")})()})();